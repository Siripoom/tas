{
  "info": {
    "_postman_id": "2a05c56f-4728-4a06-95e3-93535c9d24e9",
    "name": "TAS Backend API",
    "description": "Full API collection for tas-backend (Express + PostgreSQL + MinIO). Includes all implemented endpoints under /health and /api/* with role-based examples.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "System",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{hostUrl}}/health"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login (Generic)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/auth/login",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{loginIdentity}}\",\n  \"password\": \"{{loginPassword}}\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.accessToken) pm.collectionVariables.set(\"accessToken\", json.accessToken);",
                  "  if (json.refreshToken) pm.collectionVariables.set(\"refreshToken\", json.refreshToken);",
                  "  if (json.user?.id) pm.collectionVariables.set(\"userId\", json.user.id);",
                  "  if (json.user?.role) pm.collectionVariables.set(\"userRole\", json.user.role);",
                  "  if (json.user?.facultyId) pm.collectionVariables.set(\"facultyId\", json.user.facultyId);",
                  "  if (json.user?.departmentId) pm.collectionVariables.set(\"departmentId\", json.user.departmentId);",
                  "  if (json.user?.majorId) pm.collectionVariables.set(\"majorId\", json.user.majorId);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Super Admin (seeded)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/auth/login",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"superadmin\",\n  \"password\": \"ChangeMe123!\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.accessToken) pm.collectionVariables.set(\"accessToken\", json.accessToken);",
                  "  if (json.refreshToken) pm.collectionVariables.set(\"refreshToken\", json.refreshToken);",
                  "  if (json.user?.id) pm.collectionVariables.set(\"userId\", json.user.id);",
                  "  if (json.user?.role) pm.collectionVariables.set(\"userRole\", json.user.role);",
                  "  if (json.user?.facultyId) pm.collectionVariables.set(\"facultyId\", json.user.facultyId);",
                  "  if (json.user?.departmentId) pm.collectionVariables.set(\"departmentId\", json.user.departmentId);",
                  "  if (json.user?.majorId) pm.collectionVariables.set(\"majorId\", json.user.majorId);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Teacher (seeded)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/auth/login",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"teacher1\",\n  \"password\": \"ChangeMe123!\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.accessToken) pm.collectionVariables.set(\"accessToken\", json.accessToken);",
                  "  if (json.refreshToken) pm.collectionVariables.set(\"refreshToken\", json.refreshToken);",
                  "  if (json.user?.id) pm.collectionVariables.set(\"userId\", json.user.id);",
                  "  if (json.user?.role) pm.collectionVariables.set(\"userRole\", json.user.role);",
                  "  if (json.user?.facultyId) pm.collectionVariables.set(\"facultyId\", json.user.facultyId);",
                  "  if (json.user?.departmentId) pm.collectionVariables.set(\"departmentId\", json.user.departmentId);",
                  "  if (json.user?.majorId) pm.collectionVariables.set(\"majorId\", json.user.majorId);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Dept Staff (seeded)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/auth/login",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"deptstaff1\",\n  \"password\": \"ChangeMe123!\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.accessToken) pm.collectionVariables.set(\"accessToken\", json.accessToken);",
                  "  if (json.refreshToken) pm.collectionVariables.set(\"refreshToken\", json.refreshToken);",
                  "  if (json.user?.id) pm.collectionVariables.set(\"userId\", json.user.id);",
                  "  if (json.user?.role) pm.collectionVariables.set(\"userRole\", json.user.role);",
                  "  if (json.user?.facultyId) pm.collectionVariables.set(\"facultyId\", json.user.facultyId);",
                  "  if (json.user?.departmentId) pm.collectionVariables.set(\"departmentId\", json.user.departmentId);",
                  "  if (json.user?.majorId) pm.collectionVariables.set(\"majorId\", json.user.majorId);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login Faculty Admin (seeded)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/auth/login",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"facultyadmin1\",\n  \"password\": \"ChangeMe123!\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.accessToken) pm.collectionVariables.set(\"accessToken\", json.accessToken);",
                  "  if (json.refreshToken) pm.collectionVariables.set(\"refreshToken\", json.refreshToken);",
                  "  if (json.user?.id) pm.collectionVariables.set(\"userId\", json.user.id);",
                  "  if (json.user?.role) pm.collectionVariables.set(\"userRole\", json.user.role);",
                  "  if (json.user?.facultyId) pm.collectionVariables.set(\"facultyId\", json.user.facultyId);",
                  "  if (json.user?.departmentId) pm.collectionVariables.set(\"departmentId\", json.user.departmentId);",
                  "  if (json.user?.majorId) pm.collectionVariables.set(\"majorId\", json.user.majorId);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Access Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/auth/refresh",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.accessToken) pm.collectionVariables.set(\"accessToken\", json.accessToken);",
                  "  if (json.refreshToken) pm.collectionVariables.set(\"refreshToken\", json.refreshToken);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Change Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/auth/change-password",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"{{currentPassword}}\",\n  \"newPassword\": \"{{newPassword}}\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Register Student",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/auth/register-student",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"studentCode\": \"6500000001\",\n  \"password\": \"ChangeMe123!\",\n  \"username\": \"student6500000001\",\n  \"email\": \"6500000001@example.com\"\n}"
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Activities",
      "item": [
        {
          "name": "List Activities",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/activities?scope={{activityScope}}&department={{departmentId}}&status={{activityStatus}}&dateFrom={{dateFrom}}&dateTo={{dateTo}}"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (Array.isArray(json) && json.length > 0 && json[0].id) pm.collectionVariables.set(\"activityId\", json[0].id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Activity By ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/activities/{{activityId}}"
          },
          "response": []
        },
        {
          "name": "Create Activity",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/activities",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Workshop: Portfolio Development\",\n  \"startAt\": \"2026-03-01T09:00:00.000Z\",\n  \"endAt\": \"2026-03-01T12:00:00.000Z\",\n  \"location\": \"Building A, Room 101\",\n  \"hours\": 3,\n  \"requiredEvidenceType\": \"PHOTO\",\n  \"capacity\": 100,\n  \"applyOpenAt\": \"2026-02-15T00:00:00.000Z\",\n  \"applyCloseAt\": \"2026-02-28T23:59:00.000Z\",\n  \"note\": \"Bring student card\",\n  \"ownerScope\": \"DEPARTMENT\",\n  \"ownerFacultyId\": \"{{facultyId}}\",\n  \"ownerDepartmentId\": \"{{departmentId}}\",\n  \"status\": \"OPEN_REGISTRATION\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.id) pm.collectionVariables.set(\"activityId\", json.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Activity",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/activities/{{activityId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Workshop: Portfolio Development (Updated)\",\n  \"note\": \"Bring student card and laptop\",\n  \"status\": \"OPEN_REGISTRATION\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Delete Activity",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": "{{baseUrl}}/activities/{{activityId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Apply Activity (Student)",
          "request": {
            "method": "POST",
            "header": [],
            "url": "{{baseUrl}}/activities/{{activityId}}/apply",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.id) pm.collectionVariables.set(\"applicationId\", json.id);",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Approvals",
      "item": [
        {
          "name": "Get Pending Approvals",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/approvals/pending",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (Array.isArray(json.applications) && json.applications.length > 0 && json.applications[0].id) pm.collectionVariables.set(\"applicationId\", json.applications[0].id);",
                  "  if (Array.isArray(json.records) && json.records.length > 0 && json.records[0].id) pm.collectionVariables.set(\"recordId\", json.records[0].id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Approve Application",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/approvals/{{applicationId}}/approve",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"remark\": \"Approved by advisor\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Request Application Revision",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/approvals/{{applicationId}}/request-revision",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"remark\": \"Please upload clearer evidence\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Approve Record",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/approvals/records/{{recordId}}/approve",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"remark\": \"Record approved\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Request Record Revision",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/approvals/records/{{recordId}}/request-revision",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"remark\": \"Please fix activity date\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Complete Record",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/approvals/records/{{recordId}}/complete",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"remark\": \"Completed after verification\"\n}"
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Student Records",
      "item": [
        {
          "name": "List My Records",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/students/me/records",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (Array.isArray(json) && json.length > 0 && json[0].id) pm.collectionVariables.set(\"recordId\", json[0].id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Record",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/students/me/records",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"External Seminar Participation\",\n  \"joinStart\": \"2026-02-01T08:00:00.000Z\",\n  \"joinEnd\": \"2026-02-01T12:00:00.000Z\",\n  \"location\": \"Online\",\n  \"hours\": 4,\n  \"note\": \"Hosted by partner university\"\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.id) pm.collectionVariables.set(\"recordId\", json.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Record",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/students/me/records/{{recordId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"External Seminar Participation (Updated)\",\n  \"note\": \"Updated note\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Delete Record",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": "{{baseUrl}}/students/me/records/{{recordId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Submit Record",
          "request": {
            "method": "POST",
            "header": [],
            "url": "{{baseUrl}}/students/me/records/{{recordId}}/submit",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Students",
      "item": [
        {
          "name": "Get My Progress",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/students/me/progress",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Files",
      "item": [
        {
          "name": "List Files",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/files?ownerType={{ownerType}}&ownerId={{ownerId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (Array.isArray(json) && json.length > 0 && json[0].id) pm.collectionVariables.set(\"fileId\", json[0].id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Upload Evidence File",
          "request": {
            "method": "POST",
            "header": [],
            "url": "{{baseUrl}}/files/upload",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "ownerType",
                  "value": "RECORD",
                  "type": "text"
                },
                {
                  "key": "ownerId",
                  "value": "{{recordId}}",
                  "type": "text"
                },
                {
                  "key": "file",
                  "type": "file",
                  "src": "{{sampleFilePath}}"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.id) pm.collectionVariables.set(\"fileId\", json.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Download File",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/files/{{fileId}}/download",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete File",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": "{{baseUrl}}/files/{{fileId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Reports",
      "item": [
        {
          "name": "Student Report PDF",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/reports/student/me.pdf",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Department Report XLSX",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/reports/department.xlsx?year={{reportYear}}&classYear={{reportClassYear}}&major={{majorId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Admin Report XLSX",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/reports/admin.xlsx?department={{departmentId}}&major={{majorId}}&status={{reportStatus}}&activity={{activityId}}&dateFrom={{dateFrom}}&dateTo={{dateTo}}&classYear={{reportClassYear}}&academicYear={{reportAcademicYear}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Users (Admin)",
      "item": [
        {
          "name": "List Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/users?role={{filterRole}}&status={{filterUserStatus}}&departmentId={{departmentId}}&facultyId={{facultyId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (Array.isArray(json) && json.length > 0 && json[0].id) pm.collectionVariables.set(\"managedUserId\", json[0].id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get User By ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/users/{{managedUserId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/users",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"new-teacher-01\",\n  \"email\": \"new-teacher-01@tas.local\",\n  \"password\": \"ChangeMe123!\",\n  \"firstName\": \"New\",\n  \"lastName\": \"Teacher\",\n  \"phone\": \"0811111111\",\n  \"role\": \"TEACHER\",\n  \"status\": \"ACTIVE\",\n  \"teacherProfile\": {\n    \"employeeCode\": \"EMP-1001\",\n    \"facultyId\": \"{{facultyId}}\",\n    \"departmentId\": \"{{departmentId}}\"\n  }\n}"
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (json.id) pm.collectionVariables.set(\"managedUserId\", json.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Update User",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/users/{{managedUserId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Updated\",\n  \"lastName\": \"Teacher\",\n  \"status\": \"ACTIVE\"\n}"
            }
          },
          "response": []
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": "{{baseUrl}}/users/{{managedUserId}}",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin",
      "item": [
        {
          "name": "Import Students",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/admin/import/students",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"studentCode\": \"6600000001\",\n      \"firstName\": \"Demo\",\n      \"lastName\": \"StudentImport\",\n      \"email\": \"6600000001@example.com\",\n      \"facultyCode\": \"FITED\",\n      \"facultyName\": \"คณะครุศาสตร์อุตสาหกรรม\",\n      \"departmentCode\": \"EDTECH\",\n      \"departmentName\": \"ภาควิชาเทคโนโลยีการศึกษา\",\n      \"majorCode\": \"TCT\",\n      \"majorName\": \"เทคโนโลยีและคอมพิวเตอร์ศึกษา\",\n      \"classYear\": 3,\n      \"academicYear\": 2569\n    }\n  ]\n}"
            }
          },
          "response": []
        },
        {
          "name": "Import Teachers",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/admin/import/teachers",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"employeeCode\": \"T-009\",\n      \"username\": \"teacher-import-1\",\n      \"email\": \"teacher-import-1@tas.local\",\n      \"firstName\": \"Import\",\n      \"lastName\": \"Teacher\",\n      \"facultyId\": \"{{facultyId}}\",\n      \"departmentId\": \"{{departmentId}}\"\n    }\n  ]\n}"
            }
          },
          "response": []
        },
        {
          "name": "Import Staff",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/admin/import/staff",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"username\": \"staff-import-1\",\n      \"email\": \"staff-import-1@tas.local\",\n      \"firstName\": \"Import\",\n      \"lastName\": \"Staff\",\n      \"staffType\": \"DEPT_STAFF\",\n      \"facultyId\": \"{{facultyId}}\",\n      \"departmentId\": \"{{departmentId}}\"\n    }\n  ]\n}"
            }
          },
          "response": []
        },
        {
          "name": "Reset User Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": "{{baseUrl}}/admin/users/{{managedUserId}}/reset-password",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"newPassword\": \"ChangeMe123!\"\n}"
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "List My Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": "{{baseUrl}}/notifications/me",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code >= 200 && pm.response.code < 300) {",
                  "  const json = pm.response.json();",
                  "  if (Array.isArray(json) && json.length > 0 && json[0].id) pm.collectionVariables.set(\"notificationId\", json[0].id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Mark Notification Read",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": "{{baseUrl}}/notifications/{{notificationId}}/read",
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "hostUrl",
      "value": "http://localhost:4556"
    },
    {
      "key": "baseUrl",
      "value": "{{hostUrl}}/api"
    },
    {
      "key": "accessToken",
      "value": ""
    },
    {
      "key": "refreshToken",
      "value": ""
    },
    {
      "key": "userId",
      "value": ""
    },
    {
      "key": "userRole",
      "value": ""
    },
    {
      "key": "facultyId",
      "value": ""
    },
    {
      "key": "departmentId",
      "value": ""
    },
    {
      "key": "majorId",
      "value": ""
    },
    {
      "key": "activityId",
      "value": ""
    },
    {
      "key": "applicationId",
      "value": ""
    },
    {
      "key": "recordId",
      "value": ""
    },
    {
      "key": "fileId",
      "value": ""
    },
    {
      "key": "ownerType",
      "value": "RECORD"
    },
    {
      "key": "ownerId",
      "value": "{{recordId}}"
    },
    {
      "key": "managedUserId",
      "value": ""
    },
    {
      "key": "notificationId",
      "value": ""
    },
    {
      "key": "sampleFilePath",
      "value": ""
    },
    {
      "key": "loginIdentity",
      "value": "superadmin"
    },
    {
      "key": "loginPassword",
      "value": "ChangeMe123!"
    },
    {
      "key": "currentPassword",
      "value": "ChangeMe123!"
    },
    {
      "key": "newPassword",
      "value": "ChangeMe123!"
    },
    {
      "key": "activityScope",
      "value": ""
    },
    {
      "key": "activityStatus",
      "value": ""
    },
    {
      "key": "dateFrom",
      "value": ""
    },
    {
      "key": "dateTo",
      "value": ""
    },
    {
      "key": "reportYear",
      "value": ""
    },
    {
      "key": "reportClassYear",
      "value": ""
    },
    {
      "key": "reportStatus",
      "value": ""
    },
    {
      "key": "reportAcademicYear",
      "value": ""
    },
    {
      "key": "filterRole",
      "value": ""
    },
    {
      "key": "filterUserStatus",
      "value": ""
    }
  ]
}
