{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/apiClient.js"],"sourcesContent":["// create axios instance with default config\nimport axios from \"axios\";\n\nconst baseURL = process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:4556/api\";\n\nconst apiClient = axios.create({\n  baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nconst getToken = () => (typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null);\nconst getRefreshToken = () =>\n  typeof window !== \"undefined\" ? localStorage.getItem(\"refreshToken\") : null;\n\nconst setTokens = (accessToken, refreshToken) => {\n  if (typeof window === \"undefined\") return;\n  if (accessToken) localStorage.setItem(\"token\", accessToken);\n  if (refreshToken) localStorage.setItem(\"refreshToken\", refreshToken);\n};\n\nconst clearTokens = () => {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"refreshToken\");\n};\n\napiClient.interceptors.request.use(\n  (config) => {\n    const token = getToken();\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error),\n);\n\nlet isRefreshing = false;\nlet pendingRequests = [];\n\nconst processQueue = (error, token = null) => {\n  pendingRequests.forEach((promise) => {\n    if (error) {\n      promise.reject(error);\n    } else {\n      promise.resolve(token);\n    }\n  });\n  pendingRequests = [];\n};\n\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status !== 401 || originalRequest?._retry) {\n      return Promise.reject(error);\n    }\n\n    const refreshToken = getRefreshToken();\n    if (!refreshToken) {\n      clearTokens();\n      return Promise.reject(error);\n    }\n\n    if (isRefreshing) {\n      return new Promise((resolve, reject) => {\n        pendingRequests.push({ resolve, reject });\n      })\n        .then((token) => {\n          originalRequest.headers.Authorization = `Bearer ${token}`;\n          return apiClient(originalRequest);\n        })\n        .catch((refreshError) => Promise.reject(refreshError));\n    }\n\n    originalRequest._retry = true;\n    isRefreshing = true;\n\n    try {\n      const response = await axios.post(`${baseURL}/auth/refresh`, { refreshToken });\n      const newAccessToken = response.data?.accessToken;\n      const newRefreshToken = response.data?.refreshToken || refreshToken;\n\n      setTokens(newAccessToken, newRefreshToken);\n      processQueue(null, newAccessToken);\n\n      originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n      return apiClient(originalRequest);\n    } catch (refreshError) {\n      processQueue(refreshError, null);\n      clearTokens();\n      if (typeof window !== \"undefined\") {\n        localStorage.removeItem(\"user\");\n      }\n      return Promise.reject(refreshError);\n    } finally {\n      isRefreshing = false;\n    }\n  },\n);\n\nexport default apiClient;\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAC5C;;AAEA,MAAM,UAAU,iEAAwC;AAExD,MAAM,YAAY,gJAAK,CAAC,MAAM,CAAC;IAC7B;IACA,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,MAAM,WAAW,IAAO,sCAAgC,0BAAgC;AACxF,MAAM,kBAAkB,IACtB,sCAAgC,0BAAuC;AAEzE,MAAM,YAAY,CAAC,aAAa;IAC9B,wCAAmC;;;AAGrC;AAEA,MAAM,cAAc;IAClB,wCAAmC;;;AAGrC;AAEA,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ;IACd;;IAGA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,IAAI,eAAe;AACnB,IAAI,kBAAkB,EAAE;AAExB,MAAM,eAAe,CAAC,OAAO,QAAQ,IAAI;IACvC,gBAAgB,OAAO,CAAC,CAAC;QACvB,IAAI,OAAO;YACT,QAAQ,MAAM,CAAC;QACjB,OAAO;YACL,QAAQ,OAAO,CAAC;QAClB;IACF;IACA,kBAAkB,EAAE;AACtB;AAEA,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,iBAAiB,QAAQ;QAC7D,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,MAAM,eAAe;IACrB,wCAAmB;QACjB;QACA,OAAO,QAAQ,MAAM,CAAC;IACxB;;;AAoCF;uCAGa"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/department.js"],"sourcesContent":["import apiClient from \"./apiClient\";\n\nconst uniqueById = (items) => {\n  const map = new Map();\n  items.forEach((item) => {\n    if (item?.id) map.set(item.id, item);\n  });\n  return Array.from(map.values());\n};\n\nconst fromActivitiesFallback = async () => {\n  const response = await apiClient.get(\"/activities\");\n  const activities = Array.isArray(response.data) ? response.data : [];\n  const departments = activities\n    .map((activity) => activity.ownerDepartment)\n    .filter((department) => department?.id);\n\n  return uniqueById(departments);\n};\n\nconst isAuthzError = (error) =>\n  [401, 403].includes(error?.response?.status);\n\nexport const getAllDepartments = async (params = {}) => {\n  try {\n    const response = await apiClient.get(\"/departments\", { params });\n    return Array.isArray(response.data) ? response.data : [];\n  } catch (error) {\n    if (isAuthzError(error)) {\n      return fromActivitiesFallback();\n    }\n    throw error;\n  }\n};\n\nexport const getDepartmentById = async (id) => {\n  const response = await apiClient.get(`/departments/${id}`);\n  return response.data;\n};\n\nexport const createDepartment = async (payload) => {\n  const response = await apiClient.post(\"/departments\", payload);\n  return response.data;\n};\n\nexport const updateDepartment = async (id, payload) => {\n  const response = await apiClient.patch(`/departments/${id}`, payload);\n  return response.data;\n};\n\nexport const deleteDepartment = async (id) => {\n  const response = await apiClient.delete(`/departments/${id}`);\n  return response.data;\n};\n\nexport const getAllFaculties = async () => {\n  const response = await apiClient.get(\"/departments/faculties\");\n  return Array.isArray(response.data) ? response.data : [];\n};\n\nexport const getMajorsByDepartment = async (departmentId) => {\n  if (!departmentId) return [];\n  try {\n    const response = await apiClient.get(`/departments/${departmentId}/majors`);\n    return Array.isArray(response.data) ? response.data : [];\n  } catch (error) {\n    if (isAuthzError(error)) {\n      const response = await apiClient.get(`/activities/departments/${departmentId}/majors`);\n      return Array.isArray(response.data) ? response.data : [];\n    }\n    throw error;\n  }\n};\n\nexport const createMajor = async (departmentId, payload) => {\n  const response = await apiClient.post(`/departments/${departmentId}/majors`, payload);\n  return response.data;\n};\n\nexport const updateMajor = async (departmentId, majorId, payload) => {\n  const response = await apiClient.patch(\n    `/departments/${departmentId}/majors/${majorId}`,\n    payload,\n  );\n  return response.data;\n};\n\nexport const deleteMajor = async (departmentId, majorId) => {\n  const response = await apiClient.delete(`/departments/${departmentId}/majors/${majorId}`);\n  return response.data;\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/app/admin/department/page.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  Button,\n  Card,\n  Form,\n  Input,\n  Modal,\n  Popconfirm,\n  Select,\n  Space,\n  Spin,\n  Table,\n  message,\n} from \"antd\";\nimport { BookOpen, Edit, Plus, Search, Trash2 } from \"lucide-react\";\nimport {\n  createDepartment,\n  createMajor,\n  deleteDepartment,\n  deleteMajor,\n  getAllDepartments,\n  getAllFaculties,\n  getMajorsByDepartment,\n  updateDepartment,\n  updateMajor,\n} from \"@/services/department\";\n\nexport default function DepartmentPage() {\n  const router = useRouter();\n  const [departmentForm] = Form.useForm();\n  const [majorForm] = Form.useForm();\n\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const [departments, setDepartments] = useState([]);\n  const [faculties, setFaculties] = useState([]);\n  const [search, setSearch] = useState(\"\");\n\n  const [editingItem, setEditingItem] = useState(null);\n  const [isDepartmentModalOpen, setIsDepartmentModalOpen] = useState(false);\n\n  const [sessionUser, setSessionUser] = useState(null);\n  const [accessDenied, setAccessDenied] = useState(false);\n\n  const [selectedDepartment, setSelectedDepartment] = useState(null);\n  const [majors, setMajors] = useState([]);\n  const [majorLoading, setMajorLoading] = useState(false);\n  const [majorSaving, setMajorSaving] = useState(false);\n  const [majorEditingItem, setMajorEditingItem] = useState(null);\n  const [isMajorModalOpen, setIsMajorModalOpen] = useState(false);\n  const [isMajorFormModalOpen, setIsMajorFormModalOpen] = useState(false);\n\n  const isFacultyAdmin = sessionUser?.role === \"FACULTY_ADMIN\";\n\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const [departmentData, facultyData] = await Promise.all([\n        getAllDepartments(),\n        getAllFaculties(),\n      ]);\n      setDepartments(Array.isArray(departmentData) ? departmentData : []);\n      setFaculties(Array.isArray(facultyData) ? facultyData : []);\n    } catch (error) {\n      message.error(\"ไม่สามารถโหลดข้อมูลภาควิชาได้\");\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadMajors = async (departmentId) => {\n    setMajorLoading(true);\n    try {\n      const majorData = await getMajorsByDepartment(departmentId);\n      setMajors(Array.isArray(majorData) ? majorData : []);\n    } catch (error) {\n      message.error(\"ไม่สามารถโหลดข้อมูลสาขาวิชาได้\");\n      console.error(error);\n    } finally {\n      setMajorLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    const userStr = localStorage.getItem(\"user\");\n    const user = userStr ? JSON.parse(userStr) : null;\n    setSessionUser(user);\n\n    if (![\"FACULTY_ADMIN\", \"SUPER_ADMIN\"].includes(user?.role)) {\n      setAccessDenied(true);\n      message.error(\"คุณไม่มีสิทธิ์เข้าถึงเมนูภาควิชา\");\n      router.push(\"/admin/home\");\n      return;\n    }\n\n    loadData();\n  }, [router]);\n\n  const filteredDepartments = useMemo(() => {\n    if (!search) return departments;\n    const q = search.toLowerCase();\n    return departments.filter(\n      (item) =>\n        String(item.code || \"\").toLowerCase().includes(q) ||\n        String(item.name || \"\").toLowerCase().includes(q) ||\n        String(item.faculty?.name || \"\").toLowerCase().includes(q),\n    );\n  }, [departments, search]);\n\n  const openCreateDepartmentModal = () => {\n    setEditingItem(null);\n    departmentForm.resetFields();\n    departmentForm.setFieldsValue({\n      facultyId: isFacultyAdmin ? sessionUser?.facultyId : undefined,\n    });\n    setIsDepartmentModalOpen(true);\n  };\n\n  const openEditDepartmentModal = (item) => {\n    setEditingItem(item);\n    departmentForm.setFieldsValue({\n      code: item.code,\n      name: item.name,\n      facultyId: item.facultyId,\n    });\n    setIsDepartmentModalOpen(true);\n  };\n\n  const handleDeleteDepartment = async (item) => {\n    try {\n      await deleteDepartment(item.id);\n      message.success(\"ลบภาควิชาสำเร็จ\");\n      await loadData();\n    } catch (error) {\n      const text = error?.response?.data?.message || \"ไม่สามารถลบภาควิชาได้\";\n      message.error(text);\n    }\n  };\n\n  const handleSubmitDepartment = async (values) => {\n    setSaving(true);\n    try {\n      const payload = {\n        code: values.code,\n        name: values.name,\n        facultyId: values.facultyId,\n      };\n\n      if (editingItem) {\n        await updateDepartment(editingItem.id, payload);\n        message.success(\"แก้ไขภาควิชาสำเร็จ\");\n      } else {\n        await createDepartment(payload);\n        message.success(\"เพิ่มภาควิชาสำเร็จ\");\n      }\n\n      setIsDepartmentModalOpen(false);\n      departmentForm.resetFields();\n      setEditingItem(null);\n      await loadData();\n    } catch (error) {\n      const text = error?.response?.data?.message || \"ไม่สามารถบันทึกภาควิชาได้\";\n      message.error(text);\n      console.error(error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const openMajorManagement = async (department) => {\n    setSelectedDepartment(department);\n    setMajorEditingItem(null);\n    majorForm.resetFields();\n    setIsMajorModalOpen(true);\n    await loadMajors(department.id);\n  };\n\n  const openCreateMajorModal = () => {\n    setMajorEditingItem(null);\n    majorForm.resetFields();\n    setIsMajorFormModalOpen(true);\n  };\n\n  const openEditMajorModal = (major) => {\n    setMajorEditingItem(major);\n    majorForm.setFieldsValue({\n      code: major.code,\n      name: major.name,\n    });\n    setIsMajorFormModalOpen(true);\n  };\n\n  const handleSubmitMajor = async (values) => {\n    if (!selectedDepartment) return;\n    setMajorSaving(true);\n    try {\n      const payload = {\n        code: values.code,\n        name: values.name,\n      };\n\n      if (majorEditingItem) {\n        await updateMajor(selectedDepartment.id, majorEditingItem.id, payload);\n        message.success(\"แก้ไขสาขาวิชาสำเร็จ\");\n      } else {\n        await createMajor(selectedDepartment.id, payload);\n        message.success(\"เพิ่มสาขาวิชาสำเร็จ\");\n      }\n\n      setIsMajorFormModalOpen(false);\n      majorForm.resetFields();\n      setMajorEditingItem(null);\n      await loadMajors(selectedDepartment.id);\n    } catch (error) {\n      const text = error?.response?.data?.message || \"ไม่สามารถบันทึกสาขาวิชาได้\";\n      message.error(text);\n      console.error(error);\n    } finally {\n      setMajorSaving(false);\n    }\n  };\n\n  const handleDeleteMajor = async (major) => {\n    if (!selectedDepartment) return;\n    try {\n      await deleteMajor(selectedDepartment.id, major.id);\n      message.success(\"ลบสาขาวิชาสำเร็จ\");\n      await loadMajors(selectedDepartment.id);\n    } catch (error) {\n      const text = error?.response?.data?.message || \"ไม่สามารถลบสาขาวิชาได้\";\n      message.error(text);\n    }\n  };\n\n  const departmentColumns = [\n    {\n      title: \"ลำดับ\",\n      width: 80,\n      render: (_, __, index) => index + 1,\n    },\n    {\n      title: \"ตัวย่อภาควิชา\",\n      dataIndex: \"code\",\n      width: 180,\n    },\n    {\n      title: \"ชื่อภาควิชา\",\n      dataIndex: \"name\",\n    },\n    {\n      title: \"คณะ\",\n      width: 260,\n      render: (_, row) => row.faculty?.name || \"-\",\n    },\n    {\n      title: \"จัดการ\",\n      width: 220,\n      render: (_, row) => (\n        <Space>\n          <Button\n            type=\"text\"\n            icon={<BookOpen size={18} />}\n            onClick={() => openMajorManagement(row)}\n            title=\"จัดการสาขาวิชา\"\n          />\n          <Button\n            type=\"text\"\n            icon={<Edit size={18} />}\n            onClick={() => openEditDepartmentModal(row)}\n            title=\"แก้ไข\"\n          />\n          <Popconfirm\n            title=\"ยืนยันการลบภาควิชา\"\n            description=\"ต้องการลบภาควิชานี้หรือไม่\"\n            onConfirm={() => handleDeleteDepartment(row)}\n            okText=\"ลบ\"\n            cancelText=\"ยกเลิก\"\n          >\n            <Button danger type=\"text\" icon={<Trash2 size={18} />} title=\"ลบ\" />\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  const majorColumns = [\n    {\n      title: \"ลำดับ\",\n      width: 80,\n      render: (_, __, index) => index + 1,\n    },\n    {\n      title: \"ตัวย่อสาขา\",\n      dataIndex: \"code\",\n      width: 180,\n    },\n    {\n      title: \"ชื่อสาขาวิชา\",\n      dataIndex: \"name\",\n    },\n    {\n      title: \"จัดการ\",\n      width: 140,\n      render: (_, row) => (\n        <Space>\n          <Button\n            type=\"text\"\n            icon={<Edit size={18} />}\n            onClick={() => openEditMajorModal(row)}\n            title=\"แก้ไข\"\n          />\n          <Popconfirm\n            title=\"ยืนยันการลบสาขาวิชา\"\n            description=\"ต้องการลบสาขาวิชานี้หรือไม่\"\n            onConfirm={() => handleDeleteMajor(row)}\n            okText=\"ลบ\"\n            cancelText=\"ยกเลิก\"\n          >\n            <Button danger type=\"text\" icon={<Trash2 size={18} />} title=\"ลบ\" />\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  if (accessDenied) return null;\n\n  return (\n    <Spin spinning={loading}>\n      <div>\n        <Card className=\"mb-4\">\n          <div className=\"grid grid-cols-12 gap-3\">\n            <div className=\"col-span-12 md:col-span-8\">\n              <Input\n                value={search}\n                onChange={(event) => setSearch(event.target.value)}\n                prefix={<Search size={16} />}\n                placeholder=\"ค้นหาจากชื่อภาควิชา/ตัวย่อ/คณะ\"\n              />\n            </div>\n            <div className=\"col-span-12 md:col-span-4 flex justify-end\">\n              <Button\n                type=\"primary\"\n                icon={<Plus size={16} />}\n                onClick={openCreateDepartmentModal}\n                style={{ backgroundColor: \"#0A894C\", borderColor: \"#0A894C\" }}\n              >\n                เพิ่มภาควิชา\n              </Button>\n            </div>\n          </div>\n        </Card>\n\n        <Card>\n          <Table\n            rowKey=\"id\"\n            columns={departmentColumns}\n            dataSource={filteredDepartments}\n            pagination={{ pageSize: 10, showSizeChanger: true }}\n            scroll={{ x: 960 }}\n          />\n        </Card>\n\n        <Modal\n          title={editingItem ? \"แก้ไขภาควิชา\" : \"เพิ่มภาควิชา\"}\n          open={isDepartmentModalOpen}\n          onCancel={() => {\n            setIsDepartmentModalOpen(false);\n            setEditingItem(null);\n            departmentForm.resetFields();\n          }}\n          onOk={() => departmentForm.submit()}\n          confirmLoading={saving}\n          okText={editingItem ? \"บันทึก\" : \"สร้าง\"}\n          cancelText=\"ยกเลิก\"\n        >\n          <Form form={departmentForm} layout=\"vertical\" onFinish={handleSubmitDepartment}>\n            <Form.Item\n              label=\"ตัวย่อภาควิชา\"\n              name=\"code\"\n              rules={[{ required: true, message: \"กรุณากรอกตัวย่อภาควิชา\" }]}\n            >\n              <Input placeholder=\"เช่น EDTECH\" />\n            </Form.Item>\n            <Form.Item\n              label=\"ชื่อภาควิชา\"\n              name=\"name\"\n              rules={[{ required: true, message: \"กรุณากรอกชื่อภาควิชา\" }]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              label=\"คณะ\"\n              name=\"facultyId\"\n              rules={[{ required: true, message: \"กรุณาเลือกคณะ\" }]}\n            >\n              <Select\n                disabled={isFacultyAdmin}\n                options={faculties.map((item) => ({\n                  label: item.name,\n                  value: item.id,\n                }))}\n              />\n            </Form.Item>\n          </Form>\n        </Modal>\n\n        <Modal\n          title={`จัดการสาขาวิชา: ${selectedDepartment?.name || \"-\"}`}\n          open={isMajorModalOpen}\n          onCancel={() => {\n            setIsMajorModalOpen(false);\n            setSelectedDepartment(null);\n            setMajors([]);\n          }}\n          footer={null}\n          width={840}\n        >\n          <div className=\"mb-4 flex justify-end\">\n            <Button\n              type=\"primary\"\n              icon={<Plus size={16} />}\n              onClick={openCreateMajorModal}\n              style={{ backgroundColor: \"#0A894C\", borderColor: \"#0A894C\" }}\n            >\n              เพิ่มสาขาวิชา\n            </Button>\n          </div>\n          <Spin spinning={majorLoading}>\n            <Table\n              rowKey=\"id\"\n              columns={majorColumns}\n              dataSource={majors}\n              pagination={{ pageSize: 8, showSizeChanger: false }}\n            />\n          </Spin>\n        </Modal>\n\n        <Modal\n          title={majorEditingItem ? \"แก้ไขสาขาวิชา\" : \"เพิ่มสาขาวิชา\"}\n          open={isMajorFormModalOpen}\n          onCancel={() => {\n            setIsMajorFormModalOpen(false);\n            setMajorEditingItem(null);\n            majorForm.resetFields();\n          }}\n          onOk={() => majorForm.submit()}\n          confirmLoading={majorSaving}\n          okText={majorEditingItem ? \"บันทึก\" : \"สร้าง\"}\n          cancelText=\"ยกเลิก\"\n        >\n          <Form form={majorForm} layout=\"vertical\" onFinish={handleSubmitMajor}>\n            <Form.Item\n              label=\"ตัวย่อสาขาวิชา\"\n              name=\"code\"\n              rules={[{ required: true, message: \"กรุณากรอกตัวย่อสาขาวิชา\" }]}\n            >\n              <Input placeholder=\"เช่น TCT\" />\n            </Form.Item>\n            <Form.Item\n              label=\"ชื่อสาขาวิชา\"\n              name=\"name\"\n              rules={[{ required: true, message: \"กรุณากรอกชื่อสาขาวิชา\" }]}\n            >\n              <Input />\n            </Form.Item>\n          </Form>\n        </Modal>\n      </div>\n    </Spin>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}