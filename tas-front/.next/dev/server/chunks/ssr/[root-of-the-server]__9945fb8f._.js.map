{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/apiClient.js"],"sourcesContent":["// create axios instance with default config\nimport axios from \"axios\";\n\nconst baseURL = process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:4556/api\";\n\nconst apiClient = axios.create({\n  baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nconst getToken = () => (typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null);\nconst getRefreshToken = () =>\n  typeof window !== \"undefined\" ? localStorage.getItem(\"refreshToken\") : null;\n\nconst setTokens = (accessToken, refreshToken) => {\n  if (typeof window === \"undefined\") return;\n  if (accessToken) localStorage.setItem(\"token\", accessToken);\n  if (refreshToken) localStorage.setItem(\"refreshToken\", refreshToken);\n};\n\nconst clearTokens = () => {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"refreshToken\");\n};\n\napiClient.interceptors.request.use(\n  (config) => {\n    const token = getToken();\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error),\n);\n\nlet isRefreshing = false;\nlet pendingRequests = [];\n\nconst processQueue = (error, token = null) => {\n  pendingRequests.forEach((promise) => {\n    if (error) {\n      promise.reject(error);\n    } else {\n      promise.resolve(token);\n    }\n  });\n  pendingRequests = [];\n};\n\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status !== 401 || originalRequest?._retry) {\n      return Promise.reject(error);\n    }\n\n    const refreshToken = getRefreshToken();\n    if (!refreshToken) {\n      clearTokens();\n      return Promise.reject(error);\n    }\n\n    if (isRefreshing) {\n      return new Promise((resolve, reject) => {\n        pendingRequests.push({ resolve, reject });\n      })\n        .then((token) => {\n          originalRequest.headers.Authorization = `Bearer ${token}`;\n          return apiClient(originalRequest);\n        })\n        .catch((refreshError) => Promise.reject(refreshError));\n    }\n\n    originalRequest._retry = true;\n    isRefreshing = true;\n\n    try {\n      const response = await axios.post(`${baseURL}/auth/refresh`, { refreshToken });\n      const newAccessToken = response.data?.accessToken;\n      const newRefreshToken = response.data?.refreshToken || refreshToken;\n\n      setTokens(newAccessToken, newRefreshToken);\n      processQueue(null, newAccessToken);\n\n      originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n      return apiClient(originalRequest);\n    } catch (refreshError) {\n      processQueue(refreshError, null);\n      clearTokens();\n      if (typeof window !== \"undefined\") {\n        localStorage.removeItem(\"user\");\n      }\n      return Promise.reject(refreshError);\n    } finally {\n      isRefreshing = false;\n    }\n  },\n);\n\nexport default apiClient;\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAC5C;;AAEA,MAAM,UAAU,iEAAwC;AAExD,MAAM,YAAY,gJAAK,CAAC,MAAM,CAAC;IAC7B;IACA,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,MAAM,WAAW,IAAO,sCAAgC,0BAAgC;AACxF,MAAM,kBAAkB,IACtB,sCAAgC,0BAAuC;AAEzE,MAAM,YAAY,CAAC,aAAa;IAC9B,wCAAmC;;;AAGrC;AAEA,MAAM,cAAc;IAClB,wCAAmC;;;AAGrC;AAEA,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ;IACd;;IAGA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,IAAI,eAAe;AACnB,IAAI,kBAAkB,EAAE;AAExB,MAAM,eAAe,CAAC,OAAO,QAAQ,IAAI;IACvC,gBAAgB,OAAO,CAAC,CAAC;QACvB,IAAI,OAAO;YACT,QAAQ,MAAM,CAAC;QACjB,OAAO;YACL,QAAQ,OAAO,CAAC;QAClB;IACF;IACA,kBAAkB,EAAE;AACtB;AAEA,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,iBAAiB,QAAQ;QAC7D,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,MAAM,eAAe;IACrB,wCAAmB;QACjB;QACA,OAAO,QAAQ,MAAM,CAAC;IACxB;;;AAoCF;uCAGa"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/compat.js"],"sourcesContent":["const ROLE_TO_USER_TYPE = {\n  STUDENT: \"student\",\n  TEACHER: \"teacher\",\n  DEPT_STAFF: \"admin\",\n  FACULTY_ADMIN: \"admin\",\n  SUPER_ADMIN: \"admin\",\n};\n\nconst ACTIVITY_STATUS_TO_API = {\n  planned: \"OPEN_REGISTRATION\",\n  inprogress: \"IN_PROGRESS\",\n  completed: \"CLOSED\",\n  cancelled: \"CANCELLED\",\n};\n\nconst LEGACY_ATTENDANCE_ACTION = {\n  APPLIED: \"request-revision\",\n  APPROVED: \"approve\",\n  REJECTED: \"request-revision\",\n  REVISION_REQUIRED: \"request-revision\",\n  CANCELLED: \"request-revision\",\n  NO_SHOW: \"request-revision\",\n  SUBMITTED: \"request-revision\",\n  COMPLETED: \"approve\",\n  joined: \"request-revision\",\n  accepted: \"approve\",\n  approved: \"approve\",\n  completed: \"approve\",\n  rejected: \"request-revision\",\n  uncompleted: \"request-revision\",\n  Inprogress: \"request-revision\",\n};\n\nfunction safeString(value) {\n  return value === null || value === undefined ? \"\" : String(value);\n}\n\nexport function splitFullName(fullname) {\n  const clean = safeString(fullname).trim();\n  if (!clean) {\n    return { firstName: \"User\", lastName: \"\" };\n  }\n  const parts = clean.split(/\\s+/);\n  const firstName = parts.shift() || \"User\";\n  const lastName = parts.join(\" \");\n  return { firstName, lastName };\n}\n\nexport function roleToUserType(role) {\n  return ROLE_TO_USER_TYPE[role] || \"student\";\n}\n\nexport function mapActivityStatusFromApi(status) {\n  return status || \"OPEN_REGISTRATION\";\n}\n\nexport function mapActivityStatusToApi(status) {\n  return ACTIVITY_STATUS_TO_API[status] || status || undefined;\n}\n\nexport function mapApplicationStatusFromApi(status) {\n  return status || \"APPLIED\";\n}\n\nexport function mapLegacyAttendanceAction(status) {\n  return LEGACY_ATTENDANCE_ACTION[status] || \"request-revision\";\n}\n\nexport function mapEvidenceTypeToTypeActivity(requiredEvidenceType) {\n  const mapping = {\n    PHOTO: { id: \"PHOTO\", name: \"ใช้รูปภาพ\" },\n    PDF: { id: \"PDF\", name: \"ใช้ PDF\" },\n    BOTH: { id: \"BOTH\", name: \"ทั่วไป\" },\n  };\n  return mapping[requiredEvidenceType] || mapping.BOTH;\n}\n\nexport function normalizeUser(user) {\n  if (!user) return null;\n\n  const fullNameFromApi = [user.firstName, user.lastName].filter(Boolean).join(\" \").trim();\n  const fullname = user.fullname || fullNameFromApi || user.username || user.email || \"Unknown\";\n\n  const faculty =\n    user.faculty ||\n    user.studentProfile?.faculty ||\n    user.teacherProfile?.faculty ||\n    user.staffProfile?.faculty ||\n    null;\n\n  const department =\n    user.department ||\n    user.studentProfile?.department ||\n    user.teacherProfile?.department ||\n    user.staffProfile?.department ||\n    null;\n\n  const major = user.major || user.studentProfile?.major || null;\n\n  const studentCode = user.studentCode || user.studentProfile?.studentCode || null;\n  const classYear = user.classYear || user.studentProfile?.classYear || null;\n  const academicYear = user.academicYear || user.studentProfile?.academicYear || null;\n\n  return {\n    id: user.id,\n    role: user.role,\n    userType: roleToUserType(user.role),\n    username: user.username || null,\n    email: user.email || null,\n    fullname,\n    name: fullname,\n    firstName: user.firstName || splitFullName(fullname).firstName,\n    lastName: user.lastName || splitFullName(fullname).lastName,\n    phone: user.phone || null,\n    status: user.status || \"ACTIVE\",\n    studentId: studentCode,\n    studentCode,\n    classYear,\n    academicYear,\n    level: classYear,\n    facultyId:\n      user.facultyId ||\n      user.studentProfile?.facultyId ||\n      user.teacherProfile?.facultyId ||\n      user.staffProfile?.facultyId ||\n      faculty?.id ||\n      null,\n    faculty,\n    departmentId:\n      user.departmentId ||\n      user.studentProfile?.departmentId ||\n      user.teacherProfile?.departmentId ||\n      user.staffProfile?.departmentId ||\n      department?.id ||\n      null,\n    department,\n    majorId: user.majorId || user.studentProfile?.majorId || major?.id || null,\n    major,\n  };\n}\n\nexport function normalizeAttendance(application, activity = null) {\n  const normalizedUser = normalizeUser(application?.student || application?.user || null);\n\n  return {\n    id: application.id,\n    activityId: application.activityId || activity?.id || null,\n    userId: application.studentUserId || normalizedUser?.id || null,\n    status: mapApplicationStatusFromApi(application.status),\n    reason: application.remark || null,\n    createdAt: application.submittedAt || application.createdAt || null,\n    updatedAt: application.updatedAt || null,\n    user: normalizedUser,\n    activity,\n    attendanceId: application.id,\n  };\n}\n\nexport function normalizeActivity(activity) {\n  const applications = Array.isArray(activity?.applications) ? activity.applications : [];\n  const attendances = applications.map((item) => normalizeAttendance(item));\n\n  const peopleCount = applications.filter((item) => [\"APPLIED\", \"APPROVED\"].includes(item.status)).length;\n\n  const typeActivity = mapEvidenceTypeToTypeActivity(activity.requiredEvidenceType);\n\n  return {\n    id: activity.id,\n    name: activity.title,\n    title: activity.title,\n    description: activity.note || \"\",\n    note: activity.note || \"\",\n    location: activity.location,\n    address: activity.location,\n    hour: activity.hours,\n    hours: activity.hours,\n    activityHours: activity.hours,\n    maxPeopleCount: activity.capacity,\n    maxStudents: activity.capacity,\n    peopleCount,\n    startDate: activity.startAt,\n    endDate: activity.endAt,\n    date: activity.applyCloseAt,\n    applyOpen: activity.applyOpenAt,\n    applyClose: activity.applyCloseAt,\n    status: mapActivityStatusFromApi(activity.status),\n    departmentId: activity.ownerDepartmentId || null,\n    facultyId: activity.ownerFacultyId || null,\n    department: activity.ownerDepartment || null,\n    faculty: activity.ownerFaculty || null,\n    typeActivity,\n    typeActivityId: typeActivity.id,\n    requiredEvidenceType: activity.requiredEvidenceType,\n    ownerScope: activity.ownerScope,\n    attendances,\n    applications,\n    createdBy: activity.createdBy || null,\n    majorJoins: [],\n    fileActivities: [],\n    remarks: activity.note || \"\",\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/activity.js"],"sourcesContent":["import apiClient from \"./apiClient\";\nimport {\n  mapActivityStatusToApi,\n  normalizeActivity,\n} from \"./compat\";\n\nconst isFormData = (value) =>\n  typeof FormData !== \"undefined\" && value instanceof FormData;\n\nconst toIsoString = (value, fallback = null) => {\n  if (!value && fallback) return fallback;\n  if (!value) return null;\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) return fallback;\n  return date.toISOString();\n};\n\nconst formDataToObject = (formData) => {\n  const data = {};\n  formData.forEach((value, key) => {\n    if (data[key] !== undefined) {\n      data[key] = Array.isArray(data[key])\n        ? [...data[key], value]\n        : [data[key], value];\n      return;\n    }\n    data[key] = value;\n  });\n  return data;\n};\n\nconst compact = (obj) =>\n  Object.fromEntries(\n    Object.entries(obj).filter(([, value]) => value !== undefined && value !== null),\n  );\n\nconst normalizeIncomingPayload = (rawData) => {\n  const data = isFormData(rawData) ? formDataToObject(rawData) : { ...rawData };\n\n  const title = data.title || data.name || data.activityName;\n  const startAt =\n    toIsoString(data.startAt || data.startDate || data.date || data.activityDate) ||\n    toIsoString(new Date());\n  const endAt =\n    toIsoString(data.endAt || data.endDate || data.startDate || data.date) ||\n    toIsoString(new Date(Date.now() + 60 * 60 * 1000));\n\n  const applyOpenAt =\n    toIsoString(data.applyOpenAt || data.applyOpenDate || data.applyStart) ||\n    toIsoString(new Date());\n\n  const applyCloseAt =\n    toIsoString(data.applyCloseAt || data.activityDeadline || data.date || data.startDate) ||\n    startAt;\n\n  const ownerDepartmentId =\n    data.ownerDepartmentId || data.departmentId || data.department?.id || null;\n\n  return compact({\n    title,\n    startAt,\n    endAt,\n    location: data.location || data.address,\n    hours: Number(data.hours || data.hour || data.activityHours || 1),\n    requiredEvidenceType:\n      data.requiredEvidenceType || data.evidenceType || (data.pdfDocument ? \"PDF\" : \"BOTH\"),\n    capacity: Number(data.capacity || data.maxPeopleCount || data.maxStudents || 1),\n    applyOpenAt,\n    applyCloseAt,\n    note: data.note || data.description || data.remarks,\n    ownerScope: data.ownerScope || (ownerDepartmentId ? \"DEPARTMENT\" : \"FACULTY\"),\n    ownerFacultyId: data.ownerFacultyId || data.facultyId,\n    ownerDepartmentId,\n    status: mapActivityStatusToApi(data.status),\n  });\n};\n\nconst mapListQuery = (params = {}) => {\n  const mapped = {\n    scope: params.scope,\n    department: params.department || params.departmentId,\n    status: mapActivityStatusToApi(params.status),\n    dateFrom: params.dateFrom || params.from,\n    dateTo: params.dateTo || params.to,\n  };\n\n  return compact(mapped);\n};\n\nconst fetchActivityDetail = async (id) => {\n  const response = await apiClient.get(`/activities/${id}`);\n  return response.data;\n};\n\nconst enrichWithDetails = async (activities) => {\n  const detailed = await Promise.all(\n    activities.map(async (item) => {\n      try {\n        return await fetchActivityDetail(item.id);\n      } catch (_error) {\n        return item;\n      }\n    }),\n  );\n\n  return detailed;\n};\n\n// Get all activities\nexport const getAllActivities = async (params = {}) => {\n  const response = await apiClient.get(\"/activities\", {\n    params: mapListQuery(params),\n  });\n\n  const list = Array.isArray(response.data) ? response.data : [];\n  const detailed = params.includeDetails === false ? list : await enrichWithDetails(list);\n\n  return detailed.map(normalizeActivity);\n};\n\n// Get activities report (compat)\nexport const getActivitiesReport = async (params = {}) => {\n  return getAllActivities(params);\n};\n\n// Get activity by ID\nexport const getActivityById = async (id) => {\n  const response = await apiClient.get(`/activities/${id}`);\n  return normalizeActivity(response.data);\n};\n\n// Create new activity\nexport const createActivity = async (data) => {\n  const payload = normalizeIncomingPayload(data);\n  const response = await apiClient.post(\"/activities\", payload);\n  return normalizeActivity(response.data);\n};\n\n// Update activity\nexport const updateActivity = async (id, data) => {\n  const payload = normalizeIncomingPayload(data);\n  const response = await apiClient.patch(`/activities/${id}`, payload);\n  return normalizeActivity(response.data);\n};\n\n// Delete activity\nexport const deleteActivity = async (id) => {\n  const response = await apiClient.delete(`/activities/${id}`);\n  return response.data;\n};\n\n// Get activities by responsible user (compat)\nexport const getActivitiesByResponsible = async (userId) => {\n  const activities = await getAllActivities({ includeDetails: false });\n  return activities.filter((activity) => activity.createdBy?.id === userId);\n};\n\n// Get activities with query parameters (compat)\nexport const getActivitiesWithQuery = async (queryParams = {}) => {\n  const activities = await getAllActivities({\n    departmentId: queryParams.departmentId,\n    status: queryParams.status,\n  });\n\n  return {\n    activities,\n    total: activities.length,\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 502, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/user.js"],"sourcesContent":["import apiClient from \"./apiClient\";\nimport { normalizeUser, roleToUserType } from \"./compat\";\nimport { getAllActivities } from \"./activity\";\n\nconst getCurrentUser = () => {\n  if (typeof window === \"undefined\") return null;\n  try {\n    return JSON.parse(localStorage.getItem(\"user\") || \"null\");\n  } catch (_error) {\n    return null;\n  }\n};\n\nconst normalizeUserList = (items) =>\n  items.map((item) => {\n    const user = normalizeUser(item);\n    return {\n      ...user,\n      userType: roleToUserType(item.role),\n      department: user.department,\n      major: user.major,\n      departmentId: user.departmentId,\n      majorId: user.majorId,\n      level: user.level,\n      studentId: user.studentId,\n      role: item.role,\n      studentProfile: item.studentProfile || null,\n      teacherProfile: item.teacherProfile || null,\n      staffProfile: item.staffProfile || null,\n    };\n  });\n\nconst buildCreatePayload = (userData = {}) => {\n  const currentUser = getCurrentUser();\n  const role = userData.role || \"STUDENT\";\n\n  const payload = {\n    username:\n      userData.username ||\n      userData.email ||\n      userData.studentProfile?.studentCode ||\n      `user_${Date.now()}`,\n    email: userData.email || undefined,\n    password: userData.password || \"ChangeMe123!\",\n    firstName: userData.firstName,\n    lastName: userData.lastName || \"\",\n    phone: userData.phone || undefined,\n    role,\n    status: userData.status || \"ACTIVE\",\n  };\n\n  const fallbackFacultyId = currentUser?.facultyId || userData.facultyId;\n\n  if (role === \"STUDENT\") {\n    payload.studentProfile = {\n      studentCode: userData.studentProfile?.studentCode || userData.studentCode,\n      facultyId:\n        userData.studentProfile?.facultyId ||\n        userData.facultyId ||\n        fallbackFacultyId,\n      departmentId: userData.studentProfile?.departmentId || userData.departmentId,\n      majorId: userData.studentProfile?.majorId || userData.majorId,\n      classYear:\n        Number(userData.studentProfile?.classYear || userData.classYear || userData.level) || 1,\n      academicYear:\n        Number(userData.studentProfile?.academicYear || userData.academicYear) || 2568,\n      registrarVerified: Boolean(userData.studentProfile?.registrarVerified ?? true),\n    };\n  }\n\n  if (role === \"TEACHER\") {\n    payload.teacherProfile = {\n      employeeCode: userData.teacherProfile?.employeeCode || userData.employeeCode || undefined,\n      facultyId:\n        userData.teacherProfile?.facultyId ||\n        userData.facultyId ||\n        fallbackFacultyId,\n      departmentId: userData.teacherProfile?.departmentId || userData.departmentId,\n    };\n  }\n\n  if (role === \"DEPT_STAFF\" || role === \"FACULTY_ADMIN\") {\n    const staffType = role === \"FACULTY_ADMIN\" ? \"FACULTY_ADMIN\" : \"DEPT_STAFF\";\n    payload.staffProfile = {\n      staffType,\n      facultyId:\n        userData.staffProfile?.facultyId ||\n        userData.facultyId ||\n        fallbackFacultyId,\n      departmentId:\n        staffType === \"FACULTY_ADMIN\"\n          ? null\n          : userData.staffProfile?.departmentId || userData.departmentId,\n    };\n  }\n\n  return payload;\n};\n\nconst buildUpdatePayload = (userData = {}) => {\n  const role = userData.role;\n\n  const payload = {\n    username: userData.username,\n    email: userData.email,\n    password: userData.password || undefined,\n    firstName: userData.firstName,\n    lastName: userData.lastName,\n    phone: userData.phone,\n    status: userData.status,\n  };\n\n  if (role === \"STUDENT\") {\n    payload.studentProfile = userData.studentProfile || {\n      studentCode: userData.studentCode,\n      facultyId: userData.facultyId,\n      departmentId: userData.departmentId,\n      majorId: userData.majorId,\n      classYear: userData.classYear || userData.level,\n      academicYear: userData.academicYear,\n      registrarVerified: userData.registrarVerified,\n    };\n  }\n\n  if (role === \"TEACHER\") {\n    payload.teacherProfile = userData.teacherProfile || {\n      employeeCode: userData.employeeCode,\n      facultyId: userData.facultyId,\n      departmentId: userData.departmentId,\n    };\n  }\n\n  if (role === \"DEPT_STAFF\" || role === \"FACULTY_ADMIN\") {\n    const staffType = role === \"FACULTY_ADMIN\" ? \"FACULTY_ADMIN\" : \"DEPT_STAFF\";\n    payload.staffProfile = userData.staffProfile || {\n      staffType,\n      facultyId: userData.facultyId,\n      departmentId: staffType === \"FACULTY_ADMIN\" ? null : userData.departmentId,\n    };\n  }\n\n  return payload;\n};\n\nconst compact = (obj) =>\n  Object.fromEntries(\n    Object.entries(obj).filter(([, value]) => value !== undefined),\n  );\n\nexport const getAllUsers = async (params = {}) => {\n  const response = await apiClient.get(\"/users\", { params });\n  const data = Array.isArray(response.data) ? response.data : [];\n  return normalizeUserList(data);\n};\n\nexport const getUsersByType = async (userType) => {\n  try {\n    const users = await getAllUsers();\n    return users.filter((user) => user.userType === userType);\n  } catch (error) {\n    if (userType !== \"student\") {\n      throw error;\n    }\n\n    const activities = await getAllActivities();\n    const seen = new Map();\n\n    activities.forEach((activity) => {\n      (activity.attendances || []).forEach((attendance) => {\n        const user = attendance.user;\n        if (!user?.id || seen.has(user.id)) return;\n        seen.set(user.id, {\n          ...user,\n          userType: \"student\",\n        });\n      });\n    });\n\n    return Array.from(seen.values());\n  }\n};\n\nexport const getUserById = async (userId) => {\n  const response = await apiClient.get(`/users/${userId}`);\n  return normalizeUser(response.data);\n};\n\nexport const createUser = async (userData) => {\n  const payload = buildCreatePayload(userData);\n  const response = await apiClient.post(\"/users\", payload);\n  return normalizeUser(response.data);\n};\n\nexport const updateUser = async (userId, userData) => {\n  const payload = compact(buildUpdatePayload(userData));\n  if (payload.studentProfile) payload.studentProfile = compact(payload.studentProfile);\n  if (payload.teacherProfile) payload.teacherProfile = compact(payload.teacherProfile);\n  if (payload.staffProfile) payload.staffProfile = compact(payload.staffProfile);\n\n  const response = await apiClient.patch(`/users/${userId}`, payload);\n  return normalizeUser(response.data);\n};\n\nexport const deleteUser = async (userId) => {\n  const response = await apiClient.delete(`/users/${userId}`);\n  return response.data;\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 681, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/app/admin/user/page.js"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Card,\n  Button,\n  Input,\n  message,\n  Table,\n  Popconfirm,\n  Tag,\n  Modal,\n  Form,\n  Select,\n  Tabs,\n  Spin,\n} from \"antd\";\nimport { Plus, Search, Edit, Trash2, Eye, Users } from \"lucide-react\";\nimport {\n  getAllUsers,\n  createUser,\n  updateUser,\n  deleteUser,\n} from \"@/services/user\";\n\nconst { Option } = Select;\n\nexport default function UserPage() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [activeTab, setActiveTab] = useState(\"student\");\n  const [filters, setFilters] = useState({\n    department: null,\n    major: null,\n    level: null,\n  });\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [isViewModalVisible, setIsViewModalVisible] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [viewingUser, setViewingUser] = useState(null);\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [users, setUsers] = useState({\n    student: [],\n    teacher: [],\n    admin: [],\n  });\n\n  // Fetch all users from API\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    setLoading(true);\n    try {\n      const data = await getAllUsers();\n\n      // Group users by userType\n      const groupedUsers = {\n        student: data.filter((user) => user.userType === \"student\"),\n        teacher: data.filter((user) => user.userType === \"teacher\"),\n        admin: data.filter((user) => user.userType === \"admin\"),\n      };\n\n      setUsers(groupedUsers);\n    } catch (error) {\n      message.error(\"ไม่สามารถโหลดข้อมูลผู้ใช้ได้\");\n      console.error(\"Error fetching users:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Get unique departments from all users\n  const departments = [\n    ...new Set(\n      Object.values(users)\n        .flat()\n        .map((user) => user.department?.name)\n        .filter(Boolean)\n    ),\n  ];\n\n  // Get unique majors from students\n  const majors = [\n    ...new Set(users.student.map((user) => user.major?.name).filter(Boolean)),\n  ];\n\n  const levels = [\"1\", \"2\", \"3\", \"4\"];\n\n  // Filter users based on search and filters\n  const getFilteredUsers = () => {\n    let filtered = [...users[activeTab]];\n\n    // Apply search filter\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        (user) =>\n          user.fullname?.toLowerCase().includes(query) ||\n          user.email?.toLowerCase().includes(query) ||\n          user.studentId?.toLowerCase().includes(query)\n      );\n    }\n\n    // Apply department filter\n    if (filters.department) {\n      filtered = filtered.filter(\n        (user) => user.department?.name === filters.department\n      );\n    }\n\n    // Apply major filter (only for students)\n    if (filters.major && activeTab === \"student\") {\n      filtered = filtered.filter((user) => user.major?.name === filters.major);\n    }\n\n    // Apply level filter (only for students)\n    if (filters.level && activeTab === \"student\") {\n      filtered = filtered.filter((user) => user.level === filters.level);\n    }\n\n    return filtered;\n  };\n\n  // Open modal for create\n  const handleCreate = () => {\n    setEditingUser(null);\n    form.resetFields();\n    setIsModalVisible(true);\n  };\n\n  // Open modal for edit\n  const handleEdit = (record) => {\n    setEditingUser(record);\n    form.setFieldsValue({\n      fullname: record.fullname,\n      studentId: record.studentId,\n      email: record.email,\n      phone: record.phone,\n      departmentId: record.departmentId,\n      majorId: record.majorId,\n      level: record.level,\n    });\n    setIsModalVisible(true);\n  };\n\n  // View user details\n  const handleView = (record) => {\n    setViewingUser(record);\n    setIsViewModalVisible(true);\n  };\n\n  // Delete user\n  const handleDelete = async (record) => {\n    try {\n      await deleteUser(record.id);\n      message.success(`ลบผู้ใช้ ${record.fullname} สำเร็จ`);\n      fetchUsers(); // Refresh user list\n    } catch (error) {\n      message.error(\"ไม่สามารถลบผู้ใช้ได้\");\n      console.error(\"Error deleting user:\", error);\n    }\n  };\n\n  // Submit form (create or update)\n  const handleSubmit = async (values) => {\n    setLoading(true);\n    try {\n      if (editingUser) {\n        // Update existing user\n        await updateUser(editingUser.id, values);\n        message.success(\"แก้ไขข้อมูลผู้ใช้สำเร็จ\");\n      } else {\n        // Create new user\n        await createUser({ ...values, userType: activeTab });\n        message.success(\"เพิ่มผู้ใช้สำเร็จ\");\n      }\n      setIsModalVisible(false);\n      form.resetFields();\n      fetchUsers(); // Refresh user list\n    } catch (error) {\n      message.error(\n        editingUser ? \"ไม่สามารถแก้ไขข้อมูลได้\" : \"ไม่สามารถเพิ่มผู้ใช้ได้\"\n      );\n      console.error(\"Error submitting user:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleReset = () => {\n    setSearchQuery(\"\");\n    setFilters({\n      department: null,\n      major: null,\n      level: null,\n    });\n    message.success(\"รีเซ็ตตัวกรองสำเร็จ\");\n  };\n\n  // Define columns based on user type\n  const getColumns = () => {\n    const baseColumns = [\n      {\n        title: \"ลำดับ\",\n        dataIndex: \"index\",\n        key: \"index\",\n        width: 70,\n        align: \"center\",\n        render: (text, record, index) => index + 1,\n      },\n      {\n        title: \"รหัส\",\n        dataIndex: \"studentId\",\n        key: \"userId\",\n        width: 120,\n        render: (text) => text || \"-\",\n      },\n      {\n        title: \"ชื่อ-นามสกุล\",\n        key: \"name\",\n        render: (_, record) => record.fullname,\n      },\n      {\n        title: \"ภาควิชา\",\n        key: \"department\",\n        width: 200,\n        render: (_, record) => record.department?.name || \"-\",\n      },\n    ];\n\n    // Add Major and Level columns only for students\n    if (activeTab === \"student\") {\n      baseColumns.push(\n        {\n          title: \"สาขาวิชา\",\n          key: \"major\",\n          width: 150,\n          align: \"center\",\n          render: (_, record) => (\n            <Tag color=\"#0A894C\" style={{ borderRadius: 8 }}>\n              {record.major?.name || \"-\"}\n            </Tag>\n          ),\n        },\n        {\n          title: \"ชั้นปี\",\n          dataIndex: \"level\",\n          key: \"level\",\n          width: 80,\n          align: \"center\",\n          render: (level) => (level ? `${level}` : \"-\"),\n        }\n      );\n    }\n\n    baseColumns.push({\n      title: \"\",\n      key: \"action\",\n      width: 150,\n      align: \"center\",\n      render: (_, record) => (\n        <div className=\"flex gap-2 justify-center\">\n          <Button\n            type=\"text\"\n            icon={<Eye size={18} />}\n            onClick={() => handleView(record)}\n            style={{ color: \"#0A894C\" }}\n            title=\"View Details\"\n          />\n          <Button\n            type=\"text\"\n            icon={<Edit size={18} />}\n            onClick={() => handleEdit(record)}\n            style={{ color: \"#1890ff\" }}\n            title=\"Edit\"\n          />\n          <Popconfirm\n            title=\"Confirm Delete\"\n            description=\"Are you sure you want to delete this user?\"\n            onConfirm={() => handleDelete(record)}\n            okText=\"Confirm\"\n            cancelText=\"Cancel\"\n            okButtonProps={{\n              style: { backgroundColor: \"#0A894C\", borderColor: \"#0A894C\" },\n            }}\n          >\n            <Button\n              type=\"text\"\n              icon={<Trash2 size={18} />}\n              danger\n              title=\"Delete\"\n            />\n          </Popconfirm>\n        </div>\n      ),\n    });\n\n    return baseColumns;\n  };\n\n  const tabItems = [\n    {\n      key: \"student\",\n      label: (\n        <span className=\"flex items-center gap-2\">\n          <Users size={18} />\n          นักศึกษา ({users.student.length})\n        </span>\n      ),\n    },\n    {\n      key: \"teacher\",\n      label: (\n        <span className=\"flex items-center gap-2\">\n          <Users size={18} />\n          อาจารย์/เจ้าหน้าที่ ภาควิชา ({users.teacher.length})\n        </span>\n      ),\n    },\n    {\n      key: \"admin\",\n      label: (\n        <span className=\"flex items-center gap-2\">\n          <Users size={18} />\n          แอดมิน/เจ้าหน้าที่คณะ ({users.admin.length})\n        </span>\n      ),\n    },\n  ];\n\n  return (\n    <div>\n      {/* Tabs for User Types */}\n      <Tabs\n        activeKey={activeTab}\n        onChange={(key) => {\n          setActiveTab(key);\n          setFilters({ department: null, major: null, level: null });\n          setSearchQuery(\"\");\n        }}\n        items={tabItems}\n        size=\"large\"\n        className=\"custom-user-tabs mb-4\"\n      />\n\n      {/* Search and Filter Bar */}\n      <div\n        className=\"p-4 rounded-lg mb-4\"\n        style={{\n          background: \"#ffffff\",\n          border: \"1px solid #e8f5e9\",\n          boxShadow: \"0 2px 8px rgba(10, 137, 76, 0.08)\",\n        }}\n      >\n        <div className=\"grid grid-cols-12 gap-4\">\n          <div className=\"col-span-12 md:col-span-4\">\n            <Input\n              placeholder=\"Search by name or ID...\"\n              prefix={<Search size={16} style={{ color: \"#0A894C\" }} />}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              value={searchQuery}\n              size=\"large\"\n              style={{ borderColor: \"#0A894C\" }}\n            />\n          </div>\n\n          <div className=\"col-span-12 md:col-span-2\">\n            <Select\n              placeholder=\"Department\"\n              onChange={(value) =>\n                setFilters({ ...filters, department: value })\n              }\n              value={filters.department}\n              allowClear\n              size=\"large\"\n              style={{ width: \"100%\" }}\n            >\n              {departments.map((dept) => (\n                <Option key={dept} value={dept}>\n                  {dept}\n                </Option>\n              ))}\n            </Select>\n          </div>\n\n          {activeTab === \"student\" && (\n            <>\n              <div className=\"col-span-12 md:col-span-2\">\n                <Select\n                  placeholder=\"Major\"\n                  onChange={(value) => setFilters({ ...filters, major: value })}\n                  value={filters.major}\n                  allowClear\n                  size=\"large\"\n                  style={{ width: \"100%\" }}\n                >\n                  {majors.map((major) => (\n                    <Option key={major} value={major}>\n                      {major}\n                    </Option>\n                  ))}\n                </Select>\n              </div>\n\n              <div className=\"col-span-12 md:col-span-2\">\n                <Select\n                  placeholder=\"Level\"\n                  onChange={(value) => setFilters({ ...filters, level: value })}\n                  value={filters.level}\n                  allowClear\n                  size=\"large\"\n                  style={{ width: \"100%\" }}\n                >\n                  {levels.map((level) => (\n                    <Option key={level} value={level}>\n                      Year {level}\n                    </Option>\n                  ))}\n                </Select>\n              </div>\n            </>\n          )}\n\n          <div\n            className={`col-span-12 md:col-span-${\n              activeTab === \"student\" ? \"2\" : \"6\"\n            } flex gap-2`}\n          >\n            <Button\n              onClick={handleReset}\n              size=\"large\"\n              style={{\n                backgroundColor: \"#6c757d\",\n                borderColor: \"#6c757d\",\n                color: \"#ffffff\",\n              }}\n            >\n              Reset\n            </Button>\n            <Button\n              type=\"primary\"\n              icon={<Plus size={18} />}\n              onClick={handleCreate}\n              size=\"large\"\n              style={{\n                backgroundColor: \"#0A894C\",\n                borderColor: \"#0A894C\",\n                flex: 1,\n              }}\n            >\n              Add New\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Users Table */}\n      <Card\n        style={{\n          borderRadius: 8,\n          border: \"1px solid #e8f5e9\",\n          boxShadow: \"0 2px 8px rgba(10, 137, 76, 0.08)\",\n        }}\n      >\n        <Spin spinning={loading}>\n          <Table\n            columns={getColumns()}\n            dataSource={getFilteredUsers()}\n            rowKey=\"id\"\n            pagination={{\n              pageSize: 10,\n              showSizeChanger: true,\n              showTotal: (total) => `Total ${total} users`,\n            }}\n            scroll={{ x: 800 }}\n          />\n        </Spin>\n      </Card>\n\n      {/* Create/Edit Modal */}\n      <Modal\n        title={\n          <h3 className=\"text-lg font-semibold\" style={{ color: \"#0A894C\" }}>\n            {editingUser ? \"Edit User\" : \"Add New User\"}\n          </h3>\n        }\n        open={isModalVisible}\n        onCancel={() => {\n          setIsModalVisible(false);\n          form.resetFields();\n        }}\n        onOk={() => form.submit()}\n        okText={editingUser ? \"Save\" : \"Create\"}\n        cancelText=\"Cancel\"\n        width={600}\n        okButtonProps={{\n          style: { backgroundColor: \"#0A894C\", borderColor: \"#0A894C\" },\n        }}\n        styles={{\n          header: {\n            borderBottom: \"2px solid #0A894C\",\n            paddingBottom: 16,\n          },\n        }}\n      >\n        <Form\n          form={form}\n          layout=\"vertical\"\n          onFinish={handleSubmit}\n          className=\"mt-4\"\n        >\n          <Form.Item\n            label=\"Full Name\"\n            name=\"fullname\"\n            rules={[{ required: true, message: \"Please enter full name\" }]}\n          >\n            <Input placeholder=\"Full Name\" />\n          </Form.Item>\n\n          {activeTab === \"student\" && (\n            <Form.Item\n              label=\"Student ID\"\n              name=\"studentId\"\n              rules={[{ required: true, message: \"Please enter student ID\" }]}\n            >\n              <Input placeholder=\"Student ID\" />\n            </Form.Item>\n          )}\n\n          <Form.Item\n            label=\"Email\"\n            name=\"email\"\n            rules={[\n              { required: true, message: \"Please enter email\" },\n              { type: \"email\", message: \"Please enter valid email\" },\n            ]}\n          >\n            <Input placeholder=\"Email\" />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Phone\"\n            name=\"phone\"\n            rules={[{ required: true, message: \"Please enter phone number\" }]}\n          >\n            <Input placeholder=\"Phone Number\" />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Department\"\n            name=\"departmentId\"\n            rules={[{ required: true, message: \"Please select department\" }]}\n          >\n            <Select placeholder=\"Select Department\">\n              {Object.values(users)\n                .flat()\n                .filter(\n                  (user, index, self) =>\n                    user.department &&\n                    self.findIndex(\n                      (u) => u.department?.id === user.department?.id\n                    ) === index\n                )\n                .map((user) => (\n                  <Option key={user.department.id} value={user.department.id}>\n                    {user.department.name}\n                  </Option>\n                ))}\n            </Select>\n          </Form.Item>\n\n          {activeTab === \"student\" && (\n            <>\n              <Form.Item\n                label=\"Major\"\n                name=\"majorId\"\n                rules={[{ required: true, message: \"Please select major\" }]}\n              >\n                <Select placeholder=\"Select Major\">\n                  {users.student\n                    .filter(\n                      (user, index, self) =>\n                        user.major &&\n                        self.findIndex(\n                          (u) => u.major?.id === user.major?.id\n                        ) === index\n                    )\n                    .map((user) => (\n                      <Option key={user.major.id} value={user.major.id}>\n                        {user.major.name}\n                      </Option>\n                    ))}\n                </Select>\n              </Form.Item>\n\n              <Form.Item\n                label=\"Level\"\n                name=\"level\"\n                rules={[{ message: \"Please select level\" }]}\n              >\n                <Select placeholder=\"Select Level\">\n                  {levels.map((level) => (\n                    <Option key={level} value={level}>\n                      Year {level}\n                    </Option>\n                  ))}\n                </Select>\n              </Form.Item>\n            </>\n          )}\n        </Form>\n      </Modal>\n\n      {/* View Details Modal */}\n      <Modal\n        title={\n          <h3 className=\"text-lg font-semibold\" style={{ color: \"#0A894C\" }}>\n            User Details\n          </h3>\n        }\n        open={isViewModalVisible}\n        onCancel={() => setIsViewModalVisible(false)}\n        footer={[\n          <Button key=\"close\" onClick={() => setIsViewModalVisible(false)}>\n            Close\n          </Button>,\n        ]}\n        width={600}\n        styles={{\n          header: {\n            borderBottom: \"2px solid #0A894C\",\n            paddingBottom: 16,\n          },\n        }}\n      >\n        {viewingUser && (\n          <div className=\"mt-4 space-y-3\">\n            <div>\n              <label className=\"font-semibold text-gray-700\">Name:</label>\n              <p className=\"text-gray-600 mt-1\">{viewingUser.fullname}</p>\n            </div>\n            {viewingUser.studentId && (\n              <div>\n                <label className=\"font-semibold text-gray-700\">\n                  Student ID:\n                </label>\n                <p className=\"text-gray-600 mt-1\">{viewingUser.studentId}</p>\n              </div>\n            )}\n            <div>\n              <label className=\"font-semibold text-gray-700\">Email:</label>\n              <p className=\"text-gray-600 mt-1\">{viewingUser.email}</p>\n            </div>\n            <div>\n              <label className=\"font-semibold text-gray-700\">Phone:</label>\n              <p className=\"text-gray-600 mt-1\">{viewingUser.phone}</p>\n            </div>\n            <div>\n              <label className=\"font-semibold text-gray-700\">Department:</label>\n              <p className=\"text-gray-600 mt-1\">\n                {viewingUser.department?.name || \"-\"}\n              </p>\n            </div>\n            {viewingUser.major && (\n              <div>\n                <label className=\"font-semibold text-gray-700\">Major:</label>\n                <p className=\"text-gray-600 mt-1\">\n                  <Tag color=\"#0A894C\">{viewingUser.major.name}</Tag>\n                </p>\n              </div>\n            )}\n            {viewingUser.level && (\n              <div>\n                <label className=\"font-semibold text-gray-700\">Level:</label>\n                <p className=\"text-gray-600 mt-1\">Year {viewingUser.level}</p>\n              </div>\n            )}\n            {viewingUser.birthday && (\n              <div>\n                <label className=\"font-semibold text-gray-700\">Birthday:</label>\n                <p className=\"text-gray-600 mt-1\">{viewingUser.birthday}</p>\n              </div>\n            )}\n          </div>\n        )}\n      </Modal>\n\n      <style jsx global>{`\n        .custom-user-tabs .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n          color: #0a894c !important;\n          font-weight: 600 !important;\n        }\n        .custom-user-tabs .ant-tabs-ink-bar {\n          background: #0a894c !important;\n          height: 3px !important;\n        }\n        .custom-user-tabs .ant-tabs-tab:hover {\n          color: #0a894c !important;\n        }\n      `}</style>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAlBA;;;;;;;AAyBA,MAAM,EAAE,MAAM,EAAE,GAAG,4LAAM;AAEV,SAAS;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;QACrC,YAAY;QACZ,OAAO;QACP,OAAO;IACT;IACA,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAC7D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,KAAK,GAAG,sLAAI,CAAC,OAAO;IAC3B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;QACjC,SAAS,EAAE;QACX,SAAS,EAAE;QACX,OAAO,EAAE;IACX;IAEA,2BAA2B;IAC3B,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,aAAa;QACjB,WAAW;QACX,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,sIAAW;YAE9B,0BAA0B;YAC1B,MAAM,eAAe;gBACnB,SAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,KAAK;gBACjD,SAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,KAAK;gBACjD,OAAO,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,KAAK;YACjD;YAEA,SAAS;QACX,EAAE,OAAO,OAAO;YACd,+LAAO,CAAC,KAAK,CAAC;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC,SAAU;YACR,WAAW;QACb;IACF;IAEA,wCAAwC;IACxC,MAAM,cAAc;WACf,IAAI,IACL,OAAO,MAAM,CAAC,OACX,IAAI,GACJ,GAAG,CAAC,CAAC,OAAS,KAAK,UAAU,EAAE,MAC/B,MAAM,CAAC;KAEb;IAED,kCAAkC;IAClC,MAAM,SAAS;WACV,IAAI,IAAI,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,OAAS,KAAK,KAAK,EAAE,MAAM,MAAM,CAAC;KACjE;IAED,MAAM,SAAS;QAAC;QAAK;QAAK;QAAK;KAAI;IAEnC,2CAA2C;IAC3C,MAAM,mBAAmB;QACvB,IAAI,WAAW;eAAI,KAAK,CAAC,UAAU;SAAC;QAEpC,sBAAsB;QACtB,IAAI,aAAa;YACf,MAAM,QAAQ,YAAY,WAAW;YACrC,WAAW,SAAS,MAAM,CACxB,CAAC,OACC,KAAK,QAAQ,EAAE,cAAc,SAAS,UACtC,KAAK,KAAK,EAAE,cAAc,SAAS,UACnC,KAAK,SAAS,EAAE,cAAc,SAAS;QAE7C;QAEA,0BAA0B;QAC1B,IAAI,QAAQ,UAAU,EAAE;YACtB,WAAW,SAAS,MAAM,CACxB,CAAC,OAAS,KAAK,UAAU,EAAE,SAAS,QAAQ,UAAU;QAE1D;QAEA,yCAAyC;QACzC,IAAI,QAAQ,KAAK,IAAI,cAAc,WAAW;YAC5C,WAAW,SAAS,MAAM,CAAC,CAAC,OAAS,KAAK,KAAK,EAAE,SAAS,QAAQ,KAAK;QACzE;QAEA,yCAAyC;QACzC,IAAI,QAAQ,KAAK,IAAI,cAAc,WAAW;YAC5C,WAAW,SAAS,MAAM,CAAC,CAAC,OAAS,KAAK,KAAK,KAAK,QAAQ,KAAK;QACnE;QAEA,OAAO;IACT;IAEA,wBAAwB;IACxB,MAAM,eAAe;QACnB,eAAe;QACf,KAAK,WAAW;QAChB,kBAAkB;IACpB;IAEA,sBAAsB;IACtB,MAAM,aAAa,CAAC;QAClB,eAAe;QACf,KAAK,cAAc,CAAC;YAClB,UAAU,OAAO,QAAQ;YACzB,WAAW,OAAO,SAAS;YAC3B,OAAO,OAAO,KAAK;YACnB,OAAO,OAAO,KAAK;YACnB,cAAc,OAAO,YAAY;YACjC,SAAS,OAAO,OAAO;YACvB,OAAO,OAAO,KAAK;QACrB;QACA,kBAAkB;IACpB;IAEA,oBAAoB;IACpB,MAAM,aAAa,CAAC;QAClB,eAAe;QACf,sBAAsB;IACxB;IAEA,cAAc;IACd,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,IAAA,qIAAU,EAAC,OAAO,EAAE;YAC1B,+LAAO,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,OAAO,QAAQ,CAAC,OAAO,CAAC;YACpD,cAAc,oBAAoB;QACpC,EAAE,OAAO,OAAO;YACd,+LAAO,CAAC,KAAK,CAAC;YACd,QAAQ,KAAK,CAAC,wBAAwB;QACxC;IACF;IAEA,iCAAiC;IACjC,MAAM,eAAe,OAAO;QAC1B,WAAW;QACX,IAAI;YACF,IAAI,aAAa;gBACf,uBAAuB;gBACvB,MAAM,IAAA,qIAAU,EAAC,YAAY,EAAE,EAAE;gBACjC,+LAAO,CAAC,OAAO,CAAC;YAClB,OAAO;gBACL,kBAAkB;gBAClB,MAAM,IAAA,qIAAU,EAAC;oBAAE,GAAG,MAAM;oBAAE,UAAU;gBAAU;gBAClD,+LAAO,CAAC,OAAO,CAAC;YAClB;YACA,kBAAkB;YAClB,KAAK,WAAW;YAChB,cAAc,oBAAoB;QACpC,EAAE,OAAO,OAAO;YACd,+LAAO,CAAC,KAAK,CACX,cAAc,4BAA4B;YAE5C,QAAQ,KAAK,CAAC,0BAA0B;QAC1C,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,cAAc;QAClB,eAAe;QACf,WAAW;YACT,YAAY;YACZ,OAAO;YACP,OAAO;QACT;QACA,+LAAO,CAAC,OAAO,CAAC;IAClB;IAEA,oCAAoC;IACpC,MAAM,aAAa;QACjB,MAAM,cAAc;YAClB;gBACE,OAAO;gBACP,WAAW;gBACX,KAAK;gBACL,OAAO;gBACP,OAAO;gBACP,QAAQ,CAAC,MAAM,QAAQ,QAAU,QAAQ;YAC3C;YACA;gBACE,OAAO;gBACP,WAAW;gBACX,KAAK;gBACL,OAAO;gBACP,QAAQ,CAAC,OAAS,QAAQ;YAC5B;YACA;gBACE,OAAO;gBACP,KAAK;gBACL,QAAQ,CAAC,GAAG,SAAW,OAAO,QAAQ;YACxC;YACA;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,QAAQ,CAAC,GAAG,SAAW,OAAO,UAAU,EAAE,QAAQ;YACpD;SACD;QAED,gDAAgD;QAChD,IAAI,cAAc,WAAW;YAC3B,YAAY,IAAI,CACd;gBACE,OAAO;gBACP,KAAK;gBACL,OAAO;gBACP,OAAO;gBACP,QAAQ,CAAC,GAAG,uBACV,8OAAC,mLAAG;wBAAC,OAAM;wBAAU,OAAO;4BAAE,cAAc;wBAAE;kCAC3C,OAAO,KAAK,EAAE,QAAQ;;;;;;YAG7B,GACA;gBACE,OAAO;gBACP,WAAW;gBACX,KAAK;gBACL,OAAO;gBACP,OAAO;gBACP,QAAQ,CAAC,QAAW,QAAQ,GAAG,OAAO,GAAG;YAC3C;QAEJ;QAEA,YAAY,IAAI,CAAC;YACf,OAAO;YACP,KAAK;YACL,OAAO;YACP,OAAO;YACP,QAAQ,CAAC,GAAG,uBACV,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4MAAM;4BACL,MAAK;4BACL,oBAAM,8OAAC,uMAAG;gCAAC,MAAM;;;;;;4BACjB,SAAS,IAAM,WAAW;4BAC1B,OAAO;gCAAE,OAAO;4BAAU;4BAC1B,OAAM;;;;;;sCAER,8OAAC,4MAAM;4BACL,MAAK;4BACL,oBAAM,8OAAC,mNAAI;gCAAC,MAAM;;;;;;4BAClB,SAAS,IAAM,WAAW;4BAC1B,OAAO;gCAAE,OAAO;4BAAU;4BAC1B,OAAM;;;;;;sCAER,8OAAC,wMAAU;4BACT,OAAM;4BACN,aAAY;4BACZ,WAAW,IAAM,aAAa;4BAC9B,QAAO;4BACP,YAAW;4BACX,eAAe;gCACb,OAAO;oCAAE,iBAAiB;oCAAW,aAAa;gCAAU;4BAC9D;sCAEA,cAAA,8OAAC,4MAAM;gCACL,MAAK;gCACL,oBAAM,8OAAC,oNAAM;oCAAC,MAAM;;;;;;gCACpB,MAAM;gCACN,OAAM;;;;;;;;;;;;;;;;;QAKhB;QAEA,OAAO;IACT;IAEA,MAAM,WAAW;QACf;YACE,KAAK;YACL,qBACE,8OAAC;gBAAK,WAAU;;kCACd,8OAAC,6MAAK;wBAAC,MAAM;;;;;;oBAAM;oBACR,MAAM,OAAO,CAAC,MAAM;oBAAC;;;;;;;QAGtC;QACA;YACE,KAAK;YACL,qBACE,8OAAC;gBAAK,WAAU;;kCACd,8OAAC,6MAAK;wBAAC,MAAM;;;;;;oBAAM;oBACW,MAAM,OAAO,CAAC,MAAM;oBAAC;;;;;;;QAGzD;QACA;YACE,KAAK;YACL,qBACE,8OAAC;gBAAK,WAAU;;kCACd,8OAAC,6MAAK;wBAAC,MAAM;;;;;;oBAAM;oBACK,MAAM,KAAK,CAAC,MAAM;oBAAC;;;;;;;QAGjD;KACD;IAED,qBACE,8OAAC;;;0BAEC,8OAAC,sLAAI;gBACH,WAAW;gBACX,UAAU,CAAC;oBACT,aAAa;oBACb,WAAW;wBAAE,YAAY;wBAAM,OAAO;wBAAM,OAAO;oBAAK;oBACxD,eAAe;gBACjB;gBACA,OAAO;gBACP,MAAK;gBACL,WAAU;;;;;;0BAIZ,8OAAC;gBAEC,OAAO;oBACL,YAAY;oBACZ,QAAQ;oBACR,WAAW;gBACb;0DALU;0BAOV,cAAA,8OAAC;8DAAc;;sCACb,8OAAC;sEAAc;sCACb,cAAA,8OAAC,yLAAK;gCACJ,aAAY;gCACZ,sBAAQ,8OAAC,gNAAM;oCAAC,MAAM;oCAAI,OAAO;wCAAE,OAAO;oCAAU;;;;;;gCACpD,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,OAAO;gCACP,MAAK;gCACL,OAAO;oCAAE,aAAa;gCAAU;;;;;;;;;;;sCAIpC,8OAAC;sEAAc;sCACb,cAAA,8OAAC,4LAAM;gCACL,aAAY;gCACZ,UAAU,CAAC,QACT,WAAW;wCAAE,GAAG,OAAO;wCAAE,YAAY;oCAAM;gCAE7C,OAAO,QAAQ,UAAU;gCACzB,UAAU;gCACV,MAAK;gCACL,OAAO;oCAAE,OAAO;gCAAO;0CAEtB,YAAY,GAAG,CAAC,CAAC,qBAChB,8OAAC;wCAAkB,OAAO;kDACvB;uCADU;;;;;;;;;;;;;;;wBAOlB,cAAc,2BACb;;8CACE,8OAAC;8EAAc;8CACb,cAAA,8OAAC,4LAAM;wCACL,aAAY;wCACZ,UAAU,CAAC,QAAU,WAAW;gDAAE,GAAG,OAAO;gDAAE,OAAO;4CAAM;wCAC3D,OAAO,QAAQ,KAAK;wCACpB,UAAU;wCACV,MAAK;wCACL,OAAO;4CAAE,OAAO;wCAAO;kDAEtB,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;gDAAmB,OAAO;0DACxB;+CADU;;;;;;;;;;;;;;;8CAOnB,8OAAC;8EAAc;8CACb,cAAA,8OAAC,4LAAM;wCACL,aAAY;wCACZ,UAAU,CAAC,QAAU,WAAW;gDAAE,GAAG,OAAO;gDAAE,OAAO;4CAAM;wCAC3D,OAAO,QAAQ,KAAK;wCACpB,UAAU;wCACV,MAAK;wCACL,OAAO;4CAAE,OAAO;wCAAO;kDAEtB,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;gDAAmB,OAAO;;oDAAO;oDAC1B;;+CADK;;;;;;;;;;;;;;;;;sCASvB,8OAAC;sEACY,CAAC,wBAAwB,EAClC,cAAc,YAAY,MAAM,IACjC,WAAW,CAAC;;8CAEb,8OAAC,4MAAM;oCACL,SAAS;oCACT,MAAK;oCACL,OAAO;wCACL,iBAAiB;wCACjB,aAAa;wCACb,OAAO;oCACT;8CACD;;;;;;8CAGD,8OAAC,4MAAM;oCACL,MAAK;oCACL,oBAAM,8OAAC,0MAAI;wCAAC,MAAM;;;;;;oCAClB,SAAS;oCACT,MAAK;oCACL,OAAO;wCACL,iBAAiB;wCACjB,aAAa;wCACb,MAAM;oCACR;8CACD;;;;;;;;;;;;;;;;;;;;;;;0BAQP,8OAAC,sLAAI;gBACH,OAAO;oBACL,cAAc;oBACd,QAAQ;oBACR,WAAW;gBACb;0BAEA,cAAA,8OAAC,sLAAI;oBAAC,UAAU;8BACd,cAAA,8OAAC,yLAAK;wBACJ,SAAS;wBACT,YAAY;wBACZ,QAAO;wBACP,YAAY;4BACV,UAAU;4BACV,iBAAiB;4BACjB,WAAW,CAAC,QAAU,CAAC,MAAM,EAAE,MAAM,MAAM,CAAC;wBAC9C;wBACA,QAAQ;4BAAE,GAAG;wBAAI;;;;;;;;;;;;;;;;0BAMvB,8OAAC,yLAAK;gBACJ,qBACE,8OAAC;oBAAqC,OAAO;wBAAE,OAAO;oBAAU;8DAAlD;8BACX,cAAc,cAAc;;;;;;gBAGjC,MAAM;gBACN,UAAU;oBACR,kBAAkB;oBAClB,KAAK,WAAW;gBAClB;gBACA,MAAM,IAAM,KAAK,MAAM;gBACvB,QAAQ,cAAc,SAAS;gBAC/B,YAAW;gBACX,OAAO;gBACP,eAAe;oBACb,OAAO;wBAAE,iBAAiB;wBAAW,aAAa;oBAAU;gBAC9D;gBACA,QAAQ;oBACN,QAAQ;wBACN,cAAc;wBACd,eAAe;oBACjB;gBACF;0BAEA,cAAA,8OAAC,sLAAI;oBACH,MAAM;oBACN,QAAO;oBACP,UAAU;oBACV,WAAU;;sCAEV,8OAAC,sLAAI,CAAC,IAAI;4BACR,OAAM;4BACN,MAAK;4BACL,OAAO;gCAAC;oCAAE,UAAU;oCAAM,SAAS;gCAAyB;6BAAE;sCAE9D,cAAA,8OAAC,yLAAK;gCAAC,aAAY;;;;;;;;;;;wBAGpB,cAAc,2BACb,8OAAC,sLAAI,CAAC,IAAI;4BACR,OAAM;4BACN,MAAK;4BACL,OAAO;gCAAC;oCAAE,UAAU;oCAAM,SAAS;gCAA0B;6BAAE;sCAE/D,cAAA,8OAAC,yLAAK;gCAAC,aAAY;;;;;;;;;;;sCAIvB,8OAAC,sLAAI,CAAC,IAAI;4BACR,OAAM;4BACN,MAAK;4BACL,OAAO;gCACL;oCAAE,UAAU;oCAAM,SAAS;gCAAqB;gCAChD;oCAAE,MAAM;oCAAS,SAAS;gCAA2B;6BACtD;sCAED,cAAA,8OAAC,yLAAK;gCAAC,aAAY;;;;;;;;;;;sCAGrB,8OAAC,sLAAI,CAAC,IAAI;4BACR,OAAM;4BACN,MAAK;4BACL,OAAO;gCAAC;oCAAE,UAAU;oCAAM,SAAS;gCAA4B;6BAAE;sCAEjE,cAAA,8OAAC,yLAAK;gCAAC,aAAY;;;;;;;;;;;sCAGrB,8OAAC,sLAAI,CAAC,IAAI;4BACR,OAAM;4BACN,MAAK;4BACL,OAAO;gCAAC;oCAAE,UAAU;oCAAM,SAAS;gCAA2B;6BAAE;sCAEhE,cAAA,8OAAC,4LAAM;gCAAC,aAAY;0CACjB,OAAO,MAAM,CAAC,OACZ,IAAI,GACJ,MAAM,CACL,CAAC,MAAM,OAAO,OACZ,KAAK,UAAU,IACf,KAAK,SAAS,CACZ,CAAC,IAAM,EAAE,UAAU,EAAE,OAAO,KAAK,UAAU,EAAE,QACzC,OAET,GAAG,CAAC,CAAC,qBACJ,8OAAC;wCAAgC,OAAO,KAAK,UAAU,CAAC,EAAE;kDACvD,KAAK,UAAU,CAAC,IAAI;uCADV,KAAK,UAAU,CAAC,EAAE;;;;;;;;;;;;;;;wBAOtC,cAAc,2BACb;;8CACE,8OAAC,sLAAI,CAAC,IAAI;oCACR,OAAM;oCACN,MAAK;oCACL,OAAO;wCAAC;4CAAE,UAAU;4CAAM,SAAS;wCAAsB;qCAAE;8CAE3D,cAAA,8OAAC,4LAAM;wCAAC,aAAY;kDACjB,MAAM,OAAO,CACX,MAAM,CACL,CAAC,MAAM,OAAO,OACZ,KAAK,KAAK,IACV,KAAK,SAAS,CACZ,CAAC,IAAM,EAAE,KAAK,EAAE,OAAO,KAAK,KAAK,EAAE,QAC/B,OAET,GAAG,CAAC,CAAC,qBACJ,8OAAC;gDAA2B,OAAO,KAAK,KAAK,CAAC,EAAE;0DAC7C,KAAK,KAAK,CAAC,IAAI;+CADL,KAAK,KAAK,CAAC,EAAE;;;;;;;;;;;;;;;8CAOlC,8OAAC,sLAAI,CAAC,IAAI;oCACR,OAAM;oCACN,MAAK;oCACL,OAAO;wCAAC;4CAAE,SAAS;wCAAsB;qCAAE;8CAE3C,cAAA,8OAAC,4LAAM;wCAAC,aAAY;kDACjB,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;gDAAmB,OAAO;;oDAAO;oDAC1B;;+CADK;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAY3B,8OAAC,yLAAK;gBACJ,qBACE,8OAAC;oBAAqC,OAAO;wBAAE,OAAO;oBAAU;8DAAlD;8BAAqD;;;;;;gBAIrE,MAAM;gBACN,UAAU,IAAM,sBAAsB;gBACtC,QAAQ;kCACN,8OAAC,4MAAM;wBAAa,SAAS,IAAM,sBAAsB;kCAAQ;uBAArD;;;;;iBAGb;gBACD,OAAO;gBACP,QAAQ;oBACN,QAAQ;wBACN,cAAc;wBACd,eAAe;oBACjB;gBACF;0BAEC,6BACC,8OAAC;8DAAc;;sCACb,8OAAC;;;8CACC,8OAAC;8EAAgB;8CAA8B;;;;;;8CAC/C,8OAAC;8EAAY;8CAAsB,YAAY,QAAQ;;;;;;;;;;;;wBAExD,YAAY,SAAS,kBACpB,8OAAC;;;8CACC,8OAAC;8EAAgB;8CAA8B;;;;;;8CAG/C,8OAAC;8EAAY;8CAAsB,YAAY,SAAS;;;;;;;;;;;;sCAG5D,8OAAC;;;8CACC,8OAAC;8EAAgB;8CAA8B;;;;;;8CAC/C,8OAAC;8EAAY;8CAAsB,YAAY,KAAK;;;;;;;;;;;;sCAEtD,8OAAC;;;8CACC,8OAAC;8EAAgB;8CAA8B;;;;;;8CAC/C,8OAAC;8EAAY;8CAAsB,YAAY,KAAK;;;;;;;;;;;;sCAEtD,8OAAC;;;8CACC,8OAAC;8EAAgB;8CAA8B;;;;;;8CAC/C,8OAAC;8EAAY;8CACV,YAAY,UAAU,EAAE,QAAQ;;;;;;;;;;;;wBAGpC,YAAY,KAAK,kBAChB,8OAAC;;;8CACC,8OAAC;8EAAgB;8CAA8B;;;;;;8CAC/C,8OAAC;8EAAY;8CACX,cAAA,8OAAC,mLAAG;wCAAC,OAAM;kDAAW,YAAY,KAAK,CAAC,IAAI;;;;;;;;;;;;;;;;;wBAIjD,YAAY,KAAK,kBAChB,8OAAC;;;8CACC,8OAAC;8EAAgB;8CAA8B;;;;;;8CAC/C,8OAAC;8EAAY;;wCAAqB;wCAAM,YAAY,KAAK;;;;;;;;;;;;;wBAG5D,YAAY,QAAQ,kBACnB,8OAAC;;;8CACC,8OAAC;8EAAgB;8CAA8B;;;;;;8CAC/C,8OAAC;8EAAY;8CAAsB,YAAY,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsBvE"}}]
}