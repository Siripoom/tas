{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/apiClient.js"],"sourcesContent":["// create axios instance with default config\nimport axios from \"axios\";\n\nconst baseURL = process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:4556/api\";\n\nconst apiClient = axios.create({\n  baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nconst getToken = () => (typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null);\nconst getRefreshToken = () =>\n  typeof window !== \"undefined\" ? localStorage.getItem(\"refreshToken\") : null;\n\nconst setTokens = (accessToken, refreshToken) => {\n  if (typeof window === \"undefined\") return;\n  if (accessToken) localStorage.setItem(\"token\", accessToken);\n  if (refreshToken) localStorage.setItem(\"refreshToken\", refreshToken);\n};\n\nconst clearTokens = () => {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"refreshToken\");\n};\n\napiClient.interceptors.request.use(\n  (config) => {\n    const token = getToken();\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error),\n);\n\nlet isRefreshing = false;\nlet pendingRequests = [];\n\nconst processQueue = (error, token = null) => {\n  pendingRequests.forEach((promise) => {\n    if (error) {\n      promise.reject(error);\n    } else {\n      promise.resolve(token);\n    }\n  });\n  pendingRequests = [];\n};\n\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status !== 401 || originalRequest?._retry) {\n      return Promise.reject(error);\n    }\n\n    const refreshToken = getRefreshToken();\n    if (!refreshToken) {\n      clearTokens();\n      return Promise.reject(error);\n    }\n\n    if (isRefreshing) {\n      return new Promise((resolve, reject) => {\n        pendingRequests.push({ resolve, reject });\n      })\n        .then((token) => {\n          originalRequest.headers.Authorization = `Bearer ${token}`;\n          return apiClient(originalRequest);\n        })\n        .catch((refreshError) => Promise.reject(refreshError));\n    }\n\n    originalRequest._retry = true;\n    isRefreshing = true;\n\n    try {\n      const response = await axios.post(`${baseURL}/auth/refresh`, { refreshToken });\n      const newAccessToken = response.data?.accessToken;\n      const newRefreshToken = response.data?.refreshToken || refreshToken;\n\n      setTokens(newAccessToken, newRefreshToken);\n      processQueue(null, newAccessToken);\n\n      originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n      return apiClient(originalRequest);\n    } catch (refreshError) {\n      processQueue(refreshError, null);\n      clearTokens();\n      if (typeof window !== \"undefined\") {\n        localStorage.removeItem(\"user\");\n      }\n      return Promise.reject(refreshError);\n    } finally {\n      isRefreshing = false;\n    }\n  },\n);\n\nexport default apiClient;\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAC5C;;AAEA,MAAM,UAAU,iEAAwC;AAExD,MAAM,YAAY,gJAAK,CAAC,MAAM,CAAC;IAC7B;IACA,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,MAAM,WAAW,IAAO,sCAAgC,0BAAgC;AACxF,MAAM,kBAAkB,IACtB,sCAAgC,0BAAuC;AAEzE,MAAM,YAAY,CAAC,aAAa;IAC9B,wCAAmC;;;AAGrC;AAEA,MAAM,cAAc;IAClB,wCAAmC;;;AAGrC;AAEA,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ;IACd;;IAGA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,IAAI,eAAe;AACnB,IAAI,kBAAkB,EAAE;AAExB,MAAM,eAAe,CAAC,OAAO,QAAQ,IAAI;IACvC,gBAAgB,OAAO,CAAC,CAAC;QACvB,IAAI,OAAO;YACT,QAAQ,MAAM,CAAC;QACjB,OAAO;YACL,QAAQ,OAAO,CAAC;QAClB;IACF;IACA,kBAAkB,EAAE;AACtB;AAEA,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,iBAAiB,QAAQ;QAC7D,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,MAAM,eAAe;IACrB,wCAAmB;QACjB;QACA,OAAO,QAAQ,MAAM,CAAC;IACxB;;;AAoCF;uCAGa"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/compat.js"],"sourcesContent":["const ROLE_TO_USER_TYPE = {\n  STUDENT: \"student\",\n  TEACHER: \"teacher\",\n  DEPT_STAFF: \"admin\",\n  FACULTY_ADMIN: \"admin\",\n  SUPER_ADMIN: \"admin\",\n};\n\nconst ACTIVITY_STATUS_TO_API = {\n  planned: \"OPEN_REGISTRATION\",\n  inprogress: \"IN_PROGRESS\",\n  completed: \"CLOSED\",\n  cancelled: \"CANCELLED\",\n};\n\nconst LEGACY_ATTENDANCE_ACTION = {\n  APPLIED: \"request-revision\",\n  APPROVED: \"approve\",\n  REJECTED: \"request-revision\",\n  REVISION_REQUIRED: \"request-revision\",\n  CANCELLED: \"request-revision\",\n  NO_SHOW: \"request-revision\",\n  SUBMITTED: \"request-revision\",\n  COMPLETED: \"approve\",\n  joined: \"request-revision\",\n  accepted: \"approve\",\n  approved: \"approve\",\n  completed: \"approve\",\n  rejected: \"request-revision\",\n  uncompleted: \"request-revision\",\n  Inprogress: \"request-revision\",\n};\n\nfunction safeString(value) {\n  return value === null || value === undefined ? \"\" : String(value);\n}\n\nexport function splitFullName(fullname) {\n  const clean = safeString(fullname).trim();\n  if (!clean) {\n    return { firstName: \"User\", lastName: \"\" };\n  }\n  const parts = clean.split(/\\s+/);\n  const firstName = parts.shift() || \"User\";\n  const lastName = parts.join(\" \");\n  return { firstName, lastName };\n}\n\nexport function roleToUserType(role) {\n  return ROLE_TO_USER_TYPE[role] || \"student\";\n}\n\nexport function mapActivityStatusFromApi(status) {\n  return status || \"OPEN_REGISTRATION\";\n}\n\nexport function mapActivityStatusToApi(status) {\n  return ACTIVITY_STATUS_TO_API[status] || status || undefined;\n}\n\nexport function mapApplicationStatusFromApi(status) {\n  return status || \"APPLIED\";\n}\n\nexport function mapLegacyAttendanceAction(status) {\n  return LEGACY_ATTENDANCE_ACTION[status] || \"request-revision\";\n}\n\nexport function mapEvidenceTypeToTypeActivity(requiredEvidenceType) {\n  const mapping = {\n    PHOTO: { id: \"PHOTO\", name: \"ใช้รูปภาพ\" },\n    PDF: { id: \"PDF\", name: \"ใช้ PDF\" },\n    BOTH: { id: \"BOTH\", name: \"ทั่วไป\" },\n  };\n  return mapping[requiredEvidenceType] || mapping.BOTH;\n}\n\nfunction uniqueById(items) {\n  const map = new Map();\n  items.forEach((item) => {\n    if (item?.id) {\n      map.set(item.id, item);\n    }\n  });\n  return Array.from(map.values());\n}\n\nfunction normalizeTargetDepartments(activity) {\n  const targetDepartments = Array.isArray(activity?.targetDepartments)\n    ? activity.targetDepartments\n    : [];\n\n  const mappedTargets = targetDepartments\n    .map((item) => ({\n      departmentId: item?.departmentId || item?.department?.id || null,\n      department: item?.department || null,\n    }))\n    .filter((item) => item.departmentId);\n\n  if (mappedTargets.length > 0) {\n    return mappedTargets;\n  }\n\n  if (activity?.ownerDepartmentId || activity?.ownerDepartment?.id) {\n    return [\n      {\n        departmentId: activity.ownerDepartmentId || activity.ownerDepartment?.id,\n        department: activity.ownerDepartment || null,\n      },\n    ];\n  }\n\n  return [];\n}\n\nfunction normalizeTargetMajors(activity) {\n  const targetMajors = Array.isArray(activity?.targetMajors)\n    ? activity.targetMajors\n    : Array.isArray(activity?.majorJoins)\n      ? activity.majorJoins\n      : [];\n\n  return targetMajors\n    .map((item) => ({\n      majorId: item?.majorId || item?.major?.id || null,\n      major: item?.major || null,\n    }))\n    .filter((item) => item.majorId);\n}\n\nexport function normalizeUser(user) {\n  if (!user) return null;\n\n  const fullNameFromApi = [user.firstName, user.lastName].filter(Boolean).join(\" \").trim();\n  const fullname = user.fullname || fullNameFromApi || user.username || user.email || \"Unknown\";\n\n  const faculty =\n    user.faculty ||\n    user.studentProfile?.faculty ||\n    user.teacherProfile?.faculty ||\n    user.staffProfile?.faculty ||\n    null;\n\n  const department =\n    user.department ||\n    user.studentProfile?.department ||\n    user.teacherProfile?.department ||\n    user.staffProfile?.department ||\n    null;\n\n  const major = user.major || user.studentProfile?.major || null;\n\n  const studentCode = user.studentCode || user.studentProfile?.studentCode || null;\n  const classYear = user.classYear || user.studentProfile?.classYear || null;\n  const academicYear = user.academicYear || user.studentProfile?.academicYear || null;\n\n  return {\n    id: user.id,\n    role: user.role,\n    userType: roleToUserType(user.role),\n    username: user.username || null,\n    email: user.email || null,\n    fullname,\n    name: fullname,\n    firstName: user.firstName || splitFullName(fullname).firstName,\n    lastName: user.lastName || splitFullName(fullname).lastName,\n    phone: user.phone || null,\n    status: user.status || \"ACTIVE\",\n    studentId: studentCode,\n    studentCode,\n    classYear,\n    academicYear,\n    level: classYear,\n    facultyId:\n      user.facultyId ||\n      user.studentProfile?.facultyId ||\n      user.teacherProfile?.facultyId ||\n      user.staffProfile?.facultyId ||\n      faculty?.id ||\n      null,\n    faculty,\n    departmentId:\n      user.departmentId ||\n      user.studentProfile?.departmentId ||\n      user.teacherProfile?.departmentId ||\n      user.staffProfile?.departmentId ||\n      department?.id ||\n      null,\n    department,\n    majorId: user.majorId || user.studentProfile?.majorId || major?.id || null,\n    major,\n  };\n}\n\nexport function normalizeAttendance(application, activity = null) {\n  const normalizedUser = normalizeUser(application?.student || application?.user || null);\n\n  return {\n    id: application.id,\n    activityId: application.activityId || activity?.id || null,\n    userId: application.studentUserId || normalizedUser?.id || null,\n    status: mapApplicationStatusFromApi(application.status),\n    reason: application.remark || null,\n    createdAt: application.submittedAt || application.createdAt || null,\n    updatedAt: application.updatedAt || null,\n    user: normalizedUser,\n    activity,\n    attendanceId: application.id,\n  };\n}\n\nexport function normalizeActivity(activity) {\n  if (!activity) return null;\n\n  const applications = Array.isArray(activity?.applications) ? activity.applications : [];\n  const attendances = applications.map((item) => normalizeAttendance(item));\n\n  const peopleCount = applications.filter((item) =>\n    [\"APPLIED\", \"APPROVED\", \"REVISION_REQUIRED\"].includes(item.status),\n  ).length;\n\n  const typeActivity = activity.activityType\n    ? {\n        id: activity.activityType.id,\n        code: activity.activityType.code,\n        name: activity.activityType.name,\n      }\n    : activity.typeActivity\n      ? {\n          id: activity.typeActivity.id,\n          code: activity.typeActivity.code,\n          name: activity.typeActivity.name,\n        }\n    : mapEvidenceTypeToTypeActivity(activity.requiredEvidenceType);\n\n  const targetDepartments = normalizeTargetDepartments(activity);\n  const departments = uniqueById(\n    targetDepartments\n      .map((item) => item.department)\n      .filter((item) => item?.id),\n  );\n  const departmentIds = targetDepartments.map((item) => item.departmentId).filter(Boolean);\n  const department = departments[0] || activity.ownerDepartment || null;\n\n  const majorJoins = normalizeTargetMajors(activity);\n  const majors = uniqueById(majorJoins.map((item) => item.major).filter((item) => item?.id));\n  const majorIds = majorJoins.map((item) => item.majorId).filter(Boolean);\n\n  const normalizedAttendances = attendances.map((attendance) => ({\n    ...attendance,\n    activityId: attendance.activityId || activity.id,\n  }));\n\n  return {\n    id: activity.id,\n    name: activity.title,\n    title: activity.title,\n    description: activity.note || \"\",\n    note: activity.note || \"\",\n    location: activity.location,\n    address: activity.location,\n    hour: activity.hours,\n    hours: activity.hours,\n    activityHours: activity.hours,\n    maxPeopleCount: activity.capacity,\n    maxStudents: activity.capacity,\n    peopleCount,\n    startDate: activity.startAt,\n    endDate: activity.endAt,\n    date: activity.applyCloseAt,\n    startAt: activity.startAt,\n    endAt: activity.endAt,\n    applyOpen: activity.applyOpenAt,\n    applyClose: activity.applyCloseAt,\n    applyOpenAt: activity.applyOpenAt,\n    applyCloseAt: activity.applyCloseAt,\n    status: mapActivityStatusFromApi(activity.status),\n    departmentId: departmentIds[0] || activity.ownerDepartmentId || null,\n    departmentIds,\n    facultyId: activity.ownerFacultyId || null,\n    department,\n    departments,\n    faculty: activity.ownerFaculty || null,\n    activityType: activity.activityType || typeActivity,\n    typeActivity,\n    typeActivityId: activity.activityTypeId || typeActivity.id,\n    requiredEvidenceType: activity.requiredEvidenceType,\n    ownerScope: activity.ownerScope,\n    attendances: normalizedAttendances,\n    applications,\n    createdBy: activity.createdBy || null,\n    targetDepartments,\n    majorJoins,\n    targetMajors: majorJoins,\n    majorIds,\n    majors,\n    level: activity.level || null,\n    createdAt: activity.createdAt || null,\n    updatedAt: activity.updatedAt || null,\n    fileActivities: [],\n    remarks: activity.note || \"\",\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 424, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/activity.js"],"sourcesContent":["import apiClient from \"./apiClient\";\nimport { mapActivityStatusToApi, normalizeActivity } from \"./compat\";\n\nconst isFormData = (value) =>\n  typeof FormData !== \"undefined\" && value instanceof FormData;\n\nconst toIsoString = (value, fallback = null) => {\n  if (!value && fallback) return fallback;\n  if (!value) return null;\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) return fallback;\n  return date.toISOString();\n};\n\nconst formDataToObject = (formData) => {\n  const data = {};\n  formData.forEach((value, key) => {\n    if (data[key] !== undefined) {\n      data[key] = Array.isArray(data[key])\n        ? [...data[key], value]\n        : [data[key], value];\n      return;\n    }\n    data[key] = value;\n  });\n  return data;\n};\n\nconst compact = (obj) =>\n  Object.fromEntries(\n    Object.entries(obj).filter(([, value]) => value !== undefined && value !== null),\n  );\n\nconst toArray = (value) => {\n  if (value === undefined || value === null || value === \"\") return [];\n  if (Array.isArray(value)) return value.filter(Boolean);\n  return [value];\n};\n\nconst normalizeIncomingPayload = (rawData) => {\n  const data = isFormData(rawData) ? formDataToObject(rawData) : { ...rawData };\n\n  const title = data.title || data.name || data.activityName;\n  const startAt =\n    toIsoString(data.startAt || data.startDate || data.date || data.activityDate) ||\n    toIsoString(new Date());\n  const endAt =\n    toIsoString(data.endAt || data.endDate || data.startDate || data.date) ||\n    toIsoString(new Date(Date.now() + 60 * 60 * 1000));\n\n  const applyOpenAt =\n    toIsoString(data.applyOpenAt || data.applyOpenDate || data.applyStart) ||\n    toIsoString(new Date());\n\n  const applyCloseAt =\n    toIsoString(data.applyCloseAt || data.activityDeadline || data.date || data.startDate) ||\n    startAt;\n\n  const departmentIds = toArray(data.departmentIds || data.departmentId || data.ownerDepartmentId);\n  const majorIds = toArray(data.majorIds);\n\n  return compact({\n    title,\n    startAt,\n    endAt,\n    location: data.location || data.address,\n    hours: Number(data.hours || data.hour || data.activityHours || 1),\n    requiredEvidenceType:\n      data.requiredEvidenceType || data.evidenceType || (data.pdfDocument ? \"PDF\" : \"BOTH\"),\n    activityTypeId: data.activityTypeId || data.typeActivityId || data.category,\n    capacity: Number(data.capacity || data.maxPeopleCount || data.maxStudents || 1),\n    applyOpenAt,\n    applyCloseAt,\n    note: data.note || data.description || data.remarks,\n    ownerScope: data.ownerScope || (departmentIds.length ? \"DEPARTMENT\" : \"FACULTY\"),\n    ownerFacultyId: data.ownerFacultyId || data.facultyId,\n    ownerDepartmentId: departmentIds[0] || null,\n    departmentIds,\n    majorIds,\n    status: mapActivityStatusToApi(data.status),\n  });\n};\n\nconst mapListQuery = (params = {}) => {\n  const mapped = {\n    scope: params.scope,\n    department: params.department || params.departmentId,\n    status: mapActivityStatusToApi(params.status),\n    dateFrom: params.dateFrom || params.from,\n    dateTo: params.dateTo || params.to,\n  };\n\n  return compact(mapped);\n};\n\nconst fetchActivityDetail = async (id) => {\n  const response = await apiClient.get(`/activities/${id}`);\n  return response.data;\n};\n\nconst enrichWithDetails = async (activities) => {\n  const detailed = await Promise.all(\n    activities.map(async (item) => {\n      try {\n        return await fetchActivityDetail(item.id);\n      } catch (_error) {\n        return item;\n      }\n    }),\n  );\n\n  return detailed;\n};\n\nexport const getAllActivities = async (params = {}) => {\n  const response = await apiClient.get(\"/activities\", {\n    params: mapListQuery(params),\n  });\n\n  const list = Array.isArray(response.data) ? response.data : [];\n  const detailed = params.includeDetails === false ? list : await enrichWithDetails(list);\n\n  return detailed.map(normalizeActivity);\n};\n\nexport const getActivitiesReport = async (params = {}) => {\n  return getAllActivities(params);\n};\n\nexport const getActivityById = async (id) => {\n  const response = await apiClient.get(`/activities/${id}`);\n  return normalizeActivity(response.data);\n};\n\nexport const createActivity = async (data) => {\n  const payload = normalizeIncomingPayload(data);\n  const response = await apiClient.post(\"/activities\", payload);\n  return normalizeActivity(response.data);\n};\n\nexport const updateActivity = async (id, data) => {\n  const payload = normalizeIncomingPayload(data);\n  const response = await apiClient.patch(`/activities/${id}`, payload);\n  return normalizeActivity(response.data);\n};\n\nexport const deleteActivity = async (id) => {\n  const response = await apiClient.delete(`/activities/${id}`);\n  return response.data;\n};\n\nexport const getActivitiesByResponsible = async (userId) => {\n  const activities = await getAllActivities({ includeDetails: false });\n  return activities.filter((activity) => activity.createdBy?.id === userId);\n};\n\nexport const getActivitiesWithQuery = async (queryParams = {}) => {\n  const activities = await getAllActivities({\n    departmentId: queryParams.departmentId,\n    status: queryParams.status,\n  });\n\n  return {\n    activities,\n    total: activities.length,\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 583, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/department.js"],"sourcesContent":["import apiClient from \"./apiClient\";\n\nconst uniqueById = (items) => {\n  const map = new Map();\n  items.forEach((item) => {\n    if (item?.id) map.set(item.id, item);\n  });\n  return Array.from(map.values());\n};\n\nconst fromActivitiesFallback = async () => {\n  const response = await apiClient.get(\"/activities\");\n  const activities = Array.isArray(response.data) ? response.data : [];\n  const departments = activities\n    .map((activity) => activity.ownerDepartment)\n    .filter((department) => department?.id);\n\n  return uniqueById(departments);\n};\n\nconst isAuthzError = (error) =>\n  [401, 403].includes(error?.response?.status);\n\nexport const getAllDepartments = async (params = {}) => {\n  try {\n    const response = await apiClient.get(\"/departments\", { params });\n    return Array.isArray(response.data) ? response.data : [];\n  } catch (error) {\n    if (isAuthzError(error)) {\n      return fromActivitiesFallback();\n    }\n    throw error;\n  }\n};\n\nexport const getDepartmentById = async (id) => {\n  const response = await apiClient.get(`/departments/${id}`);\n  return response.data;\n};\n\nexport const createDepartment = async (payload) => {\n  const response = await apiClient.post(\"/departments\", payload);\n  return response.data;\n};\n\nexport const updateDepartment = async (id, payload) => {\n  const response = await apiClient.patch(`/departments/${id}`, payload);\n  return response.data;\n};\n\nexport const deleteDepartment = async (id) => {\n  const response = await apiClient.delete(`/departments/${id}`);\n  return response.data;\n};\n\nexport const getAllFaculties = async () => {\n  const response = await apiClient.get(\"/departments/faculties\");\n  return Array.isArray(response.data) ? response.data : [];\n};\n\nexport const getMajorsByDepartment = async (departmentId) => {\n  if (!departmentId) return [];\n  const response = await apiClient.get(`/departments/${departmentId}/majors`);\n  return Array.isArray(response.data) ? response.data : [];\n};\n\nexport const createMajor = async (departmentId, payload) => {\n  const response = await apiClient.post(`/departments/${departmentId}/majors`, payload);\n  return response.data;\n};\n\nexport const updateMajor = async (departmentId, majorId, payload) => {\n  const response = await apiClient.patch(\n    `/departments/${departmentId}/majors/${majorId}`,\n    payload,\n  );\n  return response.data;\n};\n\nexport const deleteMajor = async (departmentId, majorId) => {\n  const response = await apiClient.delete(`/departments/${departmentId}/majors/${majorId}`);\n  return response.data;\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA,MAAM,aAAa,CAAC;IAClB,MAAM,MAAM,IAAI;IAChB,MAAM,OAAO,CAAC,CAAC;QACb,IAAI,MAAM,IAAI,IAAI,GAAG,CAAC,KAAK,EAAE,EAAE;IACjC;IACA,OAAO,MAAM,IAAI,CAAC,IAAI,MAAM;AAC9B;AAEA,MAAM,yBAAyB;IAC7B,MAAM,WAAW,MAAM,uIAAS,CAAC,GAAG,CAAC;IACrC,MAAM,aAAa,MAAM,OAAO,CAAC,SAAS,IAAI,IAAI,SAAS,IAAI,GAAG,EAAE;IACpE,MAAM,cAAc,WACjB,GAAG,CAAC,CAAC,WAAa,SAAS,eAAe,EAC1C,MAAM,CAAC,CAAC,aAAe,YAAY;IAEtC,OAAO,WAAW;AACpB;AAEA,MAAM,eAAe,CAAC,QACpB;QAAC;QAAK;KAAI,CAAC,QAAQ,CAAC,OAAO,UAAU;AAEhC,MAAM,oBAAoB,OAAO,SAAS,CAAC,CAAC;IACjD,IAAI;QACF,MAAM,WAAW,MAAM,uIAAS,CAAC,GAAG,CAAC,gBAAgB;YAAE;QAAO;QAC9D,OAAO,MAAM,OAAO,CAAC,SAAS,IAAI,IAAI,SAAS,IAAI,GAAG,EAAE;IAC1D,EAAE,OAAO,OAAO;QACd,IAAI,aAAa,QAAQ;YACvB,OAAO;QACT;QACA,MAAM;IACR;AACF;AAEO,MAAM,oBAAoB,OAAO;IACtC,MAAM,WAAW,MAAM,uIAAS,CAAC,GAAG,CAAC,CAAC,aAAa,EAAE,IAAI;IACzD,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,mBAAmB,OAAO;IACrC,MAAM,WAAW,MAAM,uIAAS,CAAC,IAAI,CAAC,gBAAgB;IACtD,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,mBAAmB,OAAO,IAAI;IACzC,MAAM,WAAW,MAAM,uIAAS,CAAC,KAAK,CAAC,CAAC,aAAa,EAAE,IAAI,EAAE;IAC7D,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,mBAAmB,OAAO;IACrC,MAAM,WAAW,MAAM,uIAAS,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,IAAI;IAC5D,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,kBAAkB;IAC7B,MAAM,WAAW,MAAM,uIAAS,CAAC,GAAG,CAAC;IACrC,OAAO,MAAM,OAAO,CAAC,SAAS,IAAI,IAAI,SAAS,IAAI,GAAG,EAAE;AAC1D;AAEO,MAAM,wBAAwB,OAAO;IAC1C,IAAI,CAAC,cAAc,OAAO,EAAE;IAC5B,MAAM,WAAW,MAAM,uIAAS,CAAC,GAAG,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;IAC1E,OAAO,MAAM,OAAO,CAAC,SAAS,IAAI,IAAI,SAAS,IAAI,GAAG,EAAE;AAC1D;AAEO,MAAM,cAAc,OAAO,cAAc;IAC9C,MAAM,WAAW,MAAM,uIAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC,EAAE;IAC7E,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,cAAc,OAAO,cAAc,SAAS;IACvD,MAAM,WAAW,MAAM,uIAAS,CAAC,KAAK,CACpC,CAAC,aAAa,EAAE,aAAa,QAAQ,EAAE,SAAS,EAChD;IAEF,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,cAAc,OAAO,cAAc;IAC9C,MAAM,WAAW,MAAM,uIAAS,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,aAAa,QAAQ,EAAE,SAAS;IACxF,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 678, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/typeActivity.js"],"sourcesContent":["import apiClient from \"./apiClient\";\n\nexport const getAllTypeActivities = async (params = {}) => {\n  const response = await apiClient.get(\"/activity-types\", { params });\n  return Array.isArray(response.data) ? response.data : [];\n};\n\nexport const getTypeActivityById = async (id) => {\n  const response = await apiClient.get(`/activity-types/${id}`);\n  return response.data;\n};\n\nexport const createTypeActivity = async (payload) => {\n  const response = await apiClient.post(\"/activity-types\", payload);\n  return response.data;\n};\n\nexport const updateTypeActivity = async (id, payload) => {\n  const response = await apiClient.patch(`/activity-types/${id}`, payload);\n  return response.data;\n};\n\nexport const deleteTypeActivity = async (id) => {\n  const response = await apiClient.delete(`/activity-types/${id}`);\n  return response.data;\n};\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEO,MAAM,uBAAuB,OAAO,SAAS,CAAC,CAAC;IACpD,MAAM,WAAW,MAAM,uIAAS,CAAC,GAAG,CAAC,mBAAmB;QAAE;IAAO;IACjE,OAAO,MAAM,OAAO,CAAC,SAAS,IAAI,IAAI,SAAS,IAAI,GAAG,EAAE;AAC1D;AAEO,MAAM,sBAAsB,OAAO;IACxC,MAAM,WAAW,MAAM,uIAAS,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,IAAI;IAC5D,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,qBAAqB,OAAO;IACvC,MAAM,WAAW,MAAM,uIAAS,CAAC,IAAI,CAAC,mBAAmB;IACzD,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,qBAAqB,OAAO,IAAI;IAC3C,MAAM,WAAW,MAAM,uIAAS,CAAC,KAAK,CAAC,CAAC,gBAAgB,EAAE,IAAI,EAAE;IAChE,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,qBAAqB,OAAO;IACvC,MAAM,WAAW,MAAM,uIAAS,CAAC,MAAM,CAAC,CAAC,gBAAgB,EAAE,IAAI;IAC/D,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 718, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/app/admin/event/page.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport {\n  Button,\n  Card,\n  Form,\n  Input,\n  Modal,\n  Popconfirm,\n  Select,\n  Space,\n  Spin,\n  Table,\n  Tag,\n  message,\n} from \"antd\";\nimport { Edit, Eye, Plus, Search, Trash2 } from \"lucide-react\";\nimport {\n  createActivity,\n  deleteActivity,\n  getAllActivities,\n  updateActivity,\n} from \"@/services/activity\";\nimport {\n  getAllDepartments,\n  getMajorsByDepartment,\n} from \"@/services/department\";\nimport { getAllTypeActivities } from \"@/services/typeActivity\";\n\nconst managerRoles = [\"FACULTY_ADMIN\", \"SUPER_ADMIN\"];\nconst activityStatuses = [\n  { value: \"OPEN_REGISTRATION\", label: \"เปิดรับสมัคร\" },\n  { value: \"IN_PROGRESS\", label: \"กำลังดำเนินการ\" },\n  { value: \"CLOSED\", label: \"ปิดกิจกรรม\" },\n  { value: \"CANCELLED\", label: \"ยกเลิกกิจกรรม\" },\n];\n\nconst evidenceTypeOptions = [\n  { value: \"BOTH\", label: \"ทั่วไป (รูปภาพหรือ PDF)\" },\n  { value: \"PHOTO\", label: \"รูปภาพเท่านั้น\" },\n  { value: \"PDF\", label: \"PDF เท่านั้น\" },\n];\n\nconst uniqueById = (items) => {\n  const map = new Map();\n  items.forEach((item) => {\n    if (item?.id) map.set(item.id, item);\n  });\n  return Array.from(map.values());\n};\n\nconst toArray = (value) => {\n  if (!value) return [];\n  if (Array.isArray(value)) return value.filter(Boolean);\n  return [value];\n};\n\nconst toDateTimeInput = (value) => {\n  if (!value) return undefined;\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) return undefined;\n  const offsetMs = date.getTimezoneOffset() * 60 * 1000;\n  return new Date(date.getTime() - offsetMs).toISOString().slice(0, 16);\n};\n\nconst toIso = (value) => {\n  if (!value) return null;\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) return null;\n  return date.toISOString();\n};\n\nconst toDepartmentList = (event) => {\n  if (Array.isArray(event.departments) && event.departments.length > 0) {\n    return event.departments;\n  }\n  if (event.department?.id) {\n    return [event.department];\n  }\n  return [];\n};\n\nconst toMajorJoinList = (event) => {\n  if (Array.isArray(event.majorJoins)) {\n    return event.majorJoins;\n  }\n  return [];\n};\n\nexport default function AdminEventPage() {\n  const [form] = Form.useForm();\n  const watchedDepartmentIds = Form.useWatch(\"departmentIds\", form);\n\n  const [sessionUser, setSessionUser] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const [events, setEvents] = useState([]);\n  const [departments, setDepartments] = useState([]);\n  const [majorOptions, setMajorOptions] = useState([]);\n  const [typeActivities, setTypeActivities] = useState([]);\n\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedDepartment, setSelectedDepartment] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n\n  const [isFormModalOpen, setIsFormModalOpen] = useState(false);\n  const [isViewModalOpen, setIsViewModalOpen] = useState(false);\n  const [editingEvent, setEditingEvent] = useState(null);\n  const [viewingEvent, setViewingEvent] = useState(null);\n\n  const isManager = managerRoles.includes(sessionUser?.role);\n  const scopedDepartmentId = !isManager ? sessionUser?.departmentId || null : null;\n\n  const loadMajorsByDepartments = async (departmentIds, keepCurrentSelection = true) => {\n    const ids = uniqueById(\n      toArray(departmentIds).map((id) => ({ id })),\n    ).map((item) => item.id);\n\n    if (ids.length === 0) {\n      setMajorOptions([]);\n      if (!keepCurrentSelection) {\n        form.setFieldValue(\"majorIds\", []);\n      }\n      return;\n    }\n\n    try {\n      const allMajors = (\n        await Promise.all(\n          ids.map(async (departmentId) => {\n            try {\n              return await getMajorsByDepartment(departmentId);\n            } catch (_error) {\n              return [];\n            }\n          }),\n        )\n      ).flat();\n\n      const uniqueMajors = uniqueById(allMajors).sort((a, b) =>\n        String(a.code || \"\").localeCompare(String(b.code || \"\"), \"th\"),\n      );\n\n      setMajorOptions(uniqueMajors);\n\n      if (keepCurrentSelection) {\n        const selectedMajorIds = toArray(form.getFieldValue(\"majorIds\"));\n        const majorSet = new Set(uniqueMajors.map((item) => item.id));\n        form.setFieldValue(\n          \"majorIds\",\n          selectedMajorIds.filter((majorId) => majorSet.has(majorId)),\n        );\n      }\n    } catch (_error) {\n      setMajorOptions([]);\n    }\n  };\n\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const user = (() => {\n        const raw = localStorage.getItem(\"user\");\n        return raw ? JSON.parse(raw) : null;\n      })();\n      setSessionUser(user);\n\n      const canListDepartments = managerRoles.includes(user?.role);\n      const [activitiesData, typeData, departmentData] = await Promise.all([\n        getAllActivities(),\n        getAllTypeActivities(),\n        canListDepartments ? getAllDepartments() : Promise.resolve([]),\n      ]);\n\n      setEvents(Array.isArray(activitiesData) ? activitiesData : []);\n      setTypeActivities(Array.isArray(typeData) ? typeData : []);\n\n      if (canListDepartments) {\n        setDepartments(Array.isArray(departmentData) ? departmentData : []);\n      } else if (user?.department?.id) {\n        setDepartments([user.department]);\n      } else {\n        const eventDepartments = uniqueById(\n          (Array.isArray(activitiesData) ? activitiesData : [])\n            .flatMap((item) => toDepartmentList(item))\n            .filter((item) => item?.id),\n        );\n        setDepartments(eventDepartments);\n      }\n    } catch (error) {\n      const text = error?.response?.data?.message || \"ไม่สามารถโหลดข้อมูลกิจกรรมได้\";\n      message.error(text);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (!isFormModalOpen) return;\n    loadMajorsByDepartments(toArray(watchedDepartmentIds), true);\n  }, [watchedDepartmentIds, isFormModalOpen]);\n\n  const filteredEvents = useMemo(() => {\n    const query = searchQuery.trim().toLowerCase();\n\n    return events.filter((event) => {\n      if (scopedDepartmentId) {\n        const scopedDepartmentIds = new Set(toDepartmentList(event).map((item) => item.id));\n        if (!scopedDepartmentIds.has(scopedDepartmentId)) {\n          return false;\n        }\n      }\n\n      if (query) {\n        const departmentNames = toDepartmentList(event)\n          .map((item) => String(item?.name || \"\"))\n          .join(\" \")\n          .toLowerCase();\n        const matchedSearch =\n          String(event.name || event.title || \"\").toLowerCase().includes(query) ||\n          departmentNames.includes(query);\n\n        if (!matchedSearch) return false;\n      }\n\n      if (selectedDepartment) {\n        const departmentIds = new Set(toDepartmentList(event).map((item) => item.id));\n        if (!departmentIds.has(selectedDepartment)) return false;\n      }\n\n      if (selectedCategory) {\n        if ((event.typeActivity?.id || event.typeActivityId) !== selectedCategory) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }, [events, searchQuery, selectedDepartment, selectedCategory, scopedDepartmentId]);\n\n  const summary = useMemo(\n    () => ({\n      totalActivities: filteredEvents.length,\n      totalHours: filteredEvents.reduce(\n        (sum, event) => sum + Number(event.hour || event.hours || 0),\n        0,\n      ),\n    }),\n    [filteredEvents],\n  );\n\n  const openCreateModal = async () => {\n    setEditingEvent(null);\n    form.resetFields();\n\n    const defaultDepartmentIds = scopedDepartmentId ? [scopedDepartmentId] : [];\n    form.setFieldsValue({\n      title: \"\",\n      note: \"\",\n      location: \"\",\n      activityTypeId: undefined,\n      requiredEvidenceType: \"BOTH\",\n      hours: 1,\n      capacity: 1,\n      startAt: undefined,\n      endAt: undefined,\n      applyOpenAt: undefined,\n      applyCloseAt: undefined,\n      status: \"OPEN_REGISTRATION\",\n      departmentIds: defaultDepartmentIds,\n      majorIds: [],\n    });\n\n    await loadMajorsByDepartments(defaultDepartmentIds, false);\n    setIsFormModalOpen(true);\n  };\n\n  const openEditModal = async (record) => {\n    setEditingEvent(record);\n\n    const rawDepartmentIds = toArray(record.departmentIds);\n    const departmentIds =\n      rawDepartmentIds.length > 0\n        ? rawDepartmentIds\n        : toDepartmentList(record).map((item) => item.id);\n\n    const majorIds =\n      toArray(record.majorIds).length > 0\n        ? toArray(record.majorIds)\n        : toMajorJoinList(record).map((item) => item.majorId);\n\n    const finalDepartmentIds = scopedDepartmentId ? [scopedDepartmentId] : departmentIds;\n\n    form.setFieldsValue({\n      title: record.title || record.name || \"\",\n      note: record.note || record.description || \"\",\n      location: record.location || record.address || \"\",\n      activityTypeId: record.typeActivity?.id || record.typeActivityId,\n      requiredEvidenceType: record.requiredEvidenceType || \"BOTH\",\n      hours: record.hours || record.hour || 1,\n      capacity: record.capacity || record.maxPeopleCount || 1,\n      startAt: toDateTimeInput(record.startAt || record.startDate),\n      endAt: toDateTimeInput(record.endAt || record.endDate),\n      applyOpenAt: toDateTimeInput(record.applyOpenAt || record.applyOpen),\n      applyCloseAt: toDateTimeInput(record.applyCloseAt || record.applyClose || record.date),\n      status: record.status || \"OPEN_REGISTRATION\",\n      departmentIds: finalDepartmentIds,\n      majorIds,\n    });\n\n    await loadMajorsByDepartments(finalDepartmentIds, false);\n    setIsFormModalOpen(true);\n  };\n\n  const openViewModal = (record) => {\n    setViewingEvent(record);\n    setIsViewModalOpen(true);\n  };\n\n  const handleDelete = async (record) => {\n    try {\n      await deleteActivity(record.id);\n      message.success(`ลบกิจกรรม \"${record.name || record.title}\" สำเร็จ`);\n      await fetchData();\n    } catch (error) {\n      const text = error?.response?.data?.message || \"ไม่สามารถลบกิจกรรมได้\";\n      message.error(text);\n    }\n  };\n\n  const buildPayload = (values) => {\n    const selectedDepartmentIds = uniqueById(\n      toArray(values.departmentIds).map((id) => ({ id })),\n    ).map((item) => item.id);\n\n    const departmentIds =\n      scopedDepartmentId && !isManager ? [scopedDepartmentId] : selectedDepartmentIds;\n\n    const majorIds = uniqueById(\n      toArray(values.majorIds).map((id) => ({ id })),\n    ).map((item) => item.id);\n\n    return {\n      title: values.title,\n      note: values.note || \"\",\n      location: values.location,\n      activityTypeId: values.activityTypeId,\n      requiredEvidenceType: values.requiredEvidenceType || \"BOTH\",\n      hours: Number(values.hours || 1),\n      capacity: Number(values.capacity || 1),\n      startAt: toIso(values.startAt),\n      endAt: toIso(values.endAt),\n      applyOpenAt: toIso(values.applyOpenAt || values.startAt),\n      applyCloseAt: toIso(values.applyCloseAt || values.startAt),\n      status: values.status || \"OPEN_REGISTRATION\",\n      departmentIds,\n      majorIds,\n    };\n  };\n\n  const handleSubmit = async (values) => {\n    setSaving(true);\n    try {\n      const payload = buildPayload(values);\n\n      if (editingEvent) {\n        await updateActivity(editingEvent.id, payload);\n        message.success(\"แก้ไขกิจกรรมสำเร็จ\");\n      } else {\n        await createActivity(payload);\n        message.success(\"เพิ่มกิจกรรมสำเร็จ\");\n      }\n\n      setIsFormModalOpen(false);\n      setEditingEvent(null);\n      form.resetFields();\n      await fetchData();\n    } catch (error) {\n      const text =\n        error?.response?.data?.message ||\n        (editingEvent ? \"ไม่สามารถแก้ไขกิจกรรมได้\" : \"ไม่สามารถเพิ่มกิจกรรมได้\");\n      message.error(text);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const departmentFilterOptions = useMemo(() => {\n    if (departments.length > 0) return departments;\n    return uniqueById(events.flatMap((event) => toDepartmentList(event)));\n  }, [departments, events]);\n\n  const columns = [\n    {\n      title: \"ลำดับ\",\n      width: 80,\n      align: \"center\",\n      render: (_, __, index) => index + 1,\n    },\n    {\n      title: \"กิจกรรม\",\n      dataIndex: \"name\",\n      render: (_, row) => row.name || row.title || \"-\",\n    },\n    {\n      title: \"ภาควิชา\",\n      width: 260,\n      render: (_, row) => {\n        const departmentList = toDepartmentList(row);\n        return (\n          <div className=\"flex flex-wrap gap-1\">\n            {departmentList.length > 0 ? (\n              departmentList.map((department) => (\n                <Tag key={department.id} color=\"blue\">\n                  {department.name}\n                </Tag>\n              ))\n            ) : (\n              <span className=\"text-gray-400\">-</span>\n            )}\n          </div>\n        );\n      },\n    },\n    {\n      title: \"สาขาวิชา\",\n      width: 280,\n      render: (_, row) => {\n        const majorJoins = toMajorJoinList(row);\n        if (majorJoins.length === 0) {\n          return <span className=\"text-gray-500\">ทุกสาขาในภาคที่เลือก</span>;\n        }\n\n        return (\n          <div className=\"flex flex-wrap gap-1\">\n            {majorJoins.map((item) => (\n              <Tag key={item.majorId} color=\"#0A894C\">\n                {item.major?.code ? `${item.major.code} - ` : \"\"}\n                {item.major?.name || item.majorId}\n              </Tag>\n            ))}\n          </div>\n        );\n      },\n    },\n    {\n      title: \"ประเภทกิจกรรม\",\n      width: 180,\n      render: (_, row) => (\n        <Tag color=\"green\">{row.typeActivity?.name || \"ยังไม่กำหนดประเภท\"}</Tag>\n      ),\n    },\n    {\n      title: \"นักศึกษา\",\n      width: 130,\n      align: \"center\",\n      render: (_, row) => {\n        const joined = Number(row.peopleCount || 0);\n        const max = Number(row.maxPeopleCount || row.maxStudents || 0);\n        return (\n          <span className=\"font-medium\" style={{ color: \"#0A894C\" }}>\n            {joined}/{max}\n          </span>\n        );\n      },\n    },\n    {\n      title: \"จัดการ\",\n      width: 160,\n      align: \"center\",\n      render: (_, row) => (\n        <Space>\n          <Button\n            type=\"text\"\n            icon={<Eye size={18} />}\n            onClick={() => openViewModal(row)}\n            title=\"ดูข้อมูล\"\n          />\n          <Button\n            type=\"text\"\n            icon={<Edit size={18} />}\n            onClick={() => openEditModal(row)}\n            title=\"แก้ไข\"\n          />\n          <Popconfirm\n            title=\"ยืนยันการลบ\"\n            description=\"ต้องการลบกิจกรรมนี้หรือไม่\"\n            onConfirm={() => handleDelete(row)}\n            okText=\"ลบ\"\n            cancelText=\"ยกเลิก\"\n          >\n            <Button danger type=\"text\" icon={<Trash2 size={18} />} title=\"ลบ\" />\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  return (\n    <Spin spinning={loading}>\n      <div>\n        <Card className=\"mb-4\">\n          <div className=\"grid grid-cols-12 gap-3\">\n            <div className=\"col-span-12 lg:col-span-4\">\n              <Input\n                placeholder=\"ค้นหาชื่อกิจกรรมหรือภาควิชา\"\n                value={searchQuery}\n                onChange={(event) => setSearchQuery(event.target.value)}\n                prefix={<Search size={16} />}\n              />\n            </div>\n            <div className=\"col-span-12 lg:col-span-3\">\n              <Select\n                allowClear\n                placeholder=\"กรองตามภาควิชา\"\n                value={selectedDepartment}\n                onChange={setSelectedDepartment}\n                style={{ width: \"100%\" }}\n                options={departmentFilterOptions.map((item) => ({\n                  value: item.id,\n                  label: item.name,\n                }))}\n              />\n            </div>\n            <div className=\"col-span-12 lg:col-span-3\">\n              <Select\n                allowClear\n                placeholder=\"กรองตามประเภทกิจกรรม\"\n                value={selectedCategory}\n                onChange={setSelectedCategory}\n                style={{ width: \"100%\" }}\n                options={typeActivities.map((item) => ({\n                  value: item.id,\n                  label: `${item.code} - ${item.name}`,\n                }))}\n              />\n            </div>\n            <div className=\"col-span-12 lg:col-span-2 flex justify-end\">\n              <Button\n                type=\"primary\"\n                icon={<Plus size={16} />}\n                onClick={openCreateModal}\n                style={{ backgroundColor: \"#0A894C\", borderColor: \"#0A894C\" }}\n              >\n                เพิ่มกิจกรรม\n              </Button>\n            </div>\n          </div>\n        </Card>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n          <Card>\n            <div className=\"text-sm text-gray-500\">จำนวนกิจกรรม</div>\n            <div className=\"text-3xl font-bold text-[#0A894C]\">{summary.totalActivities}</div>\n          </Card>\n          <Card>\n            <div className=\"text-sm text-gray-500\">จำนวนชั่วโมงรวม</div>\n            <div className=\"text-3xl font-bold text-[#0A894C]\">{summary.totalHours}</div>\n          </Card>\n        </div>\n\n        <Card>\n          <Table\n            rowKey=\"id\"\n            columns={columns}\n            dataSource={filteredEvents}\n            pagination={{ pageSize: 10, showSizeChanger: true }}\n            scroll={{ x: 1200 }}\n          />\n        </Card>\n\n        <Modal\n          title={editingEvent ? \"แก้ไขกิจกรรม\" : \"เพิ่มกิจกรรม\"}\n          open={isFormModalOpen}\n          onCancel={() => {\n            setIsFormModalOpen(false);\n            setEditingEvent(null);\n            form.resetFields();\n          }}\n          onOk={() => form.submit()}\n          confirmLoading={saving}\n          okText={editingEvent ? \"บันทึก\" : \"สร้าง\"}\n          cancelText=\"ยกเลิก\"\n          width={920}\n        >\n          <Form form={form} layout=\"vertical\" onFinish={handleSubmit}>\n            <Form.Item\n              label=\"ชื่อกิจกรรม\"\n              name=\"title\"\n              rules={[{ required: true, message: \"กรุณากรอกชื่อกิจกรรม\" }]}\n            >\n              <Input />\n            </Form.Item>\n\n            <Form.Item\n              label=\"ประเภทกิจกรรม\"\n              name=\"activityTypeId\"\n              rules={[{ required: true, message: \"กรุณาเลือกประเภทกิจกรรม\" }]}\n            >\n              <Select\n                placeholder=\"เลือกประเภทกิจกรรม\"\n                options={typeActivities.map((item) => ({\n                  value: item.id,\n                  label: `${item.code} - ${item.name}`,\n                }))}\n              />\n            </Form.Item>\n\n            <Form.Item\n              label=\"ภาควิชา (เลือกได้หลายภาควิชา)\"\n              name=\"departmentIds\"\n              rules={[{ required: true, message: \"กรุณาเลือกภาควิชาอย่างน้อย 1 ภาควิชา\" }]}\n            >\n              <Select\n                mode=\"multiple\"\n                disabled={!isManager}\n                placeholder={isManager ? \"เลือกภาควิชา\" : \"ระบบกำหนดภาควิชาตามสิทธิ์\"}\n                options={departments.map((item) => ({\n                  value: item.id,\n                  label: `${item.code ? `${item.code} - ` : \"\"}${item.name}`,\n                }))}\n              />\n            </Form.Item>\n\n            <Form.Item label=\"สาขาวิชา (ไม่เลือก = ทุกสาขาในภาคที่เลือก)\" name=\"majorIds\">\n              <Select\n                mode=\"multiple\"\n                placeholder=\"เลือกสาขาวิชา\"\n                options={majorOptions.map((item) => ({\n                  value: item.id,\n                  label: `${item.code} - ${item.name}`,\n                }))}\n              />\n            </Form.Item>\n\n            <Form.Item\n              label=\"สถานที่\"\n              name=\"location\"\n              rules={[{ required: true, message: \"กรุณากรอกสถานที่\" }]}\n            >\n              <Input />\n            </Form.Item>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <Form.Item\n                label=\"วันเวลาเริ่มกิจกรรม\"\n                name=\"startAt\"\n                rules={[{ required: true, message: \"กรุณาเลือกวันเวลาเริ่ม\" }]}\n              >\n                <Input type=\"datetime-local\" />\n              </Form.Item>\n              <Form.Item\n                label=\"วันเวลาสิ้นสุดกิจกรรม\"\n                name=\"endAt\"\n                rules={[{ required: true, message: \"กรุณาเลือกวันเวลาสิ้นสุด\" }]}\n              >\n                <Input type=\"datetime-local\" />\n              </Form.Item>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <Form.Item\n                label=\"วันเวลาเปิดรับสมัคร\"\n                name=\"applyOpenAt\"\n                rules={[{ required: true, message: \"กรุณาเลือกวันเวลาเปิดรับสมัคร\" }]}\n              >\n                <Input type=\"datetime-local\" />\n              </Form.Item>\n              <Form.Item\n                label=\"วันเวลาปิดรับสมัคร\"\n                name=\"applyCloseAt\"\n                rules={[{ required: true, message: \"กรุณาเลือกวันเวลาปิดรับสมัคร\" }]}\n              >\n                <Input type=\"datetime-local\" />\n              </Form.Item>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <Form.Item\n                label=\"จำนวนชั่วโมงกิจกรรม\"\n                name=\"hours\"\n                rules={[{ required: true, message: \"กรุณากรอกจำนวนชั่วโมง\" }]}\n              >\n                <Input type=\"number\" min={1} />\n              </Form.Item>\n              <Form.Item\n                label=\"จำนวนนักศึกษาสูงสุด\"\n                name=\"capacity\"\n                rules={[{ required: true, message: \"กรุณากรอกจำนวนรับสูงสุด\" }]}\n              >\n                <Input type=\"number\" min={1} />\n              </Form.Item>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              <Form.Item\n                label=\"หลักฐานที่ต้องใช้\"\n                name=\"requiredEvidenceType\"\n                rules={[{ required: true, message: \"กรุณาเลือกประเภทหลักฐาน\" }]}\n              >\n                <Select options={evidenceTypeOptions} />\n              </Form.Item>\n              <Form.Item\n                label=\"สถานะกิจกรรม\"\n                name=\"status\"\n                rules={[{ required: true, message: \"กรุณาเลือกสถานะกิจกรรม\" }]}\n              >\n                <Select options={activityStatuses} />\n              </Form.Item>\n            </div>\n\n            <Form.Item label=\"รายละเอียดเพิ่มเติม\" name=\"note\">\n              <Input.TextArea rows={4} />\n            </Form.Item>\n          </Form>\n        </Modal>\n\n        <Modal\n          title=\"รายละเอียดกิจกรรม\"\n          open={isViewModalOpen}\n          onCancel={() => {\n            setIsViewModalOpen(false);\n            setViewingEvent(null);\n          }}\n          footer={null}\n          width={780}\n        >\n          {viewingEvent && (\n            <div className=\"space-y-3\">\n              <div>\n                <div className=\"text-gray-500 text-sm\">ชื่อกิจกรรม</div>\n                <div className=\"font-medium\">{viewingEvent.name || viewingEvent.title}</div>\n              </div>\n              <div>\n                <div className=\"text-gray-500 text-sm\">ประเภทกิจกรรม</div>\n                <Tag color=\"green\">{viewingEvent.typeActivity?.name || \"ยังไม่กำหนดประเภท\"}</Tag>\n              </div>\n              <div>\n                <div className=\"text-gray-500 text-sm\">ภาควิชา</div>\n                <div className=\"flex flex-wrap gap-1 mt-1\">\n                  {toDepartmentList(viewingEvent).map((item) => (\n                    <Tag key={item.id} color=\"blue\">\n                      {item.name}\n                    </Tag>\n                  ))}\n                </div>\n              </div>\n              <div>\n                <div className=\"text-gray-500 text-sm\">สาขาวิชา</div>\n                <div className=\"flex flex-wrap gap-1 mt-1\">\n                  {toMajorJoinList(viewingEvent).length > 0 ? (\n                    toMajorJoinList(viewingEvent).map((item) => (\n                      <Tag key={item.majorId} color=\"#0A894C\">\n                        {item.major?.code ? `${item.major.code} - ` : \"\"}\n                        {item.major?.name || item.majorId}\n                      </Tag>\n                    ))\n                  ) : (\n                    <span className=\"text-gray-500 text-sm\">ทุกสาขาในภาคที่เลือก</span>\n                  )}\n                </div>\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                <div>\n                  <div className=\"text-gray-500 text-sm\">วันเวลาเริ่มกิจกรรม</div>\n                  <div>{toDateTimeInput(viewingEvent.startAt || viewingEvent.startDate) || \"-\"}</div>\n                </div>\n                <div>\n                  <div className=\"text-gray-500 text-sm\">วันเวลาสิ้นสุดกิจกรรม</div>\n                  <div>{toDateTimeInput(viewingEvent.endAt || viewingEvent.endDate) || \"-\"}</div>\n                </div>\n              </div>\n              <div>\n                <div className=\"text-gray-500 text-sm\">สถานที่</div>\n                <div>{viewingEvent.location || viewingEvent.address || \"-\"}</div>\n              </div>\n              <div>\n                <div className=\"text-gray-500 text-sm\">รายละเอียดเพิ่มเติม</div>\n                <div>{viewingEvent.note || viewingEvent.description || \"-\"}</div>\n              </div>\n            </div>\n          )}\n        </Modal>\n      </div>\n    </Spin>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}