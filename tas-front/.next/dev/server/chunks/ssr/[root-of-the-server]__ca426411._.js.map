{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/apiClient.js"],"sourcesContent":["// create axios instance with default config\nimport axios from \"axios\";\n\nconst baseURL = process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:4556/api\";\n\nconst apiClient = axios.create({\n  baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nconst getToken = () => (typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null);\nconst getRefreshToken = () =>\n  typeof window !== \"undefined\" ? localStorage.getItem(\"refreshToken\") : null;\n\nconst setTokens = (accessToken, refreshToken) => {\n  if (typeof window === \"undefined\") return;\n  if (accessToken) localStorage.setItem(\"token\", accessToken);\n  if (refreshToken) localStorage.setItem(\"refreshToken\", refreshToken);\n};\n\nconst clearTokens = () => {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"refreshToken\");\n};\n\napiClient.interceptors.request.use(\n  (config) => {\n    const token = getToken();\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error),\n);\n\nlet isRefreshing = false;\nlet pendingRequests = [];\n\nconst processQueue = (error, token = null) => {\n  pendingRequests.forEach((promise) => {\n    if (error) {\n      promise.reject(error);\n    } else {\n      promise.resolve(token);\n    }\n  });\n  pendingRequests = [];\n};\n\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status !== 401 || originalRequest?._retry) {\n      return Promise.reject(error);\n    }\n\n    const refreshToken = getRefreshToken();\n    if (!refreshToken) {\n      clearTokens();\n      return Promise.reject(error);\n    }\n\n    if (isRefreshing) {\n      return new Promise((resolve, reject) => {\n        pendingRequests.push({ resolve, reject });\n      })\n        .then((token) => {\n          originalRequest.headers.Authorization = `Bearer ${token}`;\n          return apiClient(originalRequest);\n        })\n        .catch((refreshError) => Promise.reject(refreshError));\n    }\n\n    originalRequest._retry = true;\n    isRefreshing = true;\n\n    try {\n      const response = await axios.post(`${baseURL}/auth/refresh`, { refreshToken });\n      const newAccessToken = response.data?.accessToken;\n      const newRefreshToken = response.data?.refreshToken || refreshToken;\n\n      setTokens(newAccessToken, newRefreshToken);\n      processQueue(null, newAccessToken);\n\n      originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n      return apiClient(originalRequest);\n    } catch (refreshError) {\n      processQueue(refreshError, null);\n      clearTokens();\n      if (typeof window !== \"undefined\") {\n        localStorage.removeItem(\"user\");\n      }\n      return Promise.reject(refreshError);\n    } finally {\n      isRefreshing = false;\n    }\n  },\n);\n\nexport default apiClient;\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAC5C;;AAEA,MAAM,UAAU,iEAAwC;AAExD,MAAM,YAAY,gJAAK,CAAC,MAAM,CAAC;IAC7B;IACA,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,MAAM,WAAW,IAAO,sCAAgC,0BAAgC;AACxF,MAAM,kBAAkB,IACtB,sCAAgC,0BAAuC;AAEzE,MAAM,YAAY,CAAC,aAAa;IAC9B,wCAAmC;;;AAGrC;AAEA,MAAM,cAAc;IAClB,wCAAmC;;;AAGrC;AAEA,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ;IACd;;IAGA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,IAAI,eAAe;AACnB,IAAI,kBAAkB,EAAE;AAExB,MAAM,eAAe,CAAC,OAAO,QAAQ,IAAI;IACvC,gBAAgB,OAAO,CAAC,CAAC;QACvB,IAAI,OAAO;YACT,QAAQ,MAAM,CAAC;QACjB,OAAO;YACL,QAAQ,OAAO,CAAC;QAClB;IACF;IACA,kBAAkB,EAAE;AACtB;AAEA,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,iBAAiB,QAAQ;QAC7D,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,MAAM,eAAe;IACrB,wCAAmB;QACjB;QACA,OAAO,QAAQ,MAAM,CAAC;IACxB;;;AAoCF;uCAGa"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/compat.js"],"sourcesContent":["const ROLE_TO_USER_TYPE = {\n  STUDENT: \"student\",\n  TEACHER: \"teacher\",\n  DEPT_STAFF: \"admin\",\n  FACULTY_ADMIN: \"admin\",\n  SUPER_ADMIN: \"admin\",\n};\n\nconst ACTIVITY_STATUS_TO_API = {\n  planned: \"OPEN_REGISTRATION\",\n  inprogress: \"IN_PROGRESS\",\n  completed: \"CLOSED\",\n  cancelled: \"CANCELLED\",\n};\n\nconst LEGACY_ATTENDANCE_ACTION = {\n  APPLIED: \"request-revision\",\n  APPROVED: \"approve\",\n  REJECTED: \"request-revision\",\n  REVISION_REQUIRED: \"request-revision\",\n  CANCELLED: \"request-revision\",\n  NO_SHOW: \"request-revision\",\n  SUBMITTED: \"request-revision\",\n  COMPLETED: \"approve\",\n  joined: \"request-revision\",\n  accepted: \"approve\",\n  approved: \"approve\",\n  completed: \"approve\",\n  rejected: \"request-revision\",\n  uncompleted: \"request-revision\",\n  Inprogress: \"request-revision\",\n};\n\nfunction safeString(value) {\n  return value === null || value === undefined ? \"\" : String(value);\n}\n\nexport function splitFullName(fullname) {\n  const clean = safeString(fullname).trim();\n  if (!clean) {\n    return { firstName: \"User\", lastName: \"\" };\n  }\n  const parts = clean.split(/\\s+/);\n  const firstName = parts.shift() || \"User\";\n  const lastName = parts.join(\" \");\n  return { firstName, lastName };\n}\n\nexport function roleToUserType(role) {\n  return ROLE_TO_USER_TYPE[role] || \"student\";\n}\n\nexport function mapActivityStatusFromApi(status) {\n  return status || \"OPEN_REGISTRATION\";\n}\n\nexport function mapActivityStatusToApi(status) {\n  return ACTIVITY_STATUS_TO_API[status] || status || undefined;\n}\n\nexport function mapApplicationStatusFromApi(status) {\n  return status || \"APPLIED\";\n}\n\nexport function mapLegacyAttendanceAction(status) {\n  return LEGACY_ATTENDANCE_ACTION[status] || \"request-revision\";\n}\n\nexport function mapEvidenceTypeToTypeActivity(requiredEvidenceType) {\n  const mapping = {\n    PHOTO: { id: \"PHOTO\", name: \"ใช้รูปภาพ\" },\n    PDF: { id: \"PDF\", name: \"ใช้ PDF\" },\n    BOTH: { id: \"BOTH\", name: \"ทั่วไป\" },\n  };\n  return mapping[requiredEvidenceType] || mapping.BOTH;\n}\n\nfunction uniqueById(items) {\n  const map = new Map();\n  items.forEach((item) => {\n    if (item?.id) {\n      map.set(item.id, item);\n    }\n  });\n  return Array.from(map.values());\n}\n\nfunction normalizeTargetDepartments(activity) {\n  const targetDepartments = Array.isArray(activity?.targetDepartments)\n    ? activity.targetDepartments\n    : [];\n\n  const mappedTargets = targetDepartments\n    .map((item) => ({\n      departmentId: item?.departmentId || item?.department?.id || null,\n      department: item?.department || null,\n    }))\n    .filter((item) => item.departmentId);\n\n  if (mappedTargets.length > 0) {\n    return mappedTargets;\n  }\n\n  if (activity?.ownerDepartmentId || activity?.ownerDepartment?.id) {\n    return [\n      {\n        departmentId: activity.ownerDepartmentId || activity.ownerDepartment?.id,\n        department: activity.ownerDepartment || null,\n      },\n    ];\n  }\n\n  return [];\n}\n\nfunction normalizeTargetMajors(activity) {\n  const targetMajors = Array.isArray(activity?.targetMajors)\n    ? activity.targetMajors\n    : Array.isArray(activity?.majorJoins)\n      ? activity.majorJoins\n      : [];\n\n  return targetMajors\n    .map((item) => ({\n      majorId: item?.majorId || item?.major?.id || null,\n      major: item?.major || null,\n    }))\n    .filter((item) => item.majorId);\n}\n\nexport function normalizeUser(user) {\n  if (!user) return null;\n\n  const fullNameFromApi = [user.firstName, user.lastName].filter(Boolean).join(\" \").trim();\n  const fullname = user.fullname || fullNameFromApi || user.username || user.email || \"Unknown\";\n\n  const faculty =\n    user.faculty ||\n    user.studentProfile?.faculty ||\n    user.teacherProfile?.faculty ||\n    user.staffProfile?.faculty ||\n    null;\n\n  const department =\n    user.department ||\n    user.studentProfile?.department ||\n    user.teacherProfile?.department ||\n    user.staffProfile?.department ||\n    null;\n\n  const major = user.major || user.studentProfile?.major || null;\n\n  const studentCode = user.studentCode || user.studentProfile?.studentCode || null;\n  const classYear = user.classYear || user.studentProfile?.classYear || null;\n  const academicYear = user.academicYear || user.studentProfile?.academicYear || null;\n\n  return {\n    id: user.id,\n    role: user.role,\n    userType: roleToUserType(user.role),\n    username: user.username || null,\n    email: user.email || null,\n    fullname,\n    name: fullname,\n    firstName: user.firstName || splitFullName(fullname).firstName,\n    lastName: user.lastName || splitFullName(fullname).lastName,\n    phone: user.phone || null,\n    status: user.status || \"ACTIVE\",\n    studentId: studentCode,\n    studentCode,\n    classYear,\n    academicYear,\n    level: classYear,\n    facultyId:\n      user.facultyId ||\n      user.studentProfile?.facultyId ||\n      user.teacherProfile?.facultyId ||\n      user.staffProfile?.facultyId ||\n      faculty?.id ||\n      null,\n    faculty,\n    departmentId:\n      user.departmentId ||\n      user.studentProfile?.departmentId ||\n      user.teacherProfile?.departmentId ||\n      user.staffProfile?.departmentId ||\n      department?.id ||\n      null,\n    department,\n    majorId: user.majorId || user.studentProfile?.majorId || major?.id || null,\n    major,\n  };\n}\n\nexport function normalizeAttendance(application, activity = null) {\n  const normalizedUser = normalizeUser(application?.student || application?.user || null);\n\n  return {\n    id: application.id,\n    activityId: application.activityId || activity?.id || null,\n    userId: application.studentUserId || normalizedUser?.id || null,\n    status: mapApplicationStatusFromApi(application.status),\n    reason: application.remark || null,\n    createdAt: application.submittedAt || application.createdAt || null,\n    updatedAt: application.updatedAt || null,\n    user: normalizedUser,\n    activity,\n    attendanceId: application.id,\n  };\n}\n\nexport function normalizeActivity(activity) {\n  if (!activity) return null;\n\n  const applications = Array.isArray(activity?.applications) ? activity.applications : [];\n  const attendances = applications.map((item) => normalizeAttendance(item));\n\n  const peopleCount = applications.filter((item) =>\n    [\"APPLIED\", \"APPROVED\", \"REVISION_REQUIRED\"].includes(item.status),\n  ).length;\n\n  const typeActivity = activity.activityType\n    ? {\n        id: activity.activityType.id,\n        code: activity.activityType.code,\n        name: activity.activityType.name,\n      }\n    : activity.typeActivity\n      ? {\n          id: activity.typeActivity.id,\n          code: activity.typeActivity.code,\n          name: activity.typeActivity.name,\n        }\n    : mapEvidenceTypeToTypeActivity(activity.requiredEvidenceType);\n\n  const targetDepartments = normalizeTargetDepartments(activity);\n  const departments = uniqueById(\n    targetDepartments\n      .map((item) => item.department)\n      .filter((item) => item?.id),\n  );\n  const departmentIds = targetDepartments.map((item) => item.departmentId).filter(Boolean);\n  const department = departments[0] || activity.ownerDepartment || null;\n\n  const majorJoins = normalizeTargetMajors(activity);\n  const majors = uniqueById(majorJoins.map((item) => item.major).filter((item) => item?.id));\n  const majorIds = majorJoins.map((item) => item.majorId).filter(Boolean);\n\n  const normalizedAttendances = attendances.map((attendance) => ({\n    ...attendance,\n    activityId: attendance.activityId || activity.id,\n  }));\n\n  return {\n    id: activity.id,\n    name: activity.title,\n    title: activity.title,\n    description: activity.note || \"\",\n    note: activity.note || \"\",\n    location: activity.location,\n    address: activity.location,\n    hour: activity.hours,\n    hours: activity.hours,\n    activityHours: activity.hours,\n    maxPeopleCount: activity.capacity,\n    maxStudents: activity.capacity,\n    peopleCount,\n    startDate: activity.startAt,\n    endDate: activity.endAt,\n    date: activity.applyCloseAt,\n    startAt: activity.startAt,\n    endAt: activity.endAt,\n    applyOpen: activity.applyOpenAt,\n    applyClose: activity.applyCloseAt,\n    applyOpenAt: activity.applyOpenAt,\n    applyCloseAt: activity.applyCloseAt,\n    status: mapActivityStatusFromApi(activity.status),\n    departmentId: departmentIds[0] || activity.ownerDepartmentId || null,\n    departmentIds,\n    facultyId: activity.ownerFacultyId || null,\n    department,\n    departments,\n    faculty: activity.ownerFaculty || null,\n    activityType: activity.activityType || typeActivity,\n    typeActivity,\n    typeActivityId: activity.activityTypeId || typeActivity.id,\n    requiredEvidenceType: activity.requiredEvidenceType,\n    ownerScope: activity.ownerScope,\n    attendances: normalizedAttendances,\n    applications,\n    createdBy: activity.createdBy || null,\n    targetDepartments,\n    majorJoins,\n    targetMajors: majorJoins,\n    majorIds,\n    majors,\n    level: activity.level || null,\n    createdAt: activity.createdAt || null,\n    updatedAt: activity.updatedAt || null,\n    fileActivities: [],\n    remarks: activity.note || \"\",\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,oBAAoB;IACxB,SAAS;IACT,SAAS;IACT,YAAY;IACZ,eAAe;IACf,aAAa;AACf;AAEA,MAAM,yBAAyB;IAC7B,SAAS;IACT,YAAY;IACZ,WAAW;IACX,WAAW;AACb;AAEA,MAAM,2BAA2B;IAC/B,SAAS;IACT,UAAU;IACV,UAAU;IACV,mBAAmB;IACnB,WAAW;IACX,SAAS;IACT,WAAW;IACX,WAAW;IACX,QAAQ;IACR,UAAU;IACV,UAAU;IACV,WAAW;IACX,UAAU;IACV,aAAa;IACb,YAAY;AACd;AAEA,SAAS,WAAW,KAAK;IACvB,OAAO,UAAU,QAAQ,UAAU,YAAY,KAAK,OAAO;AAC7D;AAEO,SAAS,cAAc,QAAQ;IACpC,MAAM,QAAQ,WAAW,UAAU,IAAI;IACvC,IAAI,CAAC,OAAO;QACV,OAAO;YAAE,WAAW;YAAQ,UAAU;QAAG;IAC3C;IACA,MAAM,QAAQ,MAAM,KAAK,CAAC;IAC1B,MAAM,YAAY,MAAM,KAAK,MAAM;IACnC,MAAM,WAAW,MAAM,IAAI,CAAC;IAC5B,OAAO;QAAE;QAAW;IAAS;AAC/B;AAEO,SAAS,eAAe,IAAI;IACjC,OAAO,iBAAiB,CAAC,KAAK,IAAI;AACpC;AAEO,SAAS,yBAAyB,MAAM;IAC7C,OAAO,UAAU;AACnB;AAEO,SAAS,uBAAuB,MAAM;IAC3C,OAAO,sBAAsB,CAAC,OAAO,IAAI,UAAU;AACrD;AAEO,SAAS,4BAA4B,MAAM;IAChD,OAAO,UAAU;AACnB;AAEO,SAAS,0BAA0B,MAAM;IAC9C,OAAO,wBAAwB,CAAC,OAAO,IAAI;AAC7C;AAEO,SAAS,8BAA8B,oBAAoB;IAChE,MAAM,UAAU;QACd,OAAO;YAAE,IAAI;YAAS,MAAM;QAAY;QACxC,KAAK;YAAE,IAAI;YAAO,MAAM;QAAU;QAClC,MAAM;YAAE,IAAI;YAAQ,MAAM;QAAS;IACrC;IACA,OAAO,OAAO,CAAC,qBAAqB,IAAI,QAAQ,IAAI;AACtD;AAEA,SAAS,WAAW,KAAK;IACvB,MAAM,MAAM,IAAI;IAChB,MAAM,OAAO,CAAC,CAAC;QACb,IAAI,MAAM,IAAI;YACZ,IAAI,GAAG,CAAC,KAAK,EAAE,EAAE;QACnB;IACF;IACA,OAAO,MAAM,IAAI,CAAC,IAAI,MAAM;AAC9B;AAEA,SAAS,2BAA2B,QAAQ;IAC1C,MAAM,oBAAoB,MAAM,OAAO,CAAC,UAAU,qBAC9C,SAAS,iBAAiB,GAC1B,EAAE;IAEN,MAAM,gBAAgB,kBACnB,GAAG,CAAC,CAAC,OAAS,CAAC;YACd,cAAc,MAAM,gBAAgB,MAAM,YAAY,MAAM;YAC5D,YAAY,MAAM,cAAc;QAClC,CAAC,GACA,MAAM,CAAC,CAAC,OAAS,KAAK,YAAY;IAErC,IAAI,cAAc,MAAM,GAAG,GAAG;QAC5B,OAAO;IACT;IAEA,IAAI,UAAU,qBAAqB,UAAU,iBAAiB,IAAI;QAChE,OAAO;YACL;gBACE,cAAc,SAAS,iBAAiB,IAAI,SAAS,eAAe,EAAE;gBACtE,YAAY,SAAS,eAAe,IAAI;YAC1C;SACD;IACH;IAEA,OAAO,EAAE;AACX;AAEA,SAAS,sBAAsB,QAAQ;IACrC,MAAM,eAAe,MAAM,OAAO,CAAC,UAAU,gBACzC,SAAS,YAAY,GACrB,MAAM,OAAO,CAAC,UAAU,cACtB,SAAS,UAAU,GACnB,EAAE;IAER,OAAO,aACJ,GAAG,CAAC,CAAC,OAAS,CAAC;YACd,SAAS,MAAM,WAAW,MAAM,OAAO,MAAM;YAC7C,OAAO,MAAM,SAAS;QACxB,CAAC,GACA,MAAM,CAAC,CAAC,OAAS,KAAK,OAAO;AAClC;AAEO,SAAS,cAAc,IAAI;IAChC,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,kBAAkB;QAAC,KAAK,SAAS;QAAE,KAAK,QAAQ;KAAC,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC,KAAK,IAAI;IACtF,MAAM,WAAW,KAAK,QAAQ,IAAI,mBAAmB,KAAK,QAAQ,IAAI,KAAK,KAAK,IAAI;IAEpF,MAAM,UACJ,KAAK,OAAO,IACZ,KAAK,cAAc,EAAE,WACrB,KAAK,cAAc,EAAE,WACrB,KAAK,YAAY,EAAE,WACnB;IAEF,MAAM,aACJ,KAAK,UAAU,IACf,KAAK,cAAc,EAAE,cACrB,KAAK,cAAc,EAAE,cACrB,KAAK,YAAY,EAAE,cACnB;IAEF,MAAM,QAAQ,KAAK,KAAK,IAAI,KAAK,cAAc,EAAE,SAAS;IAE1D,MAAM,cAAc,KAAK,WAAW,IAAI,KAAK,cAAc,EAAE,eAAe;IAC5E,MAAM,YAAY,KAAK,SAAS,IAAI,KAAK,cAAc,EAAE,aAAa;IACtE,MAAM,eAAe,KAAK,YAAY,IAAI,KAAK,cAAc,EAAE,gBAAgB;IAE/E,OAAO;QACL,IAAI,KAAK,EAAE;QACX,MAAM,KAAK,IAAI;QACf,UAAU,eAAe,KAAK,IAAI;QAClC,UAAU,KAAK,QAAQ,IAAI;QAC3B,OAAO,KAAK,KAAK,IAAI;QACrB;QACA,MAAM;QACN,WAAW,KAAK,SAAS,IAAI,cAAc,UAAU,SAAS;QAC9D,UAAU,KAAK,QAAQ,IAAI,cAAc,UAAU,QAAQ;QAC3D,OAAO,KAAK,KAAK,IAAI;QACrB,QAAQ,KAAK,MAAM,IAAI;QACvB,WAAW;QACX;QACA;QACA;QACA,OAAO;QACP,WACE,KAAK,SAAS,IACd,KAAK,cAAc,EAAE,aACrB,KAAK,cAAc,EAAE,aACrB,KAAK,YAAY,EAAE,aACnB,SAAS,MACT;QACF;QACA,cACE,KAAK,YAAY,IACjB,KAAK,cAAc,EAAE,gBACrB,KAAK,cAAc,EAAE,gBACrB,KAAK,YAAY,EAAE,gBACnB,YAAY,MACZ;QACF;QACA,SAAS,KAAK,OAAO,IAAI,KAAK,cAAc,EAAE,WAAW,OAAO,MAAM;QACtE;IACF;AACF;AAEO,SAAS,oBAAoB,WAAW,EAAE,WAAW,IAAI;IAC9D,MAAM,iBAAiB,cAAc,aAAa,WAAW,aAAa,QAAQ;IAElF,OAAO;QACL,IAAI,YAAY,EAAE;QAClB,YAAY,YAAY,UAAU,IAAI,UAAU,MAAM;QACtD,QAAQ,YAAY,aAAa,IAAI,gBAAgB,MAAM;QAC3D,QAAQ,4BAA4B,YAAY,MAAM;QACtD,QAAQ,YAAY,MAAM,IAAI;QAC9B,WAAW,YAAY,WAAW,IAAI,YAAY,SAAS,IAAI;QAC/D,WAAW,YAAY,SAAS,IAAI;QACpC,MAAM;QACN;QACA,cAAc,YAAY,EAAE;IAC9B;AACF;AAEO,SAAS,kBAAkB,QAAQ;IACxC,IAAI,CAAC,UAAU,OAAO;IAEtB,MAAM,eAAe,MAAM,OAAO,CAAC,UAAU,gBAAgB,SAAS,YAAY,GAAG,EAAE;IACvF,MAAM,cAAc,aAAa,GAAG,CAAC,CAAC,OAAS,oBAAoB;IAEnE,MAAM,cAAc,aAAa,MAAM,CAAC,CAAC,OACvC;YAAC;YAAW;YAAY;SAAoB,CAAC,QAAQ,CAAC,KAAK,MAAM,GACjE,MAAM;IAER,MAAM,eAAe,SAAS,YAAY,GACtC;QACE,IAAI,SAAS,YAAY,CAAC,EAAE;QAC5B,MAAM,SAAS,YAAY,CAAC,IAAI;QAChC,MAAM,SAAS,YAAY,CAAC,IAAI;IAClC,IACA,SAAS,YAAY,GACnB;QACE,IAAI,SAAS,YAAY,CAAC,EAAE;QAC5B,MAAM,SAAS,YAAY,CAAC,IAAI;QAChC,MAAM,SAAS,YAAY,CAAC,IAAI;IAClC,IACF,8BAA8B,SAAS,oBAAoB;IAE/D,MAAM,oBAAoB,2BAA2B;IACrD,MAAM,cAAc,WAClB,kBACG,GAAG,CAAC,CAAC,OAAS,KAAK,UAAU,EAC7B,MAAM,CAAC,CAAC,OAAS,MAAM;IAE5B,MAAM,gBAAgB,kBAAkB,GAAG,CAAC,CAAC,OAAS,KAAK,YAAY,EAAE,MAAM,CAAC;IAChF,MAAM,aAAa,WAAW,CAAC,EAAE,IAAI,SAAS,eAAe,IAAI;IAEjE,MAAM,aAAa,sBAAsB;IACzC,MAAM,SAAS,WAAW,WAAW,GAAG,CAAC,CAAC,OAAS,KAAK,KAAK,EAAE,MAAM,CAAC,CAAC,OAAS,MAAM;IACtF,MAAM,WAAW,WAAW,GAAG,CAAC,CAAC,OAAS,KAAK,OAAO,EAAE,MAAM,CAAC;IAE/D,MAAM,wBAAwB,YAAY,GAAG,CAAC,CAAC,aAAe,CAAC;YAC7D,GAAG,UAAU;YACb,YAAY,WAAW,UAAU,IAAI,SAAS,EAAE;QAClD,CAAC;IAED,OAAO;QACL,IAAI,SAAS,EAAE;QACf,MAAM,SAAS,KAAK;QACpB,OAAO,SAAS,KAAK;QACrB,aAAa,SAAS,IAAI,IAAI;QAC9B,MAAM,SAAS,IAAI,IAAI;QACvB,UAAU,SAAS,QAAQ;QAC3B,SAAS,SAAS,QAAQ;QAC1B,MAAM,SAAS,KAAK;QACpB,OAAO,SAAS,KAAK;QACrB,eAAe,SAAS,KAAK;QAC7B,gBAAgB,SAAS,QAAQ;QACjC,aAAa,SAAS,QAAQ;QAC9B;QACA,WAAW,SAAS,OAAO;QAC3B,SAAS,SAAS,KAAK;QACvB,MAAM,SAAS,YAAY;QAC3B,SAAS,SAAS,OAAO;QACzB,OAAO,SAAS,KAAK;QACrB,WAAW,SAAS,WAAW;QAC/B,YAAY,SAAS,YAAY;QACjC,aAAa,SAAS,WAAW;QACjC,cAAc,SAAS,YAAY;QACnC,QAAQ,yBAAyB,SAAS,MAAM;QAChD,cAAc,aAAa,CAAC,EAAE,IAAI,SAAS,iBAAiB,IAAI;QAChE;QACA,WAAW,SAAS,cAAc,IAAI;QACtC;QACA;QACA,SAAS,SAAS,YAAY,IAAI;QAClC,cAAc,SAAS,YAAY,IAAI;QACvC;QACA,gBAAgB,SAAS,cAAc,IAAI,aAAa,EAAE;QAC1D,sBAAsB,SAAS,oBAAoB;QACnD,YAAY,SAAS,UAAU;QAC/B,aAAa;QACb;QACA,WAAW,SAAS,SAAS,IAAI;QACjC;QACA;QACA,cAAc;QACd;QACA;QACA,OAAO,SAAS,KAAK,IAAI;QACzB,WAAW,SAAS,SAAS,IAAI;QACjC,WAAW,SAAS,SAAS,IAAI;QACjC,gBAAgB,EAAE;QAClB,SAAS,SAAS,IAAI,IAAI;IAC5B;AACF"}},
    {"offset": {"line": 424, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/activity.js"],"sourcesContent":["import apiClient from \"./apiClient\";\nimport { mapActivityStatusToApi, normalizeActivity } from \"./compat\";\n\nconst isFormData = (value) =>\n  typeof FormData !== \"undefined\" && value instanceof FormData;\n\nconst toIsoString = (value, fallback = null) => {\n  if (!value && fallback) return fallback;\n  if (!value) return null;\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) return fallback;\n  return date.toISOString();\n};\n\nconst formDataToObject = (formData) => {\n  const data = {};\n  formData.forEach((value, key) => {\n    if (data[key] !== undefined) {\n      data[key] = Array.isArray(data[key])\n        ? [...data[key], value]\n        : [data[key], value];\n      return;\n    }\n    data[key] = value;\n  });\n  return data;\n};\n\nconst compact = (obj) =>\n  Object.fromEntries(\n    Object.entries(obj).filter(([, value]) => value !== undefined && value !== null),\n  );\n\nconst toArray = (value) => {\n  if (value === undefined || value === null || value === \"\") return [];\n  if (Array.isArray(value)) return value.filter(Boolean);\n  return [value];\n};\n\nconst normalizeIncomingPayload = (rawData) => {\n  const data = isFormData(rawData) ? formDataToObject(rawData) : { ...rawData };\n\n  const title = data.title || data.name || data.activityName;\n  const startAt =\n    toIsoString(data.startAt || data.startDate || data.date || data.activityDate) ||\n    toIsoString(new Date());\n  const endAt =\n    toIsoString(data.endAt || data.endDate || data.startDate || data.date) ||\n    toIsoString(new Date(Date.now() + 60 * 60 * 1000));\n\n  const applyOpenAt =\n    toIsoString(data.applyOpenAt || data.applyOpenDate || data.applyStart) ||\n    toIsoString(new Date());\n\n  const applyCloseAt =\n    toIsoString(data.applyCloseAt || data.activityDeadline || data.date || data.startDate) ||\n    startAt;\n\n  const departmentIds = toArray(data.departmentIds || data.departmentId || data.ownerDepartmentId);\n  const majorIds = toArray(data.majorIds);\n\n  return compact({\n    title,\n    startAt,\n    endAt,\n    location: data.location || data.address,\n    hours: Number(data.hours || data.hour || data.activityHours || 1),\n    requiredEvidenceType:\n      data.requiredEvidenceType || data.evidenceType || (data.pdfDocument ? \"PDF\" : \"BOTH\"),\n    activityTypeId: data.activityTypeId || data.typeActivityId || data.category,\n    capacity: Number(data.capacity || data.maxPeopleCount || data.maxStudents || 1),\n    applyOpenAt,\n    applyCloseAt,\n    note: data.note || data.description || data.remarks,\n    ownerScope: data.ownerScope || (departmentIds.length ? \"DEPARTMENT\" : \"FACULTY\"),\n    ownerFacultyId: data.ownerFacultyId || data.facultyId,\n    ownerDepartmentId: departmentIds[0] || null,\n    departmentIds,\n    majorIds,\n    status: mapActivityStatusToApi(data.status),\n  });\n};\n\nconst mapListQuery = (params = {}) => {\n  const mapped = {\n    scope: params.scope,\n    department: params.department || params.departmentId,\n    status: mapActivityStatusToApi(params.status),\n    dateFrom: params.dateFrom || params.from,\n    dateTo: params.dateTo || params.to,\n  };\n\n  return compact(mapped);\n};\n\nconst fetchActivityDetail = async (id) => {\n  const response = await apiClient.get(`/activities/${id}`);\n  return response.data;\n};\n\nconst enrichWithDetails = async (activities) => {\n  const detailed = await Promise.all(\n    activities.map(async (item) => {\n      try {\n        return await fetchActivityDetail(item.id);\n      } catch (_error) {\n        return item;\n      }\n    }),\n  );\n\n  return detailed;\n};\n\nexport const getAllActivities = async (params = {}) => {\n  const response = await apiClient.get(\"/activities\", {\n    params: mapListQuery(params),\n  });\n\n  const list = Array.isArray(response.data) ? response.data : [];\n  const detailed = params.includeDetails === false ? list : await enrichWithDetails(list);\n\n  return detailed.map(normalizeActivity);\n};\n\nexport const getActivitiesReport = async (params = {}) => {\n  return getAllActivities(params);\n};\n\nexport const getActivityById = async (id) => {\n  const response = await apiClient.get(`/activities/${id}`);\n  return normalizeActivity(response.data);\n};\n\nexport const createActivity = async (data) => {\n  const payload = normalizeIncomingPayload(data);\n  const response = await apiClient.post(\"/activities\", payload);\n  return normalizeActivity(response.data);\n};\n\nexport const updateActivity = async (id, data) => {\n  const payload = normalizeIncomingPayload(data);\n  const response = await apiClient.patch(`/activities/${id}`, payload);\n  return normalizeActivity(response.data);\n};\n\nexport const deleteActivity = async (id) => {\n  const response = await apiClient.delete(`/activities/${id}`);\n  return response.data;\n};\n\nexport const getActivitiesByResponsible = async (userId) => {\n  const activities = await getAllActivities({ includeDetails: false });\n  return activities.filter((activity) => activity.createdBy?.id === userId);\n};\n\nexport const getActivitiesWithQuery = async (queryParams = {}) => {\n  const activities = await getAllActivities({\n    departmentId: queryParams.departmentId,\n    status: queryParams.status,\n  });\n\n  return {\n    activities,\n    total: activities.length,\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 583, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/app/teacher/home/page.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { Card, Col, Empty, Progress, Row, Spin, Tag, message } from \"antd\";\nimport {\n  Activity,\n  Calendar,\n  CheckCircle,\n  Clock,\n  FileText,\n  TrendingUp,\n  Users,\n} from \"lucide-react\";\nimport { getAllActivities } from \"@/services/activity\";\nimport { getUserScope } from \"@/utils/sessionUser\";\n\nconst categoryPalette = [\n  { color: \"#0A894C\", icon: <FileText size={20} /> },\n  { color: \"#1890ff\", icon: <Activity size={20} /> },\n  { color: \"#fa8c16\", icon: <Calendar size={20} /> },\n  { color: \"#52c41a\", icon: <Users size={20} /> },\n  { color: \"#eb2f96\", icon: <TrendingUp size={20} /> },\n  { color: \"#722ed1\", icon: <CheckCircle size={20} /> },\n];\n\nconst ACTIVITY_STATUS_LABEL = {\n  OPEN_REGISTRATION: \"เปิดรับสมัคร\",\n  IN_PROGRESS: \"กำลังดำเนินการ\",\n  CLOSED: \"ปิดกิจกรรม\",\n  CANCELLED: \"ยกเลิกกิจกรรม\",\n};\n\nconst hashText = (value = \"\") =>\n  Array.from(String(value)).reduce((sum, char) => sum + char.charCodeAt(0), 0);\n\nconst getActivityDepartments = (activity) => {\n  if (Array.isArray(activity?.departments) && activity.departments.length > 0) {\n    return activity.departments;\n  }\n  if (activity?.department?.id) {\n    return [activity.department];\n  }\n  return [];\n};\n\nconst isInDepartmentScope = (activity, departmentId) => {\n  if (!departmentId) return false;\n  return getActivityDepartments(activity).some((department) => department?.id === departmentId);\n};\n\nconst formatDate = (value) => {\n  if (!value) return \"-\";\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) return \"-\";\n  return date.toLocaleDateString(\"th-TH\");\n};\n\nexport default function TeacherHome() {\n  const [loading, setLoading] = useState(false);\n  const [scope, setScope] = useState(null);\n  const [activities, setActivities] = useState([]);\n\n  useEffect(() => {\n    const sessionScope = getUserScope();\n    setScope(sessionScope);\n  }, []);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!scope?.departmentId) {\n        message.error(\"ไม่พบข้อมูลภาควิชาของผู้ใช้\");\n        return;\n      }\n\n      setLoading(true);\n      try {\n        const data = await getAllActivities({ departmentId: scope.departmentId });\n        setActivities(Array.isArray(data) ? data : []);\n      } catch (error) {\n        console.error(\"Error fetching teacher home data:\", error);\n        message.error(\"ไม่สามารถโหลดข้อมูลได้\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [scope]);\n\n  const departmentActivities = useMemo(\n    () =>\n      (Array.isArray(activities) ? activities : []).filter((activity) =>\n        isInDepartmentScope(activity, scope?.departmentId),\n      ),\n    [activities, scope?.departmentId],\n  );\n\n  const uniqueStudentCount = useMemo(() => {\n    const ids = new Set();\n    departmentActivities.forEach((activity) => {\n      (activity.attendances || []).forEach((attendance) => {\n        if (attendance?.user?.id) {\n          ids.add(attendance.user.id);\n        }\n      });\n    });\n    return ids.size;\n  }, [departmentActivities]);\n\n  const pendingApprovals = useMemo(\n    () =>\n      departmentActivities.reduce((sum, activity) => {\n        const pending = (activity.attendances || []).filter((attendance) =>\n          [\"APPLIED\", \"REVISION_REQUIRED\"].includes(attendance.status),\n        ).length;\n        return sum + pending;\n      }, 0),\n    [departmentActivities],\n  );\n\n  const activeEvents = useMemo(\n    () => departmentActivities.filter((activity) => activity.status === \"IN_PROGRESS\").length,\n    [departmentActivities],\n  );\n\n  const totalHours = useMemo(\n    () =>\n      departmentActivities.reduce(\n        (sum, activity) => sum + Number(activity.hour || activity.hours || 0),\n        0,\n      ),\n    [departmentActivities],\n  );\n\n  const categoryData = useMemo(() => {\n    const categoryMap = new Map();\n\n    departmentActivities.forEach((activity) => {\n      const categoryId = activity.typeActivity?.id || activity.typeActivityId || \"unknown\";\n      const categoryName = activity.typeActivity?.name || \"ยังไม่กำหนดประเภท\";\n      const palette = categoryPalette[hashText(categoryId) % categoryPalette.length];\n\n      if (!categoryMap.has(categoryId)) {\n        categoryMap.set(categoryId, {\n          id: categoryId,\n          name: categoryName,\n          eventsCount: 0,\n          currentHours: 0,\n          targetHours: 60,\n          color: palette.color,\n          icon: palette.icon,\n        });\n      }\n\n      const category = categoryMap.get(categoryId);\n      category.eventsCount += 1;\n      category.currentHours += Number(activity.hour || activity.hours || 0);\n    });\n\n    return Array.from(categoryMap.values());\n  }, [departmentActivities]);\n\n  const recentActivities = useMemo(\n    () =>\n      [...departmentActivities]\n        .sort(\n          (a, b) =>\n            new Date(b.updatedAt || b.createdAt || b.startAt).getTime() -\n            new Date(a.updatedAt || a.createdAt || a.startAt).getTime(),\n        )\n        .slice(0, 4),\n    [departmentActivities],\n  );\n\n  const stats = [\n    {\n      title: \"Total Students\",\n      value: uniqueStudentCount,\n      icon: <Users size={24} style={{ color: \"#0A894C\" }} />,\n      color: \"#0A894C\",\n    },\n    {\n      title: \"Total Events\",\n      value: departmentActivities.length,\n      icon: <Calendar size={24} style={{ color: \"#0db359\" }} />,\n      color: \"#0db359\",\n    },\n    {\n      title: \"Pending Approvals\",\n      value: pendingApprovals,\n      icon: <FileText size={24} style={{ color: \"#086b3d\" }} />,\n      color: \"#086b3d\",\n    },\n    {\n      title: \"Active Events\",\n      value: activeEvents,\n      icon: <Activity size={24} style={{ color: \"#05c168\" }} />,\n      color: \"#05c168\",\n    },\n  ];\n\n  return (\n    <div>\n      <Card\n        className=\"mb-6 shadow-sm\"\n        style={{\n          background: \"linear-gradient(135deg, #0A894C 0%, #0ea258 100%)\",\n          border: \"none\",\n        }}\n      >\n        <div className=\"text-white\">\n          <h2 className=\"text-2xl font-bold mb-2\">\n            ภาควิชา {scope?.departmentName || \"ไม่ระบุ\"}\n          </h2>\n          <p className=\"text-sm opacity-90\">สรุปกิจกรรมและการติดตามงานของภาควิชา</p>\n        </div>\n      </Card>\n\n      <Spin spinning={loading}>\n        <Row gutter={[16, 16]}>\n          {stats.map((stat) => (\n            <Col xs={24} sm={12} lg={6} key={stat.title}>\n              <Card hoverable className=\"shadow-sm\" styles={{ body: { padding: 24 } }}>\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-gray-500 text-sm mb-1\">{stat.title}</p>\n                    <p className=\"text-2xl font-bold\" style={{ color: stat.color }}>\n                      {stat.value}\n                    </p>\n                  </div>\n                  <div className=\"p-3 rounded-full\" style={{ backgroundColor: `${stat.color}15` }}>\n                    {stat.icon}\n                  </div>\n                </div>\n              </Card>\n            </Col>\n          ))}\n        </Row>\n\n        <Card\n          className=\"mt-6 shadow-sm\"\n          styles={{\n            header: {\n              backgroundColor: \"#e8f5e9\",\n              borderBottom: \"2px solid #0A894C\",\n              color: \"#086b3d\",\n              fontWeight: \"600\",\n            },\n          }}\n          title={\n            <div className=\"flex items-center gap-2\">\n              <Clock size={20} style={{ color: \"#0A894C\" }} />\n              <span>จำนวนชั่วโมงกิจกรรมตามประเภท</span>\n            </div>\n          }\n        >\n          {categoryData.length === 0 ? (\n            <Empty description=\"ยังไม่มีกิจกรรมในภาควิชานี้\" />\n          ) : (\n            <Row gutter={[16, 16]}>\n              {categoryData.map((category) => {\n                const percentage = Math.min(\n                  100,\n                  Math.round((category.currentHours / category.targetHours) * 100),\n                );\n\n                return (\n                  <Col xs={24} md={12} lg={8} key={category.id}>\n                    <Card\n                      hoverable\n                      className=\"h-full\"\n                      style={{\n                        borderLeft: `4px solid ${category.color}`,\n                        backgroundColor: \"#fafafa\",\n                      }}\n                    >\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex items-start gap-3\">\n                            <div\n                              className=\"p-2 rounded-lg\"\n                              style={{\n                                backgroundColor: `${category.color}15`,\n                                color: category.color,\n                              }}\n                            >\n                              {category.icon}\n                            </div>\n                            <div>\n                              <h4 className=\"font-semibold text-sm mb-1\" style={{ color: category.color }}>\n                                {category.name}\n                              </h4>\n                              <p className=\"text-xs text-gray-500\">\n                                {category.currentHours}/{category.targetHours} ชั่วโมง\n                              </p>\n                            </div>\n                          </div>\n                          {category.currentHours >= category.targetHours && (\n                            <CheckCircle size={16} style={{ color: \"#52c41a\" }} />\n                          )}\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-2 pt-2 border-t\">\n                          <div className=\"text-center\">\n                            <p className=\"text-xs text-gray-500 mb-1\">กิจกรรม</p>\n                            <p className=\"text-lg font-bold text-gray-800\">{category.eventsCount}</p>\n                          </div>\n                          <div className=\"text-center border-l\">\n                            <p className=\"text-xs text-gray-500 mb-1\">ชั่วโมง</p>\n                            <p className=\"text-lg font-bold\" style={{ color: category.color }}>\n                              {category.currentHours}\n                            </p>\n                          </div>\n                        </div>\n\n                        <Progress percent={percentage} showInfo={false} strokeColor={category.color} />\n                      </div>\n                    </Card>\n                  </Col>\n                );\n              })}\n            </Row>\n          )}\n        </Card>\n\n        <Row gutter={[16, 16]} className=\"mt-6\">\n          <Col xs={24} lg={16}>\n            <Card\n              title=\"Recent Activities\"\n              className=\"shadow-sm\"\n              styles={{\n                header: {\n                  backgroundColor: \"#e8f5e9\",\n                  borderBottom: \"2px solid #0A894C\",\n                  color: \"#086b3d\",\n                  fontWeight: \"600\",\n                },\n              }}\n            >\n              {recentActivities.length === 0 ? (\n                <Empty description=\"ไม่มีกิจกรรมล่าสุด\" />\n              ) : (\n                <div className=\"space-y-3\">\n                  {recentActivities.map((activity) => (\n                    <div\n                      key={activity.id}\n                      className=\"flex items-center justify-between p-3 rounded-lg\"\n                      style={{\n                        backgroundColor: \"#f1f8f4\",\n                        borderLeft: \"3px solid #0A894C\",\n                      }}\n                    >\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-800\">{activity.name || activity.title}</p>\n                        <p className=\"text-xs text-gray-500\">\n                          วันที่จัด {formatDate(activity.startDate || activity.startAt)}\n                        </p>\n                      </div>\n                      <Tag color=\"blue\">{ACTIVITY_STATUS_LABEL[activity.status] || activity.status}</Tag>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </Card>\n          </Col>\n\n          <Col xs={24} lg={8}>\n            <Card\n              title=\"Notifications\"\n              className=\"shadow-sm\"\n              styles={{\n                header: {\n                  backgroundColor: \"#e8f5e9\",\n                  borderBottom: \"2px solid #0A894C\",\n                  color: \"#086b3d\",\n                  fontWeight: \"600\",\n                },\n              }}\n            >\n              <Empty description=\"ยังไม่มีการเชื่อมต่อแจ้งเตือนในหน้านี้\" />\n            </Card>\n          </Col>\n        </Row>\n\n        <Card className=\"mt-6 shadow-sm\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-gray-600\">ชั่วโมงกิจกรรมรวมภาควิชา</span>\n            <span className=\"text-lg font-bold\" style={{ color: \"#0A894C\" }}>\n              {totalHours} ชั่วโมง\n            </span>\n          </div>\n        </Card>\n      </Spin>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}