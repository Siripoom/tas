{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/components/asset/CustomButton.js"],"sourcesContent":["\"use client\";\n\nimport { Button } from \"antd\";\n\nconst CustomButton = ({\n  children,\n  onClick,\n  type = \"primary\",\n  size = \"large\",\n  loading = false,\n  disabled = false,\n  block = false,\n  icon = null,\n  backgroundColor = \"#2D2D2D\",\n  hoverBackgroundColor = \"#3D3D3D\",\n  textColor = \"#ffffff\",\n  borderRadius = \"3.5rem\",\n  height = \"3rem\",\n  fontSize = \"1rem\",\n  fontWeight = \"500\",\n  shadow = \"lg\",\n  className = \"\",\n  htmlType = \"button\",\n  ...props\n}) => {\n  const buttonStyle = {\n    background: type === \"primary\" ? backgroundColor : undefined,\n    color: textColor,\n    borderRadius: borderRadius,\n    height: height,\n    fontSize: fontSize,\n    fontWeight: fontWeight,\n    border: \"none\",\n    transition: \"all 0.3s ease\",\n  };\n\n  const shadowClass = {\n    sm: \"shadow-sm hover:shadow-md\",\n    md: \"shadow-md hover:shadow-lg\",\n    lg: \"shadow-lg hover:shadow-xl\",\n    xl: \"shadow-xl hover:shadow-2xl\",\n    none: \"\",\n  };\n\n  const combinedClassName = `${\n    shadowClass[shadow] || shadowClass.lg\n  } ${className}`;\n\n  return (\n    <Button\n      type={type}\n      size={size}\n      onClick={onClick}\n      loading={loading}\n      disabled={disabled}\n      block={block}\n      icon={icon}\n      htmlType={htmlType}\n      style={buttonStyle}\n      className={combinedClassName}\n      onMouseEnter={(e) => {\n        if (type === \"primary\" && !disabled && !loading) {\n          e.currentTarget.style.background = hoverBackgroundColor;\n        }\n      }}\n      onMouseLeave={(e) => {\n        if (type === \"primary\" && !disabled && !loading) {\n          e.currentTarget.style.background = backgroundColor;\n        }\n      }}\n      {...props}\n    >\n      {children}\n    </Button>\n  );\n};\n\nexport default CustomButton;\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIA,MAAM,eAAe,CAAC,EACpB,QAAQ,EACR,OAAO,EACP,OAAO,SAAS,EAChB,OAAO,OAAO,EACd,UAAU,KAAK,EACf,WAAW,KAAK,EAChB,QAAQ,KAAK,EACb,OAAO,IAAI,EACX,kBAAkB,SAAS,EAC3B,uBAAuB,SAAS,EAChC,YAAY,SAAS,EACrB,eAAe,QAAQ,EACvB,SAAS,MAAM,EACf,WAAW,MAAM,EACjB,aAAa,KAAK,EAClB,SAAS,IAAI,EACb,YAAY,EAAE,EACd,WAAW,QAAQ,EACnB,GAAG,OACJ;IACC,MAAM,cAAc;QAClB,YAAY,SAAS,YAAY,kBAAkB;QACnD,OAAO;QACP,cAAc;QACd,QAAQ;QACR,UAAU;QACV,YAAY;QACZ,QAAQ;QACR,YAAY;IACd;IAEA,MAAM,cAAc;QAClB,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,MAAM;IACR;IAEA,MAAM,oBAAoB,GACxB,WAAW,CAAC,OAAO,IAAI,YAAY,EAAE,CACtC,CAAC,EAAE,WAAW;IAEf,qBACE,8OAAC,4MAAM;QACL,MAAM;QACN,MAAM;QACN,SAAS;QACT,SAAS;QACT,UAAU;QACV,OAAO;QACP,MAAM;QACN,UAAU;QACV,OAAO;QACP,WAAW;QACX,cAAc,CAAC;YACb,IAAI,SAAS,aAAa,CAAC,YAAY,CAAC,SAAS;gBAC/C,EAAE,aAAa,CAAC,KAAK,CAAC,UAAU,GAAG;YACrC;QACF;QACA,cAAc,CAAC;YACb,IAAI,SAAS,aAAa,CAAC,YAAY,CAAC,SAAS;gBAC/C,EAAE,aAAa,CAAC,KAAK,CAAC,UAAU,GAAG;YACrC;QACF;QACC,GAAG,KAAK;kBAER;;;;;;AAGP;uCAEe"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/apiClient.js"],"sourcesContent":["// create axios instance with default config\nimport axios from \"axios\";\n\nconst baseURL = process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:4556/api\";\n\nconst apiClient = axios.create({\n  baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nconst getToken = () => (typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null);\nconst getRefreshToken = () =>\n  typeof window !== \"undefined\" ? localStorage.getItem(\"refreshToken\") : null;\n\nconst setTokens = (accessToken, refreshToken) => {\n  if (typeof window === \"undefined\") return;\n  if (accessToken) localStorage.setItem(\"token\", accessToken);\n  if (refreshToken) localStorage.setItem(\"refreshToken\", refreshToken);\n};\n\nconst clearTokens = () => {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"refreshToken\");\n};\n\napiClient.interceptors.request.use(\n  (config) => {\n    const token = getToken();\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error),\n);\n\nlet isRefreshing = false;\nlet pendingRequests = [];\n\nconst processQueue = (error, token = null) => {\n  pendingRequests.forEach((promise) => {\n    if (error) {\n      promise.reject(error);\n    } else {\n      promise.resolve(token);\n    }\n  });\n  pendingRequests = [];\n};\n\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status !== 401 || originalRequest?._retry) {\n      return Promise.reject(error);\n    }\n\n    const refreshToken = getRefreshToken();\n    if (!refreshToken) {\n      clearTokens();\n      return Promise.reject(error);\n    }\n\n    if (isRefreshing) {\n      return new Promise((resolve, reject) => {\n        pendingRequests.push({ resolve, reject });\n      })\n        .then((token) => {\n          originalRequest.headers.Authorization = `Bearer ${token}`;\n          return apiClient(originalRequest);\n        })\n        .catch((refreshError) => Promise.reject(refreshError));\n    }\n\n    originalRequest._retry = true;\n    isRefreshing = true;\n\n    try {\n      const response = await axios.post(`${baseURL}/auth/refresh`, { refreshToken });\n      const newAccessToken = response.data?.accessToken;\n      const newRefreshToken = response.data?.refreshToken || refreshToken;\n\n      setTokens(newAccessToken, newRefreshToken);\n      processQueue(null, newAccessToken);\n\n      originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n      return apiClient(originalRequest);\n    } catch (refreshError) {\n      processQueue(refreshError, null);\n      clearTokens();\n      if (typeof window !== \"undefined\") {\n        localStorage.removeItem(\"user\");\n      }\n      return Promise.reject(refreshError);\n    } finally {\n      isRefreshing = false;\n    }\n  },\n);\n\nexport default apiClient;\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAC5C;;AAEA,MAAM,UAAU,iEAAwC;AAExD,MAAM,YAAY,gJAAK,CAAC,MAAM,CAAC;IAC7B;IACA,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,MAAM,WAAW,IAAO,sCAAgC,0BAAgC;AACxF,MAAM,kBAAkB,IACtB,sCAAgC,0BAAuC;AAEzE,MAAM,YAAY,CAAC,aAAa;IAC9B,wCAAmC;;;AAGrC;AAEA,MAAM,cAAc;IAClB,wCAAmC;;;AAGrC;AAEA,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ;IACd;;IAGA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,IAAI,eAAe;AACnB,IAAI,kBAAkB,EAAE;AAExB,MAAM,eAAe,CAAC,OAAO,QAAQ,IAAI;IACvC,gBAAgB,OAAO,CAAC,CAAC;QACvB,IAAI,OAAO;YACT,QAAQ,MAAM,CAAC;QACjB,OAAO;YACL,QAAQ,OAAO,CAAC;QAClB;IACF;IACA,kBAAkB,EAAE;AACtB;AAEA,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,iBAAiB,QAAQ;QAC7D,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,MAAM,eAAe;IACrB,wCAAmB;QACjB;QACA,OAAO,QAAQ,MAAM,CAAC;IACxB;;;AAoCF;uCAGa"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/compat.js"],"sourcesContent":["const ROLE_TO_USER_TYPE = {\n  STUDENT: \"student\",\n  TEACHER: \"teacher\",\n  DEPT_STAFF: \"admin\",\n  FACULTY_ADMIN: \"admin\",\n  SUPER_ADMIN: \"admin\",\n};\n\nconst ACTIVITY_STATUS_TO_API = {\n  planned: \"OPEN_REGISTRATION\",\n  inprogress: \"IN_PROGRESS\",\n  completed: \"CLOSED\",\n  cancelled: \"CANCELLED\",\n};\n\nconst LEGACY_ATTENDANCE_ACTION = {\n  APPLIED: \"request-revision\",\n  APPROVED: \"approve\",\n  REJECTED: \"request-revision\",\n  REVISION_REQUIRED: \"request-revision\",\n  CANCELLED: \"request-revision\",\n  NO_SHOW: \"request-revision\",\n  SUBMITTED: \"request-revision\",\n  COMPLETED: \"approve\",\n  joined: \"request-revision\",\n  accepted: \"approve\",\n  approved: \"approve\",\n  completed: \"approve\",\n  rejected: \"request-revision\",\n  uncompleted: \"request-revision\",\n  Inprogress: \"request-revision\",\n};\n\nfunction safeString(value) {\n  return value === null || value === undefined ? \"\" : String(value);\n}\n\nexport function splitFullName(fullname) {\n  const clean = safeString(fullname).trim();\n  if (!clean) {\n    return { firstName: \"User\", lastName: \"\" };\n  }\n  const parts = clean.split(/\\s+/);\n  const firstName = parts.shift() || \"User\";\n  const lastName = parts.join(\" \");\n  return { firstName, lastName };\n}\n\nexport function roleToUserType(role) {\n  return ROLE_TO_USER_TYPE[role] || \"student\";\n}\n\nexport function mapActivityStatusFromApi(status) {\n  return status || \"OPEN_REGISTRATION\";\n}\n\nexport function mapActivityStatusToApi(status) {\n  return ACTIVITY_STATUS_TO_API[status] || status || undefined;\n}\n\nexport function mapApplicationStatusFromApi(status) {\n  return status || \"APPLIED\";\n}\n\nexport function mapLegacyAttendanceAction(status) {\n  return LEGACY_ATTENDANCE_ACTION[status] || \"request-revision\";\n}\n\nexport function mapEvidenceTypeToTypeActivity(requiredEvidenceType) {\n  const mapping = {\n    PHOTO: { id: \"PHOTO\", name: \"ใช้รูปภาพ\" },\n    PDF: { id: \"PDF\", name: \"ใช้ PDF\" },\n    BOTH: { id: \"BOTH\", name: \"ทั่วไป\" },\n  };\n  return mapping[requiredEvidenceType] || mapping.BOTH;\n}\n\nfunction uniqueById(items) {\n  const map = new Map();\n  items.forEach((item) => {\n    if (item?.id) {\n      map.set(item.id, item);\n    }\n  });\n  return Array.from(map.values());\n}\n\nfunction normalizeTargetDepartments(activity) {\n  const targetDepartments = Array.isArray(activity?.targetDepartments)\n    ? activity.targetDepartments\n    : [];\n\n  const mappedTargets = targetDepartments\n    .map((item) => ({\n      departmentId: item?.departmentId || item?.department?.id || null,\n      department: item?.department || null,\n    }))\n    .filter((item) => item.departmentId);\n\n  if (mappedTargets.length > 0) {\n    return mappedTargets;\n  }\n\n  if (activity?.ownerDepartmentId || activity?.ownerDepartment?.id) {\n    return [\n      {\n        departmentId: activity.ownerDepartmentId || activity.ownerDepartment?.id,\n        department: activity.ownerDepartment || null,\n      },\n    ];\n  }\n\n  return [];\n}\n\nfunction normalizeTargetMajors(activity) {\n  const targetMajors = Array.isArray(activity?.targetMajors)\n    ? activity.targetMajors\n    : Array.isArray(activity?.majorJoins)\n      ? activity.majorJoins\n      : [];\n\n  return targetMajors\n    .map((item) => ({\n      majorId: item?.majorId || item?.major?.id || null,\n      major: item?.major || null,\n    }))\n    .filter((item) => item.majorId);\n}\n\nexport function normalizeUser(user) {\n  if (!user) return null;\n\n  const fullNameFromApi = [user.firstName, user.lastName].filter(Boolean).join(\" \").trim();\n  const fullname = user.fullname || fullNameFromApi || user.username || user.email || \"Unknown\";\n\n  const faculty =\n    user.faculty ||\n    user.studentProfile?.faculty ||\n    user.teacherProfile?.faculty ||\n    user.staffProfile?.faculty ||\n    null;\n\n  const department =\n    user.department ||\n    user.studentProfile?.department ||\n    user.teacherProfile?.department ||\n    user.staffProfile?.department ||\n    null;\n\n  const major = user.major || user.studentProfile?.major || null;\n\n  const studentCode = user.studentCode || user.studentProfile?.studentCode || null;\n  const classYear = user.classYear || user.studentProfile?.classYear || null;\n  const academicYear = user.academicYear || user.studentProfile?.academicYear || null;\n\n  return {\n    id: user.id,\n    role: user.role,\n    userType: roleToUserType(user.role),\n    username: user.username || null,\n    email: user.email || null,\n    fullname,\n    name: fullname,\n    firstName: user.firstName || splitFullName(fullname).firstName,\n    lastName: user.lastName || splitFullName(fullname).lastName,\n    phone: user.phone || null,\n    status: user.status || \"ACTIVE\",\n    studentId: studentCode,\n    studentCode,\n    classYear,\n    academicYear,\n    level: classYear,\n    facultyId:\n      user.facultyId ||\n      user.studentProfile?.facultyId ||\n      user.teacherProfile?.facultyId ||\n      user.staffProfile?.facultyId ||\n      faculty?.id ||\n      null,\n    faculty,\n    departmentId:\n      user.departmentId ||\n      user.studentProfile?.departmentId ||\n      user.teacherProfile?.departmentId ||\n      user.staffProfile?.departmentId ||\n      department?.id ||\n      null,\n    department,\n    majorId: user.majorId || user.studentProfile?.majorId || major?.id || null,\n    major,\n  };\n}\n\nexport function normalizeAttendance(application, activity = null) {\n  const normalizedUser = normalizeUser(application?.student || application?.user || null);\n\n  return {\n    id: application.id,\n    activityId: application.activityId || activity?.id || null,\n    userId: application.studentUserId || normalizedUser?.id || null,\n    status: mapApplicationStatusFromApi(application.status),\n    reason: application.remark || null,\n    createdAt: application.submittedAt || application.createdAt || null,\n    updatedAt: application.updatedAt || null,\n    user: normalizedUser,\n    activity,\n    attendanceId: application.id,\n  };\n}\n\nexport function normalizeActivity(activity) {\n  if (!activity) return null;\n\n  const applications = Array.isArray(activity?.applications) ? activity.applications : [];\n  const attendances = applications.map((item) => normalizeAttendance(item));\n\n  const peopleCount = applications.filter((item) =>\n    [\"APPLIED\", \"APPROVED\", \"REVISION_REQUIRED\"].includes(item.status),\n  ).length;\n\n  const typeActivity = activity.activityType\n    ? {\n        id: activity.activityType.id,\n        code: activity.activityType.code,\n        name: activity.activityType.name,\n      }\n    : activity.typeActivity\n      ? {\n          id: activity.typeActivity.id,\n          code: activity.typeActivity.code,\n          name: activity.typeActivity.name,\n        }\n    : mapEvidenceTypeToTypeActivity(activity.requiredEvidenceType);\n\n  const targetDepartments = normalizeTargetDepartments(activity);\n  const departments = uniqueById(\n    targetDepartments\n      .map((item) => item.department)\n      .filter((item) => item?.id),\n  );\n  const departmentIds = targetDepartments.map((item) => item.departmentId).filter(Boolean);\n  const department = departments[0] || activity.ownerDepartment || null;\n\n  const majorJoins = normalizeTargetMajors(activity);\n  const majors = uniqueById(majorJoins.map((item) => item.major).filter((item) => item?.id));\n  const majorIds = majorJoins.map((item) => item.majorId).filter(Boolean);\n\n  const normalizedAttendances = attendances.map((attendance) => ({\n    ...attendance,\n    activityId: attendance.activityId || activity.id,\n  }));\n\n  return {\n    id: activity.id,\n    name: activity.title,\n    title: activity.title,\n    description: activity.note || \"\",\n    note: activity.note || \"\",\n    location: activity.location,\n    address: activity.location,\n    hour: activity.hours,\n    hours: activity.hours,\n    activityHours: activity.hours,\n    maxPeopleCount: activity.capacity,\n    maxStudents: activity.capacity,\n    peopleCount,\n    startDate: activity.startAt,\n    endDate: activity.endAt,\n    date: activity.applyCloseAt,\n    startAt: activity.startAt,\n    endAt: activity.endAt,\n    applyOpen: activity.applyOpenAt,\n    applyClose: activity.applyCloseAt,\n    applyOpenAt: activity.applyOpenAt,\n    applyCloseAt: activity.applyCloseAt,\n    status: mapActivityStatusFromApi(activity.status),\n    departmentId: departmentIds[0] || activity.ownerDepartmentId || null,\n    departmentIds,\n    facultyId: activity.ownerFacultyId || null,\n    department,\n    departments,\n    faculty: activity.ownerFaculty || null,\n    activityType: activity.activityType || typeActivity,\n    typeActivity,\n    typeActivityId: activity.activityTypeId || typeActivity.id,\n    requiredEvidenceType: activity.requiredEvidenceType,\n    ownerScope: activity.ownerScope,\n    attendances: normalizedAttendances,\n    applications,\n    createdBy: activity.createdBy || null,\n    targetDepartments,\n    majorJoins,\n    targetMajors: majorJoins,\n    majorIds,\n    majors,\n    level: activity.level || null,\n    createdAt: activity.createdAt || null,\n    updatedAt: activity.updatedAt || null,\n    fileActivities: [],\n    remarks: activity.note || \"\",\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/auth.js"],"sourcesContent":["import apiClient from \"./apiClient\";\nimport { normalizeUser } from \"./compat\";\n\nexport const login = async (email, password) => {\n  const response = await apiClient.post(\"/auth/login\", {\n    email: String(email),\n    password: String(password),\n  });\n\n  const data = response.data;\n  const user = normalizeUser(data.user);\n\n  return {\n    token: data.accessToken,\n    refreshToken: data.refreshToken,\n    accessToken: data.accessToken,\n    user,\n  };\n};\n\nexport const refresh = async (refreshToken) => {\n  const response = await apiClient.post(\"/auth/refresh\", { refreshToken });\n  return response.data;\n};\n\nexport const changePassword = async (currentPassword, newPassword) => {\n  const response = await apiClient.post(\"/auth/change-password\", {\n    currentPassword,\n    newPassword,\n  });\n  return response.data;\n};\n\nexport const registerStudent = async (payload) => {\n  const response = await apiClient.post(\"/auth/register-student\", payload);\n  return response.data;\n};\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,MAAM,QAAQ,OAAO,OAAO;IACjC,MAAM,WAAW,MAAM,uIAAS,CAAC,IAAI,CAAC,eAAe;QACnD,OAAO,OAAO;QACd,UAAU,OAAO;IACnB;IAEA,MAAM,OAAO,SAAS,IAAI;IAC1B,MAAM,OAAO,IAAA,0IAAa,EAAC,KAAK,IAAI;IAEpC,OAAO;QACL,OAAO,KAAK,WAAW;QACvB,cAAc,KAAK,YAAY;QAC/B,aAAa,KAAK,WAAW;QAC7B;IACF;AACF;AAEO,MAAM,UAAU,OAAO;IAC5B,MAAM,WAAW,MAAM,uIAAS,CAAC,IAAI,CAAC,iBAAiB;QAAE;IAAa;IACtE,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,iBAAiB,OAAO,iBAAiB;IACpD,MAAM,WAAW,MAAM,uIAAS,CAAC,IAAI,CAAC,yBAAyB;QAC7D;QACA;IACF;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,kBAAkB,OAAO;IACpC,MAAM,WAAW,MAAM,uIAAS,CAAC,IAAI,CAAC,0BAA0B;IAChE,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 559, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/app/%28auth%29/login/page.js"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Form, Input, Card, message } from \"antd\";\nimport { Mail, Lock, LogIn } from \"lucide-react\";\nimport Image from \"next/image\";\nimport { useRouter } from \"next/navigation\";\nimport CustomButton from \"@/components/asset/CustomButton\";\nimport { login } from \"../../../services/auth\";\n\nexport default function LoginPage() {\n  const [loading, setLoading] = useState(false);\n  const router = useRouter();\n\n  const onFinish = async (values) => {\n    setLoading(true);\n    try {\n      const data = await login(values.email, values.password);\n\n      // Store token\n      localStorage.setItem(\"token\", data.token);\n      if (data.refreshToken) {\n        localStorage.setItem(\"refreshToken\", data.refreshToken);\n      }\n\n      // Store user data in localStorage from response\n      const role = data.user.role;\n      const userType =\n        role === \"STUDENT\"\n          ? \"student\"\n          : role === \"TEACHER\" || role === \"DEPT_STAFF\"\n            ? \"teacher\"\n            : \"admin\";\n\n      const userData = {\n        id: data.user.id,\n        studentId: data.user.studentId,\n        fullname: data.user.fullname,\n        name: data.user.fullname,\n        firstName: data.user.firstName,\n        lastName: data.user.lastName,\n        username: data.user.username,\n        email: data.user.email,\n        phone: data.user.phone,\n        role: data.user.role,\n        facultyId: data.user.facultyId,\n        faculty: data.user.faculty || null,\n        facultyName: data.user.faculty?.name || \"\",\n        departmentId: data.user.departmentId,\n        departmentName: data.user.department?.name || \"\",\n        department: data.user.department || null,\n        majorId: data.user.majorId,\n        major: data.user.major || null,\n        userType,\n        birthday: data.user.birthday,\n        level: data.user.level,\n        profilePic: data.user.profilePic,\n        status: data.user.status,\n      };\n      localStorage.setItem(\"user\", JSON.stringify(userData));\n\n      message.success(\"เข้าสู่ระบบสำเร็จ\");\n\n      if (role === \"STUDENT\") {\n        router.push(\"/student/home\");\n      } else if (role === \"TEACHER\" || role === \"DEPT_STAFF\") {\n        router.push(\"/teacher/home\");\n      } else if (role === \"FACULTY_ADMIN\" || role === \"SUPER_ADMIN\") {\n        router.push(\"/admin/home\");\n      } else {\n        router.push(\"/login\");\n      }\n    } catch (error) {\n      message.error(\"เข้าสู่ระบบไม่สำเร็จ กรุณาลองใหม่อีกครั้ง\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div\n      className=\"min-h-screen flex items-center justify-center p-4\"\n      style={{ backgroundColor: \"#3D5753\" }}\n    >\n      <Card\n        className=\"w-full max-w-md shadow-2xl rounded-2xl border-0\"\n        bodyStyle={{ padding: \"48px 40px\" }}\n      >\n        <div className=\"text-center mb-6\">\n          <div className=\"flex justify-center \">\n            <Image\n              src=\"/Logo.png\"\n              alt=\"TAS Logo\"\n              width={200}\n              height={200}\n              priority\n              className=\"object-contain\"\n            />\n          </div>\n        </div>\n\n        <Form\n          name=\"login\"\n          onFinish={onFinish}\n          layout=\"vertical\"\n          requiredMark={false}\n          size=\"large\"\n        >\n          <Form.Item\n            name=\"email\"\n            label={\n              <span className=\"text-gray-700 font-medium\">รหัสนักศึกษา</span>\n            }\n            rules={[\n              {\n                required: true,\n                message: \"กรุณากรอกรหัสนักศึกษา\",\n              },\n            ]}\n          >\n            <Input\n              prefix={<Mail size={18} className=\"text-gray-400\" />}\n              placeholder=\"example@email.com\"\n              className=\"rounded-lg\"\n            />\n          </Form.Item>\n\n          <Form.Item\n            name=\"password\"\n            label={<span className=\"text-gray-700 font-medium\">รหัสผ่าน</span>}\n            rules={[\n              {\n                required: true,\n                message: \"กรุณากรอกรหัสผ่าน\",\n              },\n            ]}\n          >\n            <Input.Password\n              prefix={<Lock size={18} className=\"text-gray-400\" />}\n              placeholder=\"••••••••\"\n              className=\"rounded-lg\"\n            />\n          </Form.Item>\n\n          <div className=\"text-right mb-6\">\n            <a\n              href=\"#\"\n              className=\"text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors\"\n            >\n              ลืมรหัสผ่าน?\n            </a>\n          </div>\n\n          <Form.Item className=\"mb-0\">\n            <CustomButton\n              htmlType=\"submit\"\n              loading={loading}\n              block\n              icon={<LogIn size={20} />}\n              backgroundColor=\"#2D2D2D\"\n              height=\"3rem\"\n              fontSize=\"1rem\"\n              fontWeight=\"500\"\n              shadow=\"lg\"\n            >\n              เข้าสู่ระบบ\n            </CustomButton>\n          </Form.Item>\n        </Form>\n      </Card>\n\n      <style jsx global>{`\n        .ant-input-affix-wrapper {\n          border-radius: 0.5rem !important;\n        }\n        .ant-input-password {\n          border-radius: 0.5rem !important;\n        }\n      `}</style>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}