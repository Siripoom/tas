{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/apiClient.js"],"sourcesContent":["// create axios instance with default config\nimport axios from \"axios\";\n\nconst baseURL = process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:4556/api\";\n\nconst apiClient = axios.create({\n  baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nconst getToken = () => (typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null);\nconst getRefreshToken = () =>\n  typeof window !== \"undefined\" ? localStorage.getItem(\"refreshToken\") : null;\n\nconst setTokens = (accessToken, refreshToken) => {\n  if (typeof window === \"undefined\") return;\n  if (accessToken) localStorage.setItem(\"token\", accessToken);\n  if (refreshToken) localStorage.setItem(\"refreshToken\", refreshToken);\n};\n\nconst clearTokens = () => {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"refreshToken\");\n};\n\napiClient.interceptors.request.use(\n  (config) => {\n    const token = getToken();\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error),\n);\n\nlet isRefreshing = false;\nlet pendingRequests = [];\n\nconst processQueue = (error, token = null) => {\n  pendingRequests.forEach((promise) => {\n    if (error) {\n      promise.reject(error);\n    } else {\n      promise.resolve(token);\n    }\n  });\n  pendingRequests = [];\n};\n\napiClient.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status !== 401 || originalRequest?._retry) {\n      return Promise.reject(error);\n    }\n\n    const refreshToken = getRefreshToken();\n    if (!refreshToken) {\n      clearTokens();\n      return Promise.reject(error);\n    }\n\n    if (isRefreshing) {\n      return new Promise((resolve, reject) => {\n        pendingRequests.push({ resolve, reject });\n      })\n        .then((token) => {\n          originalRequest.headers.Authorization = `Bearer ${token}`;\n          return apiClient(originalRequest);\n        })\n        .catch((refreshError) => Promise.reject(refreshError));\n    }\n\n    originalRequest._retry = true;\n    isRefreshing = true;\n\n    try {\n      const response = await axios.post(`${baseURL}/auth/refresh`, { refreshToken });\n      const newAccessToken = response.data?.accessToken;\n      const newRefreshToken = response.data?.refreshToken || refreshToken;\n\n      setTokens(newAccessToken, newRefreshToken);\n      processQueue(null, newAccessToken);\n\n      originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n      return apiClient(originalRequest);\n    } catch (refreshError) {\n      processQueue(refreshError, null);\n      clearTokens();\n      if (typeof window !== \"undefined\") {\n        localStorage.removeItem(\"user\");\n      }\n      return Promise.reject(refreshError);\n    } finally {\n      isRefreshing = false;\n    }\n  },\n);\n\nexport default apiClient;\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAG5B;AAFhB;;AAEA,MAAM,UAAU,iEAAwC;AAExD,MAAM,YAAY,mJAAK,CAAC,MAAM,CAAC;IAC7B;IACA,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,MAAM,WAAW,IAAO,uCAAgC,aAAa,OAAO,CAAC,WAAW;AACxF,MAAM,kBAAkB,IACtB,uCAAgC,aAAa,OAAO,CAAC,kBAAkB;AAEzE,MAAM,YAAY,CAAC,aAAa;IAC9B;;IACA,IAAI,aAAa,aAAa,OAAO,CAAC,SAAS;IAC/C,IAAI,cAAc,aAAa,OAAO,CAAC,gBAAgB;AACzD;AAEA,MAAM,cAAc;IAClB;;IACA,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;AAC1B;AAEA,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAChC,CAAC;IACC,MAAM,QAAQ;IACd,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,IAAI,eAAe;AACnB,IAAI,kBAAkB,EAAE;AAExB,MAAM,eAAe,CAAC,OAAO,QAAQ,IAAI;IACvC,gBAAgB,OAAO,CAAC,CAAC;QACvB,IAAI,OAAO;YACT,QAAQ,MAAM,CAAC;QACjB,OAAO;YACL,QAAQ,OAAO,CAAC;QAClB;IACF;IACA,kBAAkB,EAAE;AACtB;AAEA,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,iBAAiB,QAAQ;QAC7D,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,MAAM,eAAe;IACrB,IAAI,CAAC,cAAc;QACjB;QACA,OAAO,QAAQ,MAAM,CAAC;IACxB;IAEA,IAAI,cAAc;QAChB,OAAO,IAAI,QAAQ,CAAC,SAAS;YAC3B,gBAAgB,IAAI,CAAC;gBAAE;gBAAS;YAAO;QACzC,GACG,IAAI,CAAC,CAAC;YACL,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;YACzD,OAAO,UAAU;QACnB,GACC,KAAK,CAAC,CAAC,eAAiB,QAAQ,MAAM,CAAC;IAC5C;IAEA,gBAAgB,MAAM,GAAG;IACzB,eAAe;IAEf,IAAI;QACF,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,aAAa,CAAC,EAAE;YAAE;QAAa;QAC5E,MAAM,iBAAiB,SAAS,IAAI,EAAE;QACtC,MAAM,kBAAkB,SAAS,IAAI,EAAE,gBAAgB;QAEvD,UAAU,gBAAgB;QAC1B,aAAa,MAAM;QAEnB,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,gBAAgB;QAClE,OAAO,UAAU;IACnB,EAAE,OAAO,cAAc;QACrB,aAAa,cAAc;QAC3B;QACA,wCAAmC;YACjC,aAAa,UAAU,CAAC;QAC1B;QACA,OAAO,QAAQ,MAAM,CAAC;IACxB,SAAU;QACR,eAAe;IACjB;AACF;uCAGa"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/compat.js"],"sourcesContent":["const ROLE_TO_USER_TYPE = {\n  STUDENT: \"student\",\n  TEACHER: \"teacher\",\n  DEPT_STAFF: \"admin\",\n  FACULTY_ADMIN: \"admin\",\n  SUPER_ADMIN: \"admin\",\n};\n\nconst ACTIVITY_STATUS_TO_API = {\n  planned: \"OPEN_REGISTRATION\",\n  inprogress: \"IN_PROGRESS\",\n  completed: \"CLOSED\",\n  cancelled: \"CANCELLED\",\n};\n\nconst LEGACY_ATTENDANCE_ACTION = {\n  APPLIED: \"request-revision\",\n  APPROVED: \"approve\",\n  REJECTED: \"request-revision\",\n  REVISION_REQUIRED: \"request-revision\",\n  CANCELLED: \"request-revision\",\n  NO_SHOW: \"request-revision\",\n  SUBMITTED: \"request-revision\",\n  COMPLETED: \"approve\",\n  joined: \"request-revision\",\n  accepted: \"approve\",\n  approved: \"approve\",\n  completed: \"approve\",\n  rejected: \"request-revision\",\n  uncompleted: \"request-revision\",\n  Inprogress: \"request-revision\",\n};\n\nfunction safeString(value) {\n  return value === null || value === undefined ? \"\" : String(value);\n}\n\nexport function splitFullName(fullname) {\n  const clean = safeString(fullname).trim();\n  if (!clean) {\n    return { firstName: \"User\", lastName: \"\" };\n  }\n  const parts = clean.split(/\\s+/);\n  const firstName = parts.shift() || \"User\";\n  const lastName = parts.join(\" \");\n  return { firstName, lastName };\n}\n\nexport function roleToUserType(role) {\n  return ROLE_TO_USER_TYPE[role] || \"student\";\n}\n\nexport function mapActivityStatusFromApi(status) {\n  return status || \"OPEN_REGISTRATION\";\n}\n\nexport function mapActivityStatusToApi(status) {\n  return ACTIVITY_STATUS_TO_API[status] || status || undefined;\n}\n\nexport function mapApplicationStatusFromApi(status) {\n  return status || \"APPLIED\";\n}\n\nexport function mapLegacyAttendanceAction(status) {\n  return LEGACY_ATTENDANCE_ACTION[status] || \"request-revision\";\n}\n\nexport function mapEvidenceTypeToTypeActivity(requiredEvidenceType) {\n  const mapping = {\n    PHOTO: { id: \"PHOTO\", name: \"ใช้รูปภาพ\" },\n    PDF: { id: \"PDF\", name: \"ใช้ PDF\" },\n    BOTH: { id: \"BOTH\", name: \"ทั่วไป\" },\n  };\n  return mapping[requiredEvidenceType] || mapping.BOTH;\n}\n\nexport function normalizeUser(user) {\n  if (!user) return null;\n\n  const fullNameFromApi = [user.firstName, user.lastName].filter(Boolean).join(\" \").trim();\n  const fullname = user.fullname || fullNameFromApi || user.username || user.email || \"Unknown\";\n\n  const faculty =\n    user.faculty ||\n    user.studentProfile?.faculty ||\n    user.teacherProfile?.faculty ||\n    user.staffProfile?.faculty ||\n    null;\n\n  const department =\n    user.department ||\n    user.studentProfile?.department ||\n    user.teacherProfile?.department ||\n    user.staffProfile?.department ||\n    null;\n\n  const major = user.major || user.studentProfile?.major || null;\n\n  const studentCode = user.studentCode || user.studentProfile?.studentCode || null;\n  const classYear = user.classYear || user.studentProfile?.classYear || null;\n  const academicYear = user.academicYear || user.studentProfile?.academicYear || null;\n\n  return {\n    id: user.id,\n    role: user.role,\n    userType: roleToUserType(user.role),\n    username: user.username || null,\n    email: user.email || null,\n    fullname,\n    name: fullname,\n    firstName: user.firstName || splitFullName(fullname).firstName,\n    lastName: user.lastName || splitFullName(fullname).lastName,\n    phone: user.phone || null,\n    status: user.status || \"ACTIVE\",\n    studentId: studentCode,\n    studentCode,\n    classYear,\n    academicYear,\n    level: classYear,\n    facultyId:\n      user.facultyId ||\n      user.studentProfile?.facultyId ||\n      user.teacherProfile?.facultyId ||\n      user.staffProfile?.facultyId ||\n      faculty?.id ||\n      null,\n    faculty,\n    departmentId:\n      user.departmentId ||\n      user.studentProfile?.departmentId ||\n      user.teacherProfile?.departmentId ||\n      user.staffProfile?.departmentId ||\n      department?.id ||\n      null,\n    department,\n    majorId: user.majorId || user.studentProfile?.majorId || major?.id || null,\n    major,\n  };\n}\n\nexport function normalizeAttendance(application, activity = null) {\n  const normalizedUser = normalizeUser(application?.student || application?.user || null);\n\n  return {\n    id: application.id,\n    activityId: application.activityId || activity?.id || null,\n    userId: application.studentUserId || normalizedUser?.id || null,\n    status: mapApplicationStatusFromApi(application.status),\n    reason: application.remark || null,\n    createdAt: application.submittedAt || application.createdAt || null,\n    updatedAt: application.updatedAt || null,\n    user: normalizedUser,\n    activity,\n    attendanceId: application.id,\n  };\n}\n\nexport function normalizeActivity(activity) {\n  const applications = Array.isArray(activity?.applications) ? activity.applications : [];\n  const attendances = applications.map((item) => normalizeAttendance(item));\n\n  const peopleCount = applications.filter((item) => [\"APPLIED\", \"APPROVED\"].includes(item.status)).length;\n\n  const typeActivity = mapEvidenceTypeToTypeActivity(activity.requiredEvidenceType);\n\n  return {\n    id: activity.id,\n    name: activity.title,\n    title: activity.title,\n    description: activity.note || \"\",\n    note: activity.note || \"\",\n    location: activity.location,\n    address: activity.location,\n    hour: activity.hours,\n    hours: activity.hours,\n    activityHours: activity.hours,\n    maxPeopleCount: activity.capacity,\n    maxStudents: activity.capacity,\n    peopleCount,\n    startDate: activity.startAt,\n    endDate: activity.endAt,\n    date: activity.applyCloseAt,\n    applyOpen: activity.applyOpenAt,\n    applyClose: activity.applyCloseAt,\n    status: mapActivityStatusFromApi(activity.status),\n    departmentId: activity.ownerDepartmentId || null,\n    facultyId: activity.ownerFacultyId || null,\n    department: activity.ownerDepartment || null,\n    faculty: activity.ownerFaculty || null,\n    typeActivity,\n    typeActivityId: typeActivity.id,\n    requiredEvidenceType: activity.requiredEvidenceType,\n    ownerScope: activity.ownerScope,\n    attendances,\n    applications,\n    createdBy: activity.createdBy || null,\n    majorJoins: [],\n    fileActivities: [],\n    remarks: activity.note || \"\",\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/user.js"],"sourcesContent":["import apiClient from \"./apiClient\";\nimport { normalizeUser, roleToUserType } from \"./compat\";\nimport { getAllActivities } from \"./activity\";\n\nconst getCurrentUser = () => {\n  if (typeof window === \"undefined\") return null;\n  try {\n    return JSON.parse(localStorage.getItem(\"user\") || \"null\");\n  } catch (_error) {\n    return null;\n  }\n};\n\nconst normalizeUserList = (items) =>\n  items.map((item) => {\n    const user = normalizeUser(item);\n    return {\n      ...user,\n      userType: roleToUserType(item.role),\n      department: user.department,\n      major: user.major,\n      departmentId: user.departmentId,\n      majorId: user.majorId,\n      level: user.level,\n      studentId: user.studentId,\n      role: item.role,\n      studentProfile: item.studentProfile || null,\n      teacherProfile: item.teacherProfile || null,\n      staffProfile: item.staffProfile || null,\n    };\n  });\n\nconst buildCreatePayload = (userData = {}) => {\n  const currentUser = getCurrentUser();\n  const role = userData.role || \"STUDENT\";\n\n  const payload = {\n    username:\n      userData.username ||\n      userData.email ||\n      userData.studentProfile?.studentCode ||\n      `user_${Date.now()}`,\n    email: userData.email || undefined,\n    password: userData.password || \"ChangeMe123!\",\n    firstName: userData.firstName,\n    lastName: userData.lastName || \"\",\n    phone: userData.phone || undefined,\n    role,\n    status: userData.status || \"ACTIVE\",\n  };\n\n  const fallbackFacultyId = currentUser?.facultyId || userData.facultyId;\n\n  if (role === \"STUDENT\") {\n    payload.studentProfile = {\n      studentCode: userData.studentProfile?.studentCode || userData.studentCode,\n      facultyId:\n        userData.studentProfile?.facultyId ||\n        userData.facultyId ||\n        fallbackFacultyId,\n      departmentId: userData.studentProfile?.departmentId || userData.departmentId,\n      majorId: userData.studentProfile?.majorId || userData.majorId,\n      classYear:\n        Number(userData.studentProfile?.classYear || userData.classYear || userData.level) || 1,\n      academicYear:\n        Number(userData.studentProfile?.academicYear || userData.academicYear) || 2568,\n      registrarVerified: Boolean(userData.studentProfile?.registrarVerified ?? true),\n    };\n  }\n\n  if (role === \"TEACHER\") {\n    payload.teacherProfile = {\n      employeeCode: userData.teacherProfile?.employeeCode || userData.employeeCode || undefined,\n      facultyId:\n        userData.teacherProfile?.facultyId ||\n        userData.facultyId ||\n        fallbackFacultyId,\n      departmentId: userData.teacherProfile?.departmentId || userData.departmentId,\n    };\n  }\n\n  if (role === \"DEPT_STAFF\" || role === \"FACULTY_ADMIN\") {\n    const staffType = role === \"FACULTY_ADMIN\" ? \"FACULTY_ADMIN\" : \"DEPT_STAFF\";\n    payload.staffProfile = {\n      staffType,\n      facultyId:\n        userData.staffProfile?.facultyId ||\n        userData.facultyId ||\n        fallbackFacultyId,\n      departmentId:\n        staffType === \"FACULTY_ADMIN\"\n          ? null\n          : userData.staffProfile?.departmentId || userData.departmentId,\n    };\n  }\n\n  return payload;\n};\n\nconst buildUpdatePayload = (userData = {}) => {\n  const role = userData.role;\n\n  const payload = {\n    username: userData.username,\n    email: userData.email,\n    password: userData.password || undefined,\n    firstName: userData.firstName,\n    lastName: userData.lastName,\n    phone: userData.phone,\n    status: userData.status,\n  };\n\n  if (role === \"STUDENT\") {\n    payload.studentProfile = userData.studentProfile || {\n      studentCode: userData.studentCode,\n      facultyId: userData.facultyId,\n      departmentId: userData.departmentId,\n      majorId: userData.majorId,\n      classYear: userData.classYear || userData.level,\n      academicYear: userData.academicYear,\n      registrarVerified: userData.registrarVerified,\n    };\n  }\n\n  if (role === \"TEACHER\") {\n    payload.teacherProfile = userData.teacherProfile || {\n      employeeCode: userData.employeeCode,\n      facultyId: userData.facultyId,\n      departmentId: userData.departmentId,\n    };\n  }\n\n  if (role === \"DEPT_STAFF\" || role === \"FACULTY_ADMIN\") {\n    const staffType = role === \"FACULTY_ADMIN\" ? \"FACULTY_ADMIN\" : \"DEPT_STAFF\";\n    payload.staffProfile = userData.staffProfile || {\n      staffType,\n      facultyId: userData.facultyId,\n      departmentId: staffType === \"FACULTY_ADMIN\" ? null : userData.departmentId,\n    };\n  }\n\n  return payload;\n};\n\nconst compact = (obj) =>\n  Object.fromEntries(\n    Object.entries(obj).filter(([, value]) => value !== undefined),\n  );\n\nexport const getAllUsers = async (params = {}) => {\n  const response = await apiClient.get(\"/users\", { params });\n  const data = Array.isArray(response.data) ? response.data : [];\n  return normalizeUserList(data);\n};\n\nexport const getUsersByType = async (userType) => {\n  try {\n    const users = await getAllUsers();\n    return users.filter((user) => user.userType === userType);\n  } catch (error) {\n    if (userType !== \"student\") {\n      throw error;\n    }\n\n    const activities = await getAllActivities();\n    const seen = new Map();\n\n    activities.forEach((activity) => {\n      (activity.attendances || []).forEach((attendance) => {\n        const user = attendance.user;\n        if (!user?.id || seen.has(user.id)) return;\n        seen.set(user.id, {\n          ...user,\n          userType: \"student\",\n        });\n      });\n    });\n\n    return Array.from(seen.values());\n  }\n};\n\nexport const getUserById = async (userId) => {\n  const response = await apiClient.get(`/users/${userId}`);\n  return normalizeUser(response.data);\n};\n\nexport const createUser = async (userData) => {\n  const payload = buildCreatePayload(userData);\n  const response = await apiClient.post(\"/users\", payload);\n  return normalizeUser(response.data);\n};\n\nexport const updateUser = async (userId, userData) => {\n  const payload = compact(buildUpdatePayload(userData));\n  if (payload.studentProfile) payload.studentProfile = compact(payload.studentProfile);\n  if (payload.teacherProfile) payload.teacherProfile = compact(payload.teacherProfile);\n  if (payload.staffProfile) payload.staffProfile = compact(payload.staffProfile);\n\n  const response = await apiClient.patch(`/users/${userId}`, payload);\n  return normalizeUser(response.data);\n};\n\nexport const deleteUser = async (userId) => {\n  const response = await apiClient.delete(`/users/${userId}`);\n  return response.data;\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 501, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/services/department.js"],"sourcesContent":["import apiClient from \"./apiClient\";\n\nconst uniqueById = (items) => {\n  const map = new Map();\n  items.forEach((item) => {\n    if (item?.id) map.set(item.id, item);\n  });\n  return Array.from(map.values());\n};\n\nconst fromActivitiesFallback = async () => {\n  const response = await apiClient.get(\"/activities\");\n  const activities = Array.isArray(response.data) ? response.data : [];\n  const departments = activities\n    .map((activity) => activity.ownerDepartment)\n    .filter((department) => department?.id);\n\n  return uniqueById(departments);\n};\n\nconst isAuthzError = (error) =>\n  [401, 403].includes(error?.response?.status);\n\nexport const getAllDepartments = async (params = {}) => {\n  try {\n    const response = await apiClient.get(\"/departments\", { params });\n    return Array.isArray(response.data) ? response.data : [];\n  } catch (error) {\n    if (isAuthzError(error)) {\n      return fromActivitiesFallback();\n    }\n    throw error;\n  }\n};\n\nexport const getDepartmentById = async (id) => {\n  const response = await apiClient.get(`/departments/${id}`);\n  return response.data;\n};\n\nexport const createDepartment = async (payload) => {\n  const response = await apiClient.post(\"/departments\", payload);\n  return response.data;\n};\n\nexport const updateDepartment = async (id, payload) => {\n  const response = await apiClient.patch(`/departments/${id}`, payload);\n  return response.data;\n};\n\nexport const deleteDepartment = async (id) => {\n  const response = await apiClient.delete(`/departments/${id}`);\n  return response.data;\n};\n\nexport const getAllFaculties = async () => {\n  const response = await apiClient.get(\"/departments/faculties\");\n  return Array.isArray(response.data) ? response.data : [];\n};\n\nexport const getMajorsByDepartment = async (departmentId) => {\n  if (!departmentId) return [];\n  const response = await apiClient.get(`/departments/${departmentId}/majors`);\n  return Array.isArray(response.data) ? response.data : [];\n};\n\nexport const createMajor = async (departmentId, payload) => {\n  const response = await apiClient.post(`/departments/${departmentId}/majors`, payload);\n  return response.data;\n};\n\nexport const updateMajor = async (departmentId, majorId, payload) => {\n  const response = await apiClient.patch(\n    `/departments/${departmentId}/majors/${majorId}`,\n    payload,\n  );\n  return response.data;\n};\n\nexport const deleteMajor = async (departmentId, majorId) => {\n  const response = await apiClient.delete(`/departments/${departmentId}/majors/${majorId}`);\n  return response.data;\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA,MAAM,aAAa,CAAC;IAClB,MAAM,MAAM,IAAI;IAChB,MAAM,OAAO,CAAC,CAAC;QACb,IAAI,MAAM,IAAI,IAAI,GAAG,CAAC,KAAK,EAAE,EAAE;IACjC;IACA,OAAO,MAAM,IAAI,CAAC,IAAI,MAAM;AAC9B;AAEA,MAAM,yBAAyB;IAC7B,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAC;IACrC,MAAM,aAAa,MAAM,OAAO,CAAC,SAAS,IAAI,IAAI,SAAS,IAAI,GAAG,EAAE;IACpE,MAAM,cAAc,WACjB,GAAG,CAAC,CAAC,WAAa,SAAS,eAAe,EAC1C,MAAM,CAAC,CAAC,aAAe,YAAY;IAEtC,OAAO,WAAW;AACpB;AAEA,MAAM,eAAe,CAAC,QACpB;QAAC;QAAK;KAAI,CAAC,QAAQ,CAAC,OAAO,UAAU;AAEhC,MAAM,oBAAoB,OAAO,SAAS,CAAC,CAAC;IACjD,IAAI;QACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAC,gBAAgB;YAAE;QAAO;QAC9D,OAAO,MAAM,OAAO,CAAC,SAAS,IAAI,IAAI,SAAS,IAAI,GAAG,EAAE;IAC1D,EAAE,OAAO,OAAO;QACd,IAAI,aAAa,QAAQ;YACvB,OAAO;QACT;QACA,MAAM;IACR;AACF;AAEO,MAAM,oBAAoB,OAAO;IACtC,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAC,CAAC,aAAa,EAAE,IAAI;IACzD,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,mBAAmB,OAAO;IACrC,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAC,gBAAgB;IACtD,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,mBAAmB,OAAO,IAAI;IACzC,MAAM,WAAW,MAAM,0IAAS,CAAC,KAAK,CAAC,CAAC,aAAa,EAAE,IAAI,EAAE;IAC7D,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,mBAAmB,OAAO;IACrC,MAAM,WAAW,MAAM,0IAAS,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,IAAI;IAC5D,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,kBAAkB;IAC7B,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAC;IACrC,OAAO,MAAM,OAAO,CAAC,SAAS,IAAI,IAAI,SAAS,IAAI,GAAG,EAAE;AAC1D;AAEO,MAAM,wBAAwB,OAAO;IAC1C,IAAI,CAAC,cAAc,OAAO,EAAE;IAC5B,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;IAC1E,OAAO,MAAM,OAAO,CAAC,SAAS,IAAI,IAAI,SAAS,IAAI,GAAG,EAAE;AAC1D;AAEO,MAAM,cAAc,OAAO,cAAc;IAC9C,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC,EAAE;IAC7E,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,cAAc,OAAO,cAAc,SAAS;IACvD,MAAM,WAAW,MAAM,0IAAS,CAAC,KAAK,CACpC,CAAC,aAAa,EAAE,aAAa,QAAQ,EAAE,SAAS,EAChD;IAEF,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,cAAc,OAAO,cAAc;IAC9C,MAAM,WAAW,MAAM,0IAAS,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,aAAa,QAAQ,EAAE,SAAS;IACxF,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":["file:///home/siripoom/tas/tas-front/src/app/admin/user/page.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  Button,\n  Card,\n  Form,\n  Input,\n  Modal,\n  Popconfirm,\n  Select,\n  Space,\n  Spin,\n  Table,\n  Tabs,\n  Tag,\n  message,\n} from \"antd\";\nimport { Edit, Eye, Plus, Search, Trash2, Users } from \"lucide-react\";\nimport {\n  createUser,\n  deleteUser,\n  getAllUsers,\n  updateUser,\n} from \"@/services/user\";\nimport {\n  getAllDepartments,\n  getAllFaculties,\n  getMajorsByDepartment,\n} from \"@/services/department\";\n\nconst ROLE_LABEL = {\n  STUDENT: \"นักศึกษา\",\n  TEACHER: \"อาจารย์\",\n  DEPT_STAFF: \"เจ้าหน้าที่ภาควิชา\",\n  FACULTY_ADMIN: \"เจ้าหน้าที่คณะ\",\n  SUPER_ADMIN: \"SUPER_ADMIN\",\n};\n\nconst TAB_ROLE_MAP = {\n  student: [\"STUDENT\"],\n  deptStaff: [\"TEACHER\", \"DEPT_STAFF\"],\n  adminStaff: [\"FACULTY_ADMIN\", \"SUPER_ADMIN\"],\n};\n\nexport default function UserPage() {\n  const router = useRouter();\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [faculties, setFaculties] = useState([]);\n  const [departments, setDepartments] = useState([]);\n  const [majors, setMajors] = useState([]);\n  const [activeTab, setActiveTab] = useState(\"student\");\n  const [search, setSearch] = useState(\"\");\n  const [filterDepartmentId, setFilterDepartmentId] = useState(undefined);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isViewModalOpen, setIsViewModalOpen] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [viewingUser, setViewingUser] = useState(null);\n  const [sessionUser, setSessionUser] = useState(null);\n  const [accessDenied, setAccessDenied] = useState(false);\n\n  const watchedRole = Form.useWatch(\"role\", form);\n  const watchedFacultyId = Form.useWatch(\"facultyId\", form);\n  const watchedDepartmentId = Form.useWatch(\"departmentId\", form);\n\n  const currentRole = watchedRole || editingUser?.role || \"STUDENT\";\n  const isFacultyAdmin = sessionUser?.role === \"FACULTY_ADMIN\";\n\n  const loadUsers = async () => {\n    setLoading(true);\n    try {\n      const data = await getAllUsers();\n      setUsers(Array.isArray(data) ? data : []);\n    } catch (error) {\n      message.error(\"ไม่สามารถโหลดข้อมูลผู้ใช้ได้\");\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadLookups = async () => {\n    try {\n      const [facultyData, departmentData] = await Promise.all([\n        getAllFaculties(),\n        getAllDepartments(),\n      ]);\n      setFaculties(Array.isArray(facultyData) ? facultyData : []);\n      setDepartments(Array.isArray(departmentData) ? departmentData : []);\n    } catch (error) {\n      message.error(\"ไม่สามารถโหลดข้อมูลคณะ/ภาควิชาได้\");\n      console.error(error);\n    }\n  };\n\n  useEffect(() => {\n    const userStr = localStorage.getItem(\"user\");\n    const user = userStr ? JSON.parse(userStr) : null;\n    setSessionUser(user);\n\n    if (user?.role === \"DEPT_STAFF\") {\n      setAccessDenied(true);\n      message.error(\"คุณไม่มีสิทธิ์เข้าถึงเมนูจัดการผู้ใช้\");\n      router.push(\"/admin/home\");\n      return;\n    }\n\n    loadLookups();\n    loadUsers();\n  }, [router]);\n\n  useEffect(() => {\n    if (currentRole !== \"STUDENT\" || !watchedDepartmentId) {\n      setMajors([]);\n      if (currentRole !== \"STUDENT\") {\n        form.setFieldValue(\"majorId\", undefined);\n      }\n      return;\n    }\n\n    const loadMajors = async () => {\n      try {\n        const data = await getMajorsByDepartment(watchedDepartmentId);\n        setMajors(Array.isArray(data) ? data : []);\n      } catch (error) {\n        message.error(\"ไม่สามารถโหลดข้อมูลสาขาวิชาได้\");\n        console.error(error);\n      }\n    };\n\n    loadMajors();\n  }, [currentRole, watchedDepartmentId, form]);\n\n  useEffect(() => {\n    if (!watchedFacultyId) return;\n    if (watchedDepartmentId) return;\n    setMajors([]);\n    form.setFieldValue(\"majorId\", undefined);\n  }, [watchedFacultyId, watchedDepartmentId, form]);\n\n  const usersInTab = useMemo(\n    () => users.filter((user) => TAB_ROLE_MAP[activeTab].includes(user.role)),\n    [users, activeTab],\n  );\n\n  const filteredUsers = useMemo(() => {\n    let data = [...usersInTab];\n    if (search) {\n      const q = search.toLowerCase();\n      data = data.filter((user) => {\n        const code =\n          user.studentProfile?.studentCode ||\n          user.teacherProfile?.employeeCode ||\n          user.username ||\n          \"\";\n        return (\n          `${user.firstName || \"\"} ${user.lastName || \"\"}`\n            .toLowerCase()\n            .includes(q) ||\n          String(user.email || \"\")\n            .toLowerCase()\n            .includes(q) ||\n          String(code).toLowerCase().includes(q)\n        );\n      });\n    }\n\n    if (filterDepartmentId) {\n      data = data.filter((user) => user.departmentId === filterDepartmentId);\n    }\n\n    return data;\n  }, [usersInTab, search, filterDepartmentId]);\n\n  const departmentOptions = useMemo(() => {\n    if (!watchedFacultyId) return departments;\n    return departments.filter((item) => item.facultyId === watchedFacultyId);\n  }, [departments, watchedFacultyId]);\n\n  const roleOptionsByTab = useMemo(() => {\n    if (activeTab === \"deptStaff\") {\n      return [\n        { value: \"TEACHER\", label: \"อาจารย์\" },\n        { value: \"DEPT_STAFF\", label: \"เจ้าหน้าที่ภาควิชา\" },\n      ];\n    }\n\n    if (activeTab === \"adminStaff\") {\n      return [{ value: \"FACULTY_ADMIN\", label: \"เจ้าหน้าที่คณะ\" }];\n    }\n\n    return [{ value: \"STUDENT\", label: \"นักศึกษา\" }];\n  }, [activeTab]);\n\n  const defaultRoleByTab = useMemo(() => {\n    if (activeTab === \"deptStaff\") return \"TEACHER\";\n    if (activeTab === \"adminStaff\") return \"FACULTY_ADMIN\";\n    return \"STUDENT\";\n  }, [activeTab]);\n\n  const openCreateModal = () => {\n    const nextRole = defaultRoleByTab;\n    setEditingUser(null);\n    setMajors([]);\n    form.resetFields();\n    form.setFieldsValue({\n      role: nextRole,\n      status: \"ACTIVE\",\n      facultyId: isFacultyAdmin ? sessionUser?.facultyId : undefined,\n      classYear: 1,\n      academicYear: 2568,\n    });\n    setIsModalOpen(true);\n  };\n\n  const openEditModal = async (user) => {\n    if (user.role === \"SUPER_ADMIN\") return;\n\n    setEditingUser(user);\n    const role = user.role;\n\n    const values = {\n      role,\n      status: user.status,\n      username: user.username || undefined,\n      email: user.email || undefined,\n      firstName: user.firstName || \"\",\n      lastName: user.lastName || \"\",\n      phone: user.phone || undefined,\n      facultyId:\n        user.studentProfile?.facultyId ||\n        user.teacherProfile?.facultyId ||\n        user.staffProfile?.facultyId ||\n        undefined,\n      departmentId:\n        user.studentProfile?.departmentId ||\n        user.teacherProfile?.departmentId ||\n        user.staffProfile?.departmentId ||\n        undefined,\n      studentCode: user.studentProfile?.studentCode || undefined,\n      majorId: user.studentProfile?.majorId || undefined,\n      classYear: user.studentProfile?.classYear || undefined,\n      academicYear: user.studentProfile?.academicYear || undefined,\n      employeeCode: user.teacherProfile?.employeeCode || undefined,\n    };\n\n    if (role === \"STUDENT\" && values.departmentId) {\n      try {\n        const majorData = await getMajorsByDepartment(values.departmentId);\n        setMajors(Array.isArray(majorData) ? majorData : []);\n      } catch (_error) {\n        setMajors([]);\n      }\n    } else {\n      setMajors([]);\n    }\n\n    form.setFieldsValue(values);\n    setIsModalOpen(true);\n  };\n\n  const openViewModal = (user) => {\n    setViewingUser(user);\n    setIsViewModalOpen(true);\n  };\n\n  const handleDelete = async (user) => {\n    try {\n      await deleteUser(user.id);\n      message.success(\"ลบผู้ใช้สำเร็จ\");\n      await loadUsers();\n    } catch (error) {\n      const text = error?.response?.data?.message || \"ไม่สามารถลบผู้ใช้ได้\";\n      message.error(text);\n    }\n  };\n\n  const buildPayloadFromForm = (values) => {\n    const role = values.role;\n    const payload = {\n      role,\n      username: values.username || undefined,\n      email: values.email || undefined,\n      password: values.password || undefined,\n      firstName: values.firstName,\n      lastName: values.lastName,\n      phone: values.phone || undefined,\n      status: values.status,\n    };\n\n    if (role === \"STUDENT\") {\n      payload.studentProfile = {\n        studentCode: values.studentCode,\n        facultyId: values.facultyId,\n        departmentId: values.departmentId,\n        majorId: values.majorId,\n        classYear: Number(values.classYear),\n        academicYear: Number(values.academicYear),\n        registrarVerified: true,\n      };\n    }\n\n    if (role === \"TEACHER\") {\n      payload.teacherProfile = {\n        employeeCode: values.employeeCode || undefined,\n        facultyId: values.facultyId,\n        departmentId: values.departmentId,\n      };\n    }\n\n    if (role === \"DEPT_STAFF\" || role === \"FACULTY_ADMIN\") {\n      payload.staffProfile = {\n        staffType: role === \"FACULTY_ADMIN\" ? \"FACULTY_ADMIN\" : \"DEPT_STAFF\",\n        facultyId: values.facultyId,\n        departmentId: role === \"FACULTY_ADMIN\" ? null : values.departmentId,\n      };\n    }\n\n    return payload;\n  };\n\n  const submitForm = async (values) => {\n    setSaving(true);\n    try {\n      const payload = buildPayloadFromForm(values);\n\n      if (editingUser) {\n        await updateUser(editingUser.id, payload);\n        message.success(\"แก้ไขผู้ใช้สำเร็จ\");\n      } else {\n        await createUser(payload);\n        message.success(\"เพิ่มผู้ใช้สำเร็จ\");\n      }\n\n      setIsModalOpen(false);\n      form.resetFields();\n      setEditingUser(null);\n      await loadUsers();\n    } catch (error) {\n      const text =\n        error?.response?.data?.message || \"ไม่สามารถบันทึกข้อมูลผู้ใช้ได้\";\n      message.error(text);\n      console.error(error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const columns = [\n    {\n      title: \"ลำดับ\",\n      width: 80,\n      render: (_, __, index) => index + 1,\n    },\n    {\n      title: \"รหัส\",\n      width: 170,\n      render: (_, row) =>\n        row.studentProfile?.studentCode ||\n        row.teacherProfile?.employeeCode ||\n        row.username ||\n        \"-\",\n    },\n    {\n      title: \"ชื่อ-นามสกุล\",\n      render: (_, row) =>\n        `${row.firstName || \"\"} ${row.lastName || \"\"}`.trim() || \"-\",\n    },\n    {\n      title: \"บทบาท\",\n      width: 180,\n      render: (_, row) => (\n        <Tag color=\"blue\">{ROLE_LABEL[row.role] || row.role}</Tag>\n      ),\n    },\n    {\n      title: \"คณะ\",\n      width: 190,\n      render: (_, row) =>\n        row.studentProfile?.faculty?.name ||\n        row.teacherProfile?.faculty?.name ||\n        row.staffProfile?.faculty?.name ||\n        \"-\",\n    },\n    {\n      title: \"ภาควิชา\",\n      width: 220,\n      render: (_, row) =>\n        row.studentProfile?.department?.name ||\n        row.teacherProfile?.department?.name ||\n        row.staffProfile?.department?.name ||\n        \"-\",\n    },\n    {\n      title: \"สถานะ\",\n      width: 120,\n      render: (_, row) => {\n        const color =\n          row.status === \"ACTIVE\"\n            ? \"green\"\n            : row.status === \"LOCKED\"\n              ? \"red\"\n              : \"orange\";\n        return <Tag color={color}>{row.status}</Tag>;\n      },\n    },\n    {\n      title: \"จัดการ\",\n      width: 160,\n      render: (_, row) => {\n        const readOnly = row.role === \"SUPER_ADMIN\";\n        return (\n          <Space>\n            <Button\n              type=\"text\"\n              icon={<Eye size={18} />}\n              onClick={() => openViewModal(row)}\n              title=\"ดูรายละเอียด\"\n            />\n            {!readOnly && (\n              <Button\n                type=\"text\"\n                icon={<Edit size={18} />}\n                onClick={() => openEditModal(row)}\n                title=\"แก้ไข\"\n              />\n            )}\n            {!readOnly && (\n              <Popconfirm\n                title=\"ยืนยันการลบผู้ใช้\"\n                description=\"ต้องการลบผู้ใช้นี้หรือไม่\"\n                onConfirm={() => handleDelete(row)}\n                okText=\"ลบ\"\n                cancelText=\"ยกเลิก\"\n              >\n                <Button\n                  danger\n                  type=\"text\"\n                  icon={<Trash2 size={18} />}\n                  title=\"ลบ\"\n                />\n              </Popconfirm>\n            )}\n          </Space>\n        );\n      },\n    },\n  ];\n\n  const tabItems = [\n    {\n      key: \"student\",\n      label: (\n        <span className=\"flex items-center gap-2\">\n          <Users size={16} />\n          นักศึกษา ({users.filter((item) => item.role === \"STUDENT\").length})\n        </span>\n      ),\n    },\n    {\n      key: \"deptStaff\",\n      label: (\n        <span className=\"flex items-center gap-2\">\n          <Users size={16} />\n          อาจารย์/เจ้าหน้าที่ภาควิชา (\n          {\n            users.filter((item) =>\n              [\"TEACHER\", \"DEPT_STAFF\"].includes(item.role),\n            ).length\n          }\n          )\n        </span>\n      ),\n    },\n    {\n      key: \"adminStaff\",\n      label: (\n        <span className=\"flex items-center gap-2\">\n          <Users size={16} />\n          แอดมิน/เจ้าหน้าที่คณะ (\n          {\n            users.filter((item) =>\n              [\"FACULTY_ADMIN\", \"SUPER_ADMIN\"].includes(item.role),\n            ).length\n          }\n          )\n        </span>\n      ),\n    },\n  ];\n\n  if (accessDenied) return null;\n\n  return (\n    <Spin spinning={loading}>\n      <div>\n        <Tabs\n          activeKey={activeTab}\n          onChange={(key) => {\n            setActiveTab(key);\n            setSearch(\"\");\n            setFilterDepartmentId(undefined);\n          }}\n          items={tabItems}\n          className=\"mb-4\"\n        />\n\n        <Card className=\"mb-4\">\n          <div className=\"grid grid-cols-12 gap-3\">\n            <div className=\"col-span-12 md:col-span-5\">\n              <Input\n                value={search}\n                onChange={(event) => setSearch(event.target.value)}\n                prefix={<Search size={16} />}\n                placeholder=\"ค้นหาจากชื่อ/อีเมล/รหัส\"\n              />\n            </div>\n            <div className=\"col-span-12 md:col-span-4\">\n              <Select\n                value={filterDepartmentId}\n                onChange={setFilterDepartmentId}\n                allowClear\n                placeholder=\"กรองตามภาควิชา\"\n                options={departments.map((item) => ({\n                  label: item.name,\n                  value: item.id,\n                }))}\n                style={{ width: \"100%\" }}\n              />\n            </div>\n            <div className=\"col-span-12 md:col-span-3 flex justify-end\">\n              <Button\n                type=\"primary\"\n                icon={<Plus size={16} />}\n                onClick={openCreateModal}\n                style={{ backgroundColor: \"#0A894C\", borderColor: \"#0A894C\" }}\n              >\n                เพิ่มผู้ใช้\n              </Button>\n            </div>\n          </div>\n        </Card>\n\n        <Card>\n          <Table\n            rowKey=\"id\"\n            columns={columns}\n            dataSource={filteredUsers}\n            pagination={{ pageSize: 10, showSizeChanger: true }}\n            scroll={{ x: 1100 }}\n          />\n        </Card>\n\n        <Modal\n          title={editingUser ? \"แก้ไขผู้ใช้\" : \"เพิ่มผู้ใช้\"}\n          open={isModalOpen}\n          onCancel={() => {\n            setIsModalOpen(false);\n            setEditingUser(null);\n            setMajors([]);\n            form.resetFields();\n          }}\n          onOk={() => form.submit()}\n          okText={editingUser ? \"บันทึก\" : \"สร้าง\"}\n          cancelText=\"ยกเลิก\"\n          confirmLoading={saving}\n          width={760}\n        >\n          <Form form={form} layout=\"vertical\" onFinish={submitForm}>\n            <div className=\"grid grid-cols-12 gap-3\">\n              {!(!editingUser && activeTab === \"deptStaff\") && (\n                <Form.Item name=\"role\" className=\"col-span-12\" hidden>\n                  <Input />\n                </Form.Item>\n              )}\n\n              {!editingUser && activeTab === \"deptStaff\" && (\n                <Form.Item\n                  label=\"ประเภทบัญชี\"\n                  name=\"role\"\n                  className=\"col-span-12\"\n                  rules={[{ required: true, message: \"กรุณาเลือกประเภทบัญชี\" }]}\n                >\n                  <Select options={roleOptionsByTab} />\n                </Form.Item>\n              )}\n\n              {editingUser && (\n                <Form.Item label=\"บทบาท\" className=\"col-span-12\">\n                  <Input value={ROLE_LABEL[editingUser.role]} disabled />\n                </Form.Item>\n              )}\n\n              <Form.Item\n                label=\"ชื่อ\"\n                name=\"firstName\"\n                className=\"col-span-12 md:col-span-6\"\n                rules={[{ required: true, message: \"กรุณากรอกชื่อ\" }]}\n              >\n                <Input />\n              </Form.Item>\n              <Form.Item\n                label=\"นามสกุล\"\n                name=\"lastName\"\n                className=\"col-span-12 md:col-span-6\"\n                rules={[{ required: true, message: \"กรุณากรอกนามสกุล\" }]}\n              >\n                <Input />\n              </Form.Item>\n\n              <Form.Item\n                label=\"Username\"\n                name=\"username\"\n                className=\"col-span-12 md:col-span-6\"\n              >\n                <Input />\n              </Form.Item>\n              <Form.Item\n                label=\"Email\"\n                name=\"email\"\n                className=\"col-span-12 md:col-span-6\"\n                rules={[{ type: \"email\", message: \"รูปแบบอีเมลไม่ถูกต้อง\" }]}\n              >\n                <Input />\n              </Form.Item>\n\n              <Form.Item\n                label=\"เบอร์โทร\"\n                name=\"phone\"\n                className=\"col-span-12 md:col-span-6\"\n              >\n                <Input />\n              </Form.Item>\n              <Form.Item\n                label={\n                  editingUser\n                    ? \"รหัสผ่านใหม่ (ไม่บังคับ)\"\n                    : \"รหัสผ่าน (ไม่กรอก = ChangeMe123!)\"\n                }\n                name=\"password\"\n                className=\"col-span-12 md:col-span-6\"\n              >\n                <Input.Password />\n              </Form.Item>\n\n              <Form.Item\n                label=\"สถานะ\"\n                name=\"status\"\n                className=\"col-span-12 md:col-span-4\"\n                rules={[{ required: true, message: \"กรุณาเลือกสถานะ\" }]}\n              >\n                <Select\n                  options={[\n                    { label: \"ACTIVE\", value: \"ACTIVE\" },\n                    { label: \"INACTIVE\", value: \"INACTIVE\" },\n                    { label: \"LOCKED\", value: \"LOCKED\" },\n                  ]}\n                />\n              </Form.Item>\n\n              <Form.Item\n                label=\"คณะ\"\n                name=\"facultyId\"\n                className=\"col-span-12 md:col-span-4\"\n                rules={[{ required: true, message: \"กรุณาเลือกคณะ\" }]}\n              >\n                <Select\n                  disabled={isFacultyAdmin}\n                  options={faculties.map((item) => ({\n                    label: item.name,\n                    value: item.id,\n                  }))}\n                  onChange={() => {\n                    form.setFieldValue(\"departmentId\", undefined);\n                    form.setFieldValue(\"majorId\", undefined);\n                  }}\n                />\n              </Form.Item>\n\n              {(currentRole === \"STUDENT\" ||\n                currentRole === \"TEACHER\" ||\n                currentRole === \"DEPT_STAFF\") && (\n                <Form.Item\n                  label=\"ภาควิชา\"\n                  name=\"departmentId\"\n                  className=\"col-span-12 md:col-span-4\"\n                  rules={[{ required: true, message: \"กรุณาเลือกภาควิชา\" }]}\n                >\n                  <Select\n                    options={departmentOptions.map((item) => ({\n                      label: item.name,\n                      value: item.id,\n                    }))}\n                    onChange={() => {\n                      form.setFieldValue(\"majorId\", undefined);\n                    }}\n                  />\n                </Form.Item>\n              )}\n\n              {currentRole === \"STUDENT\" && (\n                <>\n                  <Form.Item\n                    label=\"รหัสนักศึกษา\"\n                    name=\"studentCode\"\n                    className=\"col-span-12 md:col-span-4\"\n                    rules={[\n                      { required: true, message: \"กรุณากรอกรหัสนักศึกษา\" },\n                    ]}\n                  >\n                    <Input />\n                  </Form.Item>\n                  <Form.Item\n                    label=\"สาขาวิชา\"\n                    name=\"majorId\"\n                    className=\"col-span-12 md:col-span-4\"\n                    rules={[{ required: true, message: \"กรุณาเลือกสาขาวิชา\" }]}\n                  >\n                    <Select\n                      options={majors.map((item) => ({\n                        label: item.code,\n                        value: item.id,\n                      }))}\n                    />\n                  </Form.Item>\n                  <Form.Item\n                    label=\"ชั้นปี\"\n                    name=\"classYear\"\n                    className=\"col-span-12 md:col-span-2\"\n                    rules={[{ required: true, message: \"กรุณากรอกชั้นปี\" }]}\n                  >\n                    <Input type=\"number\" min={1} />\n                  </Form.Item>\n                  <Form.Item\n                    label=\"ปีการศึกษา\"\n                    name=\"academicYear\"\n                    className=\"col-span-12 md:col-span-2\"\n                    rules={[{ required: true, message: \"กรุณากรอกปีการศึกษา\" }]}\n                  >\n                    <Input type=\"number\" min={1} />\n                  </Form.Item>\n                </>\n              )}\n\n              {currentRole === \"TEACHER\" && (\n                <Form.Item\n                  label=\"รหัสพนักงาน\"\n                  name=\"employeeCode\"\n                  className=\"col-span-12 md:col-span-4\"\n                >\n                  <Input />\n                </Form.Item>\n              )}\n            </div>\n          </Form>\n        </Modal>\n\n        <Modal\n          title=\"รายละเอียดผู้ใช้\"\n          open={isViewModalOpen}\n          onCancel={() => setIsViewModalOpen(false)}\n          footer={null}\n          width={640}\n        >\n          {viewingUser && (\n            <div className=\"space-y-2\">\n              <p>\n                <b>ชื่อ:</b>{\" \"}\n                {`${viewingUser.firstName || \"\"} ${viewingUser.lastName || \"\"}`.trim()}\n              </p>\n              <p>\n                <b>บทบาท:</b> {ROLE_LABEL[viewingUser.role] || viewingUser.role}\n              </p>\n              <p>\n                <b>Email:</b> {viewingUser.email || \"-\"}\n              </p>\n              <p>\n                <b>Username:</b> {viewingUser.username || \"-\"}\n              </p>\n              <p>\n                <b>คณะ:</b>{\" \"}\n                {viewingUser.studentProfile?.faculty?.name ||\n                  viewingUser.teacherProfile?.faculty?.name ||\n                  viewingUser.staffProfile?.faculty?.name ||\n                  \"-\"}\n              </p>\n              <p>\n                <b>ภาควิชา:</b>{\" \"}\n                {viewingUser.studentProfile?.department?.name ||\n                  viewingUser.teacherProfile?.department?.name ||\n                  viewingUser.staffProfile?.department?.name ||\n                  \"-\"}\n              </p>\n            </div>\n          )}\n        </Modal>\n      </div>\n    </Spin>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}