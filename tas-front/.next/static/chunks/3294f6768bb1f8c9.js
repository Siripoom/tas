(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return l}});let l=e=>{}},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},75312,e=>{"use strict";let t=()=>{let e=localStorage.getItem("user");if(!e)return null;let t=(e=>{try{return JSON.parse(e)}catch(e){return null}})(e);if(!t||"object"!=typeof t)return null;let r=t.role||null,l=t.faculty||null,a=t.department||null,s=t.facultyId||l?.id||null,i=t.departmentId||a?.id||null;return{...t,role:r,faculty:l,department:a,facultyId:s,departmentId:i,facultyName:l?.name||t.facultyName||"",departmentName:a?.name||t.departmentName||""}};e.s(["getSessionUser",0,t,"getUserScope",0,()=>{let e=t();return e?{id:e.id||null,role:e.role||null,facultyId:e.facultyId||null,departmentId:e.departmentId||null,facultyName:e.facultyName||"",departmentName:e.departmentName||""}:null}])},71284,e=>{"use strict";var t=e.i(43476),r=e.i(71645),l=e.i(92989),a=e.i(72943),s=e.i(9542),i=e.i(47437),n=e.i(26373),c=e.i(93733),o=e.i(92270),d=e.i(84614);let u=(0,e.i(75254).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=e.i(94351);e.i(57688);let p=()=>{let e,a,s=(0,l.useRouter)(),p=(0,l.usePathname)(),[h,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{let t=JSON.parse(e);g(t)}catch(e){console.error("Error parsing user data:",e)}},[]);let f=[{key:"profile",icon:(0,t.jsx)(d.User,{size:16}),label:"โปรไฟล์",onClick:()=>s.push("/admin/profile")},{key:"settings",icon:(0,t.jsx)(u,{size:16}),label:"ตั้งค่า",onClick:()=>s.push("/admin/settings")},{type:"divider"},{key:"logout",icon:(0,t.jsx)(o.LogOut,{size:16}),label:"ออกจากระบบ",danger:!0,onClick:()=>void(localStorage.removeItem("user"),localStorage.removeItem("token"),s.push("/login"))}];return(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40 w-full",children:(0,t.jsx)("div",{className:"px-6 py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-800",children:{"/admin/home":"หน้าหลัก","/admin/participation":"เข้าร่วมกิจกรรม","/admin/event":"กิจกรรม","/admin/user":"บุคลากร","/admin/department":"ภาควิชา","/admin/activity-type":"ประเภทกิจกรรม","/admin/report":"รายงาน","/admin/profile":"โปรไฟล์","/admin/settings":"ตั้งค่า"}[p]||"Dashboard"}),(0,t.jsx)(c.Breadcrumb,{items:(e=p.split("/").filter(e=>e),a=[{title:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(m.Home,{size:14}),"Admin"]})}],e.length>1&&a.push({title:{home:"หน้าหลัก",participation:"เข้าร่วมกิจกรรม",event:"กิจกรรม",user:"บุคลากร",department:"ภาควิชา","activity-type":"ประเภทกิจกรรม",report:"รายงาน",profile:"โปรไฟล์",settings:"ตั้งค่า"}[e[1]]||e[1]}),a),separator:"/",className:"text-xs"})]})}),h&&(0,t.jsx)(n.Dropdown,{menu:{items:f},placement:"bottomRight",trigger:["click"],children:(0,t.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 px-3 py-2 rounded-lg transition-colors",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-800",children:h.name||"ผู้ดูแลระบบ"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:h.role||"Admin"})]}),(0,t.jsx)(i.Avatar,{size:40,style:{backgroundColor:"#3D5753",color:"#fff"},children:h.name?.charAt(0)||"A"})]})})]})})})};var h=e.i(75312);let{Content:g}=a.Layout;function f({children:e}){let i=(0,l.useRouter)(),n=(0,l.usePathname)(),[c,o]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!0),[x,y]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(()=>{let e=localStorage.getItem("token"),t=(0,h.getSessionUser)();if(!t||!e){i.push("/login"),f(!1);return}let r=t.role;if("DEPT_STAFF"===r){i.push("/teacher/home"),f(!1);return}if(!["FACULTY_ADMIN","SUPER_ADMIN"].includes(r)){alert("คุณไม่มีสิทธิ์เข้าถึงหน้านี้"),i.push("/login"),f(!1);return}y(r),u(!0),f(!1)})()},[i,n]),m)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#3D5753]"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"กำลังตรวจสอบสิทธิ์..."})]})}):d?(0,t.jsxs)(a.Layout,{style:{minHeight:"100vh"},children:[(0,t.jsx)(s.default,{userRole:x||"FACULTY_ADMIN",collapsed:c,onCollapse:o}),(0,t.jsxs)(a.Layout,{style:{marginLeft:c?80:250,transition:"margin-left 0.2s"},children:[(0,t.jsx)(p,{}),(0,t.jsx)(g,{style:{margin:"24px 16px",padding:24,minHeight:"calc(100vh - 112px)",background:"#f5f5f5"},children:e})]})]}):null}e.s(["default",()=>f],71284)}]);