(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47957,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(60445),l=e.i(64571),r=e.i(75712),n=e.i(11451),o=e.i(12931),s=e.i(99133),c=e.i(96870),d=e.i(82725),u=e.i(91542),p=e.i(62218);e.i(47167);var m=e.i(8211),h=e.i(74080),f=i,g=e.i(50824),y=e.i(7670),v=i;e.i(63335);var b=e.i(14300);function x(e){let t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(e){return t}}function w(e){let t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});let i=new FormData;e.data&&Object.keys(e.data).forEach(t=>{let a=e.data[t];Array.isArray(a)?a.forEach(e=>{i.append(`${t}[]`,e)}):i.append(t,a)}),e.file instanceof Blob?i.append(e.filename,e.file,e.file.name):i.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300){let i;return e.onError(((i=Error(`cannot ${e.method} ${e.action} ${t.status}'`)).status=t.status,i.method=e.method,i.url=e.action,i),x(t))}return e.onSuccess(x(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);let a=e.headers||{};return null!==a["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(a).forEach(e=>{null!==a[e]&&t.setRequestHeader(e,a[e])}),t.send(i),{abort(){t.abort()}}}let $=async(e,t)=>{let i=[],a=[];async function l(e){let t=e.createReader(),i=[];for(;;){let e=await new Promise(e=>{t.readEntries(e,()=>e([]))}),a=e.length;if(!a)break;for(let t=0;t<a;t++)i.push(e[t])}return i}async function r(e){return new Promise(i=>{e.file(a=>{t(a)?(e.fullPath&&!a.webkitRelativePath&&(Object.defineProperties(a,{webkitRelativePath:{writable:!0}}),a.webkitRelativePath=e.fullPath.replace(/^\//,""),Object.defineProperties(a,{webkitRelativePath:{writable:!1}})),i(a)):i(null)})})}e.forEach(e=>a.push(e.webkitGetAsEntry()));let n=async(e,t)=>{if(e){if(e.path=t||"",e.isFile){let t=await r(e);t&&i.push(t)}else if(e.isDirectory){let t=await l(e);a.push(...t)}}},o=0;for(;o<a.length;)await n(a[o]),o++;return i},E=+new Date,C=0;function j(){return`rc-upload-${E}-${++C}`}function S(){return(S=Object.assign.bind()).apply(this,arguments)}class N extends v.Component{state={uid:j()};reqs={};fileInput;_isMounted;filterFile=(e,t=!1)=>{let i,a,{accept:l,directory:r}=this.props;if("string"==typeof l)a=l;else{let{filter:e,format:t}=l||{};a=t,i="native"===e?()=>!0:e}return(i||(r||t?e=>((e,t)=>{if(e&&t){let i=Array.isArray(t)?t:t.split(","),a=e.name||"",l=e.type||"",r=l.replace(/\/.*$/,"");return i.some(e=>{let t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){let e=a.toLowerCase(),i=t.toLowerCase(),l=[i];return(".jpg"===i||".jpeg"===i)&&(l=[".jpg",".jpeg"]),l.some(t=>e.endsWith(t))}return/\/\*$/.test(t)?r===t.replace(/\/.*$/,""):l===t||!!/^\w+$/.test(t)&&((0,b.warning)(!1,`Upload takes an invalidate 'accept' type '${t}'.Skip for check.`),!0)})}return!0})(e,a):()=>!0))(e)};onChange=e=>{let{files:t}=e.target,i=[...t].filter(e=>this.filterFile(e));this.uploadFiles(i),this.reset()};onClick=e=>{let t=this.fileInput;if(!t)return;let i=e.target,{onClick:a}=this.props;i&&"BUTTON"===i.tagName&&(t.parentNode.focus(),i.blur()),t.click(),a&&a(e)};onKeyDown=e=>{"Enter"===e.key&&this.onClick(e)};onDataTransferFiles=async(e,t)=>{let{multiple:i,directory:a}=this.props,l=[...e.items||[]],r=[...e.files||[]];if((r.length>0||l.some(e=>"file"===e.kind))&&t?.(),a)r=await $(Array.prototype.slice.call(l),this.filterFile),this.uploadFiles(r);else{let e=[...r].filter(e=>this.filterFile(e,!0));!1===i&&(e=r.slice(0,1)),this.uploadFiles(e)}};onFilePaste=async e=>{let{pastable:t}=this.props;if(t&&"paste"===e.type){let t=e.clipboardData;return this.onDataTransferFiles(t,()=>{e.preventDefault()})}};onFileDragOver=e=>{e.preventDefault()};onFileDrop=async e=>{if(e.preventDefault(),"drop"===e.type){let t=e.dataTransfer;return this.onDataTransferFiles(t)}};componentDidMount(){this._isMounted=!0;let{pastable:e}=this.props;e&&document.addEventListener("paste",this.onFilePaste)}componentWillUnmount(){this._isMounted=!1,this.abort(),document.removeEventListener("paste",this.onFilePaste)}componentDidUpdate(e){let{pastable:t}=this.props;t&&!e.pastable?document.addEventListener("paste",this.onFilePaste):!t&&e.pastable&&document.removeEventListener("paste",this.onFilePaste)}uploadFiles=e=>{let t=[...e];Promise.all(t.map(e=>(e.uid=j(),this.processFile(e,t)))).then(e=>{let{onBatchStart:t}=this.props;t?.(e.map(({origin:e,parsedFile:t})=>({file:e,parsedFile:t}))),e.filter(e=>null!==e.parsedFile).forEach(e=>{this.post(e)})})};processFile=async(e,t)=>{let i,a,{beforeUpload:l}=this.props,r=e;if(l){try{r=await l(e,t)}catch(e){r=!1}if(!1===r)return{origin:e,parsedFile:null,action:null,data:null}}let{action:n}=this.props;i="function"==typeof n?await n(e):n;let{data:o}=this.props;a="function"==typeof o?await o(e):o;let s=("object"==typeof r||"string"==typeof r)&&r?r:e,c=s instanceof File?s:new File([s],e.name,{type:e.type});return c.uid=e.uid,{origin:e,data:a,parsedFile:c,action:i}};post({data:e,origin:t,action:i,parsedFile:a}){if(!this._isMounted)return;let{onStart:l,customRequest:r,name:n,headers:o,withCredentials:s,method:c}=this.props,{uid:d}=t,u=r||w;l(t),this.reqs[d]=u({action:i,filename:n,data:e,file:a,headers:o,withCredentials:s,method:c||"post",onProgress:e=>{let{onProgress:t}=this.props;t?.(e,a)},onSuccess:(e,t)=>{let{onSuccess:i}=this.props;i?.(e,a,t),delete this.reqs[d]},onError:(e,t)=>{let{onError:i}=this.props;i?.(e,t,a),delete this.reqs[d]}},{defaultRequest:w})}reset(){this.setState({uid:j()})}abort(e){let{reqs:t}=this;if(e){let i=e.uid?e.uid:e;t[i]&&t[i].abort&&t[i].abort(),delete t[i]}else Object.keys(t).forEach(e=>{t[e]&&t[e].abort&&t[e].abort(),delete t[e]})}saveFileInput=e=>{this.fileInput=e};render(){let{component:e,prefixCls:t,className:i,classNames:a={},disabled:l,id:r,name:n,style:o,styles:s={},multiple:c,accept:d,capture:u,children:p,directory:m,openFileDialogOnClick:h,onMouseEnter:f,onMouseLeave:b,hasControlInside:x,...w}=this.props,$="string"==typeof d?d:d?.format,E=(0,y.clsx)(t,{[`${t}-disabled`]:l,[i]:i}),C=l?{}:{onClick:h?this.onClick:()=>{},onKeyDown:h?this.onKeyDown:()=>{},onMouseEnter:f,onMouseLeave:b,onDrop:this.onFileDrop,onDragOver:this.onFileDragOver,tabIndex:x?void 0:"0"};return v.default.createElement(e,S({},C,{className:E,role:x?void 0:"button",style:o}),v.default.createElement("input",S({},(0,g.default)(w,{aria:!0,data:!0}),{id:r,name:n,disabled:l,type:"file",ref:this.saveFileInput,onClick:e=>e.stopPropagation(),key:this.state.uid,style:{display:"none",...s.input},className:a.input,accept:$},m?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},{multiple:c,onChange:this.onChange},null!=u?{capture:u}:{})),p)}}function k(){return(k=Object.assign.bind()).apply(this,arguments)}function D(){}class I extends f.Component{static defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:D,onError:D,onSuccess:D,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1};uploader;abort(e){this.uploader.abort(e)}saveUploader=e=>{this.uploader=e};render(){return f.default.createElement(N,k({},this.props,{ref:this.saveUploader}))}}var R=e.i(30294),F=e.i(11517),L=e.i(42064),P=e.i(37328),z=e.i(8850),O=e.i(87414),T=e.i(83293),A=e.i(47580),M=e.i(46422),U=e.i(38378);e.i(96059);var H=e.i(15654),B=e.i(94758),q=e.i(9656);e.i(65846);var _=e.i(96091);let X=(0,M.genStyleHooks)("Upload",e=>{let{fontSizeHeading3:t,fontHeight:i,lineWidth:a,pictureCardSize:l,calc:r}=e,n=(0,U.mergeToken)(e,{uploadThumbnailSize:r(t).mul(2).equal(),uploadProgressOffset:r(r(i).div(2)).add(a).equal(),uploadPicCardSize:l});return[(e=>{let{componentCls:t,colorTextDisabled:i}=e;return{[`${t}-wrapper`]:{...(0,T.resetComponent)(e),[t]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${t}-select`]:{display:"inline-block"},[`${t}-hidden`]:{display:"none"},[`${t}-disabled`]:{color:i,cursor:"not-allowed"}}}})(n),(e=>{let{componentCls:t,iconCls:i}=e;return{[`${t}-wrapper`]:{[`${t}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:e.colorFillAlter,border:`${(0,H.unit)(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[t]:{padding:e.padding},[`${t}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:e.borderRadiusLG,"&:focus-visible":{outline:`${(0,H.unit)(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`}},[`${t}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${t}-disabled):hover,
          &-hover:not(${t}-disabled)
        `]:{borderColor:e.colorPrimaryHover},[`p${t}-drag-icon`]:{marginBottom:e.margin,[i]:{color:e.colorPrimary,fontSize:e.uploadThumbnailSize}},[`p${t}-text`]:{margin:`0 0 ${(0,H.unit)(e.marginXXS)}`,color:e.colorTextHeading,fontSize:e.fontSizeLG},[`p${t}-hint`]:{color:e.colorTextDescription,fontSize:e.fontSize},[`&${t}-disabled`]:{[`p${t}-drag-icon ${i},
            p${t}-text,
            p${t}-hint
          `]:{color:e.colorTextDisabled}}}}}})(n),(e=>{let{componentCls:t,iconCls:i,uploadThumbnailSize:a,uploadProgressOffset:l,calc:r}=e,n=`${t}-list`,o=`${n}-item`;return{[`${t}-wrapper`]:{[`
        ${n}${n}-picture,
        ${n}${n}-picture-card,
        ${n}${n}-picture-circle
      `]:{[o]:{position:"relative",height:r(a).add(r(e.lineWidth).mul(2)).add(r(e.paddingXS).mul(2)).equal(),padding:e.paddingXS,border:`${(0,H.unit)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusLG,"&:hover":{background:"transparent"},[`${o}-thumbnail`]:{...T.textEllipsis,width:a,height:a,lineHeight:(0,H.unit)(r(a).add(e.paddingSM).equal()),textAlign:"center",flex:"none",[i]:{fontSize:e.fontSizeHeading2,color:e.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}},[`${o}-progress`]:{bottom:l,width:`calc(100% - ${(0,H.unit)(r(e.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:r(a).add(e.paddingXS).equal()}},[`${o}-error`]:{borderColor:e.colorError,[`${o}-thumbnail ${i}`]:{[`svg path[fill='${_.blue[0]}']`]:{fill:e.colorErrorBg},[`svg path[fill='${_.blue.primary}']`]:{fill:e.colorError}}},[`${o}-uploading`]:{borderStyle:"dashed",[`${o}-name`]:{marginBottom:l}}},[`${n}${n}-picture-circle ${o}`]:{[`&, &::before, ${o}-thumbnail`]:{borderRadius:"50%"}}}}})(n),(e=>{let{componentCls:t,iconCls:i,fontSizeLG:a,colorTextLightSolid:l,calc:r}=e,n=`${t}-list`,o=`${n}-item`,s=e.uploadPicCardSize;return{[`
      ${t}-wrapper${t}-picture-card-wrapper,
      ${t}-wrapper${t}-picture-circle-wrapper
    `]:{...(0,T.clearFix)(),display:"block",[`${t}${t}-select`]:{width:s,height:s,textAlign:"center",verticalAlign:"top",backgroundColor:e.colorFillAlter,border:`${(0,H.unit)(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[`> ${t}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${t}-disabled):hover`]:{borderColor:e.colorPrimary}},[`${n}${n}-picture-card, ${n}${n}-picture-circle`]:{display:"flex",flexWrap:"wrap","@supports not (gap: 1px)":{"& > *":{marginBlockEnd:e.marginXS,marginInlineEnd:e.marginXS}},"@supports (gap: 1px)":{gap:e.marginXS},[`${n}-item-container`]:{display:"inline-block",width:s,height:s,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[o]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${(0,H.unit)(r(e.paddingXS).mul(2).equal())})`,height:`calc(100% - ${(0,H.unit)(r(e.paddingXS).mul(2).equal())})`,backgroundColor:e.colorBgMask,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'" "'}},[`${o}:hover`]:{[`&::before, ${o}-actions`]:{opacity:1}},[`${o}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${e.motionDurationSlow}`,[`
            ${i}-eye,
            ${i}-download,
            ${i}-delete
          `]:{zIndex:10,width:a,margin:`0 ${(0,H.unit)(e.marginXXS)}`,fontSize:a,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,color:l,"&:hover":{color:l},svg:{verticalAlign:"baseline"}}},[`${o}-thumbnail, ${o}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${o}-name`]:{display:"none",textAlign:"center"},[`${o}-file + ${o}-name`]:{position:"absolute",bottom:e.margin,display:"block",width:`calc(100% - ${(0,H.unit)(r(e.paddingXS).mul(2).equal())})`},[`${o}-uploading`]:{[`&${o}`]:{backgroundColor:e.colorFillAlter},[`&::before, ${i}-eye, ${i}-download, ${i}-delete`]:{display:"none"}},[`${o}-progress`]:{bottom:e.marginXL,width:`calc(100% - ${(0,H.unit)(r(e.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}},[`${t}-wrapper${t}-picture-circle-wrapper`]:{[`${t}${t}-select`]:{borderRadius:"50%"}}}})(n),(e=>{let{componentCls:t,iconCls:i,fontSize:a,lineHeight:l,calc:r}=e,n=`${t}-list-item`,o=`${n}-actions`,s=`${n}-action`;return{[`${t}-wrapper`]:{[`${t}-list`]:{...(0,T.clearFix)(),lineHeight:e.lineHeight,[n]:{position:"relative",height:r(e.lineHeight).mul(a).equal(),marginTop:e.marginXS,fontSize:a,display:"flex",alignItems:"center",transition:`background-color ${e.motionDurationSlow}`,borderRadius:e.borderRadiusSM,"&:hover":{backgroundColor:e.controlItemBgHover},[`${n}-name`]:{...T.textEllipsis,padding:`0 ${(0,H.unit)(e.paddingXS)}`,lineHeight:l,flex:"auto",transition:`all ${e.motionDurationSlow}`},[o]:{whiteSpace:"nowrap",[s]:{opacity:0},[i]:{color:e.actionsColor,transition:`all ${e.motionDurationSlow}`},[`
              ${s}:focus-visible,
              &.picture ${s}
            `]:{opacity:1}},[`${t}-icon ${i}`]:{color:e.colorIcon,fontSize:a},[`${n}-progress`]:{position:"absolute",bottom:e.calc(e.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:r(a).add(e.paddingXS).equal(),fontSize:a,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${n}:hover ${s}`]:{opacity:1},[`${n}-error`]:{color:e.colorError,[`${n}-name, ${t}-icon ${i}`]:{color:e.colorError},[o]:{[`${i}, ${i}:hover`]:{color:e.colorError},[s]:{opacity:1}}},[`${t}-list-item-container`]:{transition:`opacity ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}}}}})(n),(e=>{let{componentCls:t}=e,i=new B.Keyframes("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),a=new B.Keyframes("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),l=`${t}-animate-inline`;return[{[`${t}-wrapper`]:{[`${l}-appear, ${l}-enter, ${l}-leave`]:{animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseInOutCirc,animationFillMode:"forwards"},[`${l}-appear, ${l}-enter`]:{animationName:i},[`${l}-leave`]:{animationName:a}}},{[`${t}-wrapper`]:(0,q.initFadeMotion)(e)},i,a]})(n),(e=>{let{componentCls:t}=e;return{[`${t}-rtl`]:{direction:"rtl"}}})(n),(0,A.genCollapseMotion)(n)]},e=>({actionsColor:e.colorIcon,pictureCardSize:2.55*e.controlHeightLG})),V={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"};var W=e.i(9583);function G(){return(G=Object.assign.bind()).apply(this,arguments)}let J=i.forwardRef((e,t)=>i.createElement(W.default,G({},e,{ref:t,icon:V})));var K=e.i(39295);let Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};function Y(){return(Y=Object.assign.bind()).apply(this,arguments)}let Z=i.forwardRef((e,t)=>i.createElement(W.default,Y({},e,{ref:t,icon:Q}))),ee={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"};function et(){return(et=Object.assign.bind()).apply(this,arguments)}let ei=i.forwardRef((e,t)=>i.createElement(W.default,et({},e,{ref:t,icon:ee})));var ea=e.i(28473),el=e.i(58702),er=e.i(51095),en=e.i(49809),eo=e.i(13541),es=e.i(63731),ec=e.i(20228);function ed(e){return{...e,lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e}}function eu(e,t){let i=(0,m.default)(t),a=i.findIndex(({uid:t})=>t===e.uid);return -1===a?i.push(e):i[a]=e,i}function ep(e,t){let i=void 0!==e.uid?"uid":"name";return t.filter(t=>t[i]===e[i])[0]}let em=e=>0===e.indexOf("image/"),eh=e=>{if(e.type&&!e.thumbUrl)return em(e.type);let t=e.thumbUrl||e.url||"",i=((e="")=>{let t=e.split("/"),i=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(i)||[""])[0]})(t);return!!(/^data:image\//.test(t)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(i))||!/^data:/.test(t)&&!i};function ef(e){return new Promise(t=>{if(!e.type||!em(e.type))return void t("");let i=document.createElement("canvas");i.width=200,i.height=200,i.style.cssText="position: fixed; left: 0; top: 0; width: 200px; height: 200px; z-index: 9999; display: none;",document.body.appendChild(i);let a=i.getContext("2d"),l=new Image;if(l.onload=()=>{let{width:e,height:r}=l,n=200,o=200,s=0,c=0;e>r?c=-((o=200/e*r)-n)/2:s=-((n=200/r*e)-o)/2,a.drawImage(l,s,c,n,o);let d=i.toDataURL();document.body.removeChild(i),window.URL.revokeObjectURL(l.src),t(d)},l.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){let t=new FileReader;t.onload=()=>{t.result&&"string"==typeof t.result&&(l.src=t.result)},t.readAsDataURL(e)}else if(e.type.startsWith("image/gif")){let i=new FileReader;i.onload=()=>{i.result&&t(i.result)},i.readAsDataURL(e)}else l.src=window.URL.createObjectURL(e)})}let eg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};function ey(){return(ey=Object.assign.bind()).apply(this,arguments)}let ev=i.forwardRef((e,t)=>i.createElement(W.default,ey({},e,{ref:t,icon:eg}))),eb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};function ex(){return(ex=Object.assign.bind()).apply(this,arguments)}let ew=i.forwardRef((e,t)=>i.createElement(W.default,ex({},e,{ref:t,icon:eb})));var e$=e.i(84125),eE=e.i(9821),eC=e.i(91816);let ej=i.forwardRef(({prefixCls:e,className:t,style:a,classNames:l,styles:r,locale:n,listType:o,file:s,items:c,progress:d,iconRender:u,actionIconRender:p,itemRender:m,isImgUrl:h,showPreviewIcon:f,showRemoveIcon:g,showDownloadIcon:v,previewIcon:b,removeIcon:x,downloadIcon:w,extra:$,onPreview:E,onDownload:C,onClose:j},S)=>{let{status:N}=s,[k,D]=i.useState(N);i.useEffect(()=>{"removed"!==N&&D(N)},[N]);let[I,R]=i.useState(!1);i.useEffect(()=>{let e=setTimeout(()=>{R(!0)},300);return()=>{clearTimeout(e)}},[]);let F=u(s),P=i.createElement("div",{className:`${e}-icon`},F);if("picture"===o||"picture-card"===o||"picture-circle"===o)if("uploading"!==k&&(s.thumbUrl||s.url)){let t=h?.(s)?i.createElement("img",{src:s.thumbUrl||s.url,alt:s.name,className:`${e}-list-item-image`,crossOrigin:s.crossOrigin}):F,a=(0,y.clsx)(`${e}-list-item-thumbnail`,{[`${e}-list-item-file`]:h&&!h(s)});P=i.createElement("a",{className:a,onClick:e=>E(s,e),href:s.url||s.thumbUrl,target:"_blank",rel:"noopener noreferrer"},t)}else{let t=(0,y.clsx)(`${e}-list-item-thumbnail`,{[`${e}-list-item-file`]:"uploading"!==k});P=i.createElement("div",{className:t},F)}let z=(0,y.clsx)(`${e}-list-item`,`${e}-list-item-${k}`,l?.item),O="string"==typeof s.linkProps?JSON.parse(s.linkProps):s.linkProps,T=("function"==typeof g?g(s):g)?p(("function"==typeof x?x(s):x)||i.createElement(ev,null),()=>j(s),e,n.removeFile,!0):null,A=("function"==typeof v?v(s):v)&&"done"===k?p(("function"==typeof w?w(s):w)||i.createElement(ew,null),()=>C(s),e,n.downloadFile):null,M="picture-card"!==o&&"picture-circle"!==o&&i.createElement("span",{key:"download-delete",className:(0,y.clsx)(`${e}-list-item-actions`,{picture:"picture"===o})},A,T),U="function"==typeof $?$(s):$,H=U&&i.createElement("span",{className:`${e}-list-item-extra`},U),B=(0,y.clsx)(`${e}-list-item-name`),q=s.url?i.createElement("a",{key:"view",target:"_blank",rel:"noopener noreferrer",className:B,title:s.name,...O,href:s.url,onClick:e=>E(s,e)},s.name,H):i.createElement("span",{key:"view",className:B,onClick:e=>E(s,e),title:s.name},s.name,H),_=("function"==typeof f?f(s):f)&&(s.url||s.thumbUrl)?i.createElement("a",{href:s.url||s.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>E(s,e),title:n.previewFile},"function"==typeof b?b(s):b||i.createElement(e$.default,null)):null,X=("picture-card"===o||"picture-circle"===o)&&"uploading"!==k&&i.createElement("span",{className:`${e}-list-item-actions`},_,"done"===k&&A,T),{getPrefixCls:V}=i.useContext(L.ConfigContext),W=V(),G=i.createElement("div",{className:z,style:r?.item},P,q,M,X,I&&i.createElement(ea.default,{motionName:`${W}-fade`,visible:"uploading"===k,motionDeadline:2e3},({className:t})=>{let a="percent"in s?i.createElement(eE.default,{type:"line",percent:s.percent,"aria-label":s["aria-label"],"aria-labelledby":s["aria-labelledby"],...d}):null;return i.createElement("div",{className:(0,y.clsx)(`${e}-list-item-progress`,t)},a)})),J=s.response&&"string"==typeof s.response?s.response:s.error?.statusText||s.error?.message||n.uploadError,K="error"===k?i.createElement(eC.default,{title:J,getPopupContainer:e=>e.parentNode},G):G;return i.createElement("div",{className:(0,y.clsx)(`${e}-list-item-container`,t),style:a,ref:S},m?m(K,s,c,{download:C.bind(null,s),preview:E.bind(null,s),remove:j.bind(null,s)}):K)}),eS=i.forwardRef((e,t)=>{let{listType:a="text",previewFile:l=ef,onPreview:r,onDownload:n,onRemove:o,locale:s,iconRender:c,isImageUrl:d=eh,prefixCls:u,items:p=[],showPreviewIcon:h=!0,showRemoveIcon:f=!0,showDownloadIcon:g=!1,removeIcon:v,previewIcon:b,downloadIcon:x,extra:w,progress:$={size:[-1,2],showInfo:!1},appendAction:E,appendActionVisible:C=!0,itemRender:j,disabled:S,classNames:N,styles:k}=e,[,D]=(0,en.useForceUpdate)(),[I,R]=i.useState(!1),F=["picture-card","picture-circle"].includes(a);i.useEffect(()=>{a.startsWith("picture")&&(p||[]).forEach(e=>{(e.originFileObj instanceof File||e.originFileObj instanceof Blob)&&void 0===e.thumbUrl&&(e.thumbUrl="",l?.(e.originFileObj).then(t=>{e.thumbUrl=t||"",D()}))})},[a,p,l]),i.useEffect(()=>{R(!0)},[]);let P=(e,t)=>{if(r)return t?.preventDefault(),r(e)},z=e=>{"function"==typeof n?n(e):e.url&&window.open(e.url)},O=e=>{o?.(e)},T=e=>{if(c)return c(e,a);let t="uploading"===e.status;if(a.startsWith("picture")){let l="picture"===a?i.createElement(K.default,null):s.uploading,r=d?.(e)?i.createElement(ei,null):i.createElement(J,null);return t?l:r}return t?i.createElement(K.default,null):i.createElement(Z,null)},A=(e,t,a,l,r)=>{let n={type:"text",size:"small",title:l,onClick:a=>{t(),i.isValidElement(e)&&e.props.onClick?.(a)},className:`${a}-list-item-action`,disabled:!!r&&S};return i.isValidElement(e)?i.createElement(ec.default,{...n,icon:(0,es.cloneElement)(e,{...e.props,onClick:()=>{}})}):i.createElement(ec.default,{...n},i.createElement("span",null,e))};i.useImperativeHandle(t,()=>({handlePreview:P,handleDownload:z}));let{getPrefixCls:M}=i.useContext(L.ConfigContext),U=M("upload",u),H=M(),B=(0,y.clsx)(`${U}-list`,`${U}-list-${a}`,N?.list),q=i.useMemo(()=>(0,er.omit)((0,eo.default)(H),["onAppearEnd","onEnterEnd","onLeaveEnd"]),[H]),_={...F?{}:q,motionDeadline:2e3,motionName:`${U}-${F?"animate-inline":"animate"}`,keys:(0,m.default)(p.map(e=>({key:e.uid,file:e}))),motionAppear:I};return i.createElement("div",{className:B,style:k?.list},i.createElement(el.CSSMotionList,{..._,component:!1},({key:e,file:t,className:l,style:r})=>i.createElement(ej,{key:e,locale:s,prefixCls:U,className:l,style:r,classNames:N,styles:k,file:t,items:p,progress:$,listType:a,isImgUrl:d,showPreviewIcon:h,showRemoveIcon:f,showDownloadIcon:g,removeIcon:v,previewIcon:b,downloadIcon:x,extra:w,iconRender:T,actionIconRender:A,itemRender:j,onPreview:P,onDownload:z,onClose:O})),E&&i.createElement(ea.default,{..._,visible:C,forceRender:!0},({className:e,style:t})=>(0,es.cloneElement)(E,i=>({className:(0,y.clsx)(i.className,e),style:{...t,pointerEvents:e?"none":void 0,...i.style}}))))}),eN=`__LIST_IGNORE_${Date.now()}__`,ek=i.forwardRef((e,t)=>{let a=(0,L.useComponentConfig)("upload"),{fileList:l,defaultFileList:r,onRemove:n,showUploadList:o=!0,listType:s="text",onPreview:c,onDownload:d,onChange:u,onDrop:p,previewFile:f,disabled:g,locale:v,iconRender:b,isImageUrl:x,progress:w,prefixCls:$,className:E,type:C="select",children:j,style:S,itemRender:N,maxCount:k,data:D={},multiple:T=!1,hasControlInside:A=!0,action:M="",accept:U="",supportServerRender:H=!0,rootClassName:B,styles:q,classNames:_}=e,V=i.useContext(P.default),W=g??V,G=e.customRequest||a.customRequest,[J,K]=(0,R.useControlledState)(r,l),Q=J||[],[Y,Z]=i.useState("drop"),ee=i.useRef(null),et=i.useRef(null);i.useMemo(()=>{let e=Date.now();(l||[]).forEach((t,i)=>{t.uid||Object.isFrozen(t)||(t.uid=`__AUTO__${e}_${i}__`)})},[l]);let ei=(e,t,i)=>{let a=(0,m.default)(t),l=!1;1===k?a=a.slice(-1):k&&(l=a.length>k,a=a.slice(0,k)),(0,h.flushSync)(()=>{K(a)});let r={file:e,fileList:a};i&&(r.event=i),(!l||"removed"===e.status||a.some(t=>t.uid===e.uid))&&(0,h.flushSync)(()=>{u?.(r)})},ea=async(t,i)=>{let{beforeUpload:a}=e,l=t;if(a){let e=await a(t,i);if(!1===e)return!1;if(delete t[eN],e===eN)return Object.defineProperty(t,eN,{value:!0,configurable:!0}),!1;"object"==typeof e&&e&&(l=e)}return l},el=e=>{let t=e.filter(e=>!e.file[eN]);if(!t.length)return;let i=t.map(e=>ed(e.file)),a=(0,m.default)(Q);i.forEach(e=>{a=eu(e,a)}),i.forEach((e,i)=>{let l=e;if(t[i].parsedFile)e.status="uploading";else{let t,{originFileObj:i}=e;try{t=new File([i],i.name,{type:i.type})}catch{(t=new Blob([i],{type:i.type})).name=i.name,t.lastModifiedDate=new Date,t.lastModified=new Date().getTime()}t.uid=e.uid,l=t}ei(l,a)})},er=(e,t,i)=>{try{"string"==typeof e&&(e=JSON.parse(e))}catch{}if(!ep(t,Q))return;let a=ed(t);a.status="done",a.percent=100,a.response=e,a.xhr=i;let l=eu(a,Q);ei(a,l)},en=(e,t)=>{if(!ep(t,Q))return;let i=ed(t);i.status="uploading",i.percent=e.percent;let a=eu(i,Q);ei(i,a,e)},eo=(e,t,i)=>{if(!ep(i,Q))return;let a=ed(i);a.error=e,a.response=t,a.status="error";let l=eu(a,Q);ei(a,l)},es=e=>{let t;Promise.resolve("function"==typeof n?n(e):n).then(i=>{let a,l;if(!1===i)return;let r=(a=void 0!==e.uid?"uid":"name",(l=Q.filter(t=>t[a]!==e[a])).length===Q.length?null:l);r&&(t={...e,status:"removed"},Q?.forEach(e=>{let i=void 0!==t.uid?"uid":"name";e[i]!==t[i]||Object.isFrozen(e)||(e.status="removed")}),ee.current?.abort(t),ei(t,r))})},ec=e=>{Z(e.type),"drop"===e.type&&p?.(e)};i.useImperativeHandle(t,()=>({onBatchStart:el,onSuccess:er,onProgress:en,onError:eo,fileList:Q,upload:ee.current,nativeElement:et.current}));let{getPrefixCls:em,direction:eh,className:ef,style:eg,classNames:ey,styles:ev}=(0,L.useComponentConfig)("upload"),eb=em("upload",$),ex={...e,listType:s,showUploadList:o,type:C,multiple:T,hasControlInside:A,supportServerRender:H,disabled:W},[ew,e$]=(0,F.useMergeSemantic)([ey,_],[ev,q],{props:ex}),eE={onBatchStart:el,onError:eo,onProgress:en,onSuccess:er,...e,customRequest:G,data:D,multiple:T,action:M,accept:U,supportServerRender:H,prefixCls:eb,disabled:W,beforeUpload:ea,onChange:void 0,hasControlInside:A};delete eE.className,delete eE.style,(!j||W)&&delete eE.id;let eC=`${eb}-wrapper`,[ej,ek]=X(eb,eC),[eD]=(0,z.useLocale)("Upload",O.default.Upload),{showRemoveIcon:eI,showPreviewIcon:eR,showDownloadIcon:eF,removeIcon:eL,previewIcon:eP,downloadIcon:ez,extra:eO}="boolean"==typeof o?{}:o,eT=void 0===eI?!W:eI,eA=(e,t)=>o?i.createElement(eS,{classNames:ew,styles:e$,prefixCls:eb,listType:s,items:Q,previewFile:f,onPreview:c,onDownload:d,onRemove:es,showRemoveIcon:eT,showPreviewIcon:eR,showDownloadIcon:eF,removeIcon:eL,previewIcon:eP,downloadIcon:ez,iconRender:b,extra:eO,locale:{...eD,...v},isImageUrl:x,progress:w,appendAction:e,appendActionVisible:t,itemRender:N,disabled:W}):e,eM=(0,y.clsx)(eC,E,B,ej,ek,ef,ew.root,{[`${eb}-rtl`]:"rtl"===eh,[`${eb}-picture-card-wrapper`]:"picture-card"===s,[`${eb}-picture-circle-wrapper`]:"picture-circle"===s}),eU={...e$.root},eH={...eg,...S};if("drag"===C){let e=(0,y.clsx)(ej,eb,`${eb}-drag`,{[`${eb}-drag-uploading`]:Q.some(e=>"uploading"===e.status),[`${eb}-drag-hover`]:"dragover"===Y,[`${eb}-disabled`]:W,[`${eb}-rtl`]:"rtl"===eh});return i.createElement("span",{className:eM,ref:et,style:eU},i.createElement("div",{className:e,style:eH,onDrop:ec,onDragOver:ec,onDragLeave:ec},i.createElement(I,{...eE,ref:ee,className:`${eb}-btn`},i.createElement("div",{className:`${eb}-drag-container`},j))),eA())}let eB=(0,y.clsx)(eb,`${eb}-select`,{[`${eb}-disabled`]:W,[`${eb}-hidden`]:!j}),eq=i.createElement("div",{className:eB,style:eH},i.createElement(I,{...eE,ref:ee}));return"picture-card"===s||"picture-circle"===s?i.createElement("span",{className:eM,ref:et,style:eU},eA(eq,!!j)):i.createElement("span",{className:eM,ref:et,style:eU},eq,eA())}),eD=i.forwardRef((e,t)=>{let{style:a,height:l,hasControlInside:r=!1,children:n,...o}=e,s={...a,height:l};return i.createElement(ek,{ref:t,hasControlInside:r,...o,style:s,type:"drag"},n)});ek.Dragger=eD,ek.LIST_IGNORE=eN;var eI=e.i(98573),eR=e.i(87316),eF=e.i(69638),eL=e.i(3116),eP=e.i(40160),ez=e.i(86536),eO=e.i(78583),eT=e.i(46897),eA=e.i(75254);let eM=(0,eA.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),eU=(0,eA.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var eH=e.i(73884),eB=e.i(48182),eq=e.i(24623);let{Search:e_}=n.Input,eX=[{value:"APPLIED",label:"สมัครแล้ว"},{value:"APPROVED",label:"อนุมัติแล้ว"},{value:"REJECTED",label:"ไม่อนุมัติ"},{value:"REVISION_REQUIRED",label:"ขอแก้ไข"},{value:"SUBMITTED",label:"ส่งตรวจแล้ว"},{value:"COMPLETED",label:"สำเร็จแล้ว"},{value:"CANCELLED",label:"ยกเลิก"},{value:"NO_SHOW",label:"ไม่เข้าร่วม"}],eV=new Set(["APPLIED","REVISION_REQUIRED"]),eW=new Set(["REVISION_REQUIRED","REJECTED"]),eG=new Set(["APPROVED","COMPLETED"]),eJ={APPLIED:{color:"blue",icon:(0,t.jsx)(eL.Clock,{size:14}),text:"สมัครแล้ว"},APPROVED:{color:"green",icon:(0,t.jsx)(eF.CheckCircle,{size:14}),text:"อนุมัติแล้ว"},REJECTED:{color:"red",icon:(0,t.jsx)(eH.XCircle,{size:14}),text:"ไม่อนุมัติ"},REVISION_REQUIRED:{color:"orange",icon:(0,t.jsx)(eL.Clock,{size:14}),text:"ขอแก้ไข"},COMPLETED:{color:"green",icon:(0,t.jsx)(eF.CheckCircle,{size:14}),text:"สำเร็จแล้ว"},SUBMITTED:{color:"gold",icon:(0,t.jsx)(eL.Clock,{size:14}),text:"ส่งตรวจแล้ว"},CANCELLED:{color:"red",icon:(0,t.jsx)(eH.XCircle,{size:14}),text:"ยกเลิก"},NO_SHOW:{color:"volcano",icon:(0,t.jsx)(eH.XCircle,{size:14}),text:"ไม่เข้าร่วม"}},eK=e=>{let i=eJ[e]||eJ.APPLIED;return(0,t.jsx)(p.Tag,{color:i.color,children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[i.icon,i.text]})})};function eQ(){let[e,n]=(0,i.useState)(null),[m,h]=(0,i.useState)([]),[f,g]=(0,i.useState)(!0),[y,v]=(0,i.useState)(!1),[b,x]=(0,i.useState)(null),[w,$]=(0,i.useState)(null),[E,C]=(0,i.useState)(""),[j,S]=(0,i.useState)(null),[N,k]=(0,i.useState)(!1),[D,I]=(0,i.useState)(!1),[R,F]=(0,i.useState)(null),[L,P]=(0,i.useState)([]),z=async e=>{if(e?.id){g(!0);try{let t=await (0,eB.getAttendancesByUser)(e.id),i=await Promise.all(t.map(async e=>{let t=e.activity||{},i=await (0,eq.getFilesByApplication)(e.id);return{id:e.id,applicationId:e.id,activityId:e.activityId||t.id,name:t.name||t.title||"-",category:t.typeActivity?.name||"ไม่ระบุประเภท",date:(e=>{if(!e)return"-";let t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})})(t.startAt||t.startDate),time:((e,t)=>{if(!e||!t)return"ไม่ระบุเวลา";let i=new Date(e),a=new Date(t);return Number.isNaN(i.getTime())||Number.isNaN(a.getTime())?"ไม่ระบุเวลา":`${i.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})} - ${a.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})}`})(t.startAt||t.startDate,t.endAt||t.endDate),location:t.location||t.address||"ไม่ระบุสถานที่",hours:t.hours||t.hour||0,status:e.status,remark:e.reason||null,evidenceFiles:i,hasEvidence:i.length>0}}));h(i)}catch(t){let e=t?.response?.data?.message||"ไม่สามารถโหลดข้อมูลกิจกรรมได้";eI.message.error(e)}finally{g(!1)}}};(0,i.useEffect)(()=>{try{let e=localStorage.getItem("user"),t=e?JSON.parse(e):null;n(t),t?.id?z(t):g(!1)}catch(e){g(!1)}},[]);let O=(0,i.useMemo)(()=>{let e=E.trim().toLowerCase();return m.filter(t=>(!e||!!t.name.toLowerCase().includes(e))&&(!j||t.status===j))},[m,E,j]),T=async()=>{e?.id&&await z(e)},A=async()=>{if(!R?.applicationId)return;if(!L.length)return void eI.message.warning("กรุณาเลือกไฟล์หลักฐาน");let e=L[0]?.originFileObj||L[0];if(!e)return void eI.message.warning("ไม่พบไฟล์ที่เลือก");v(!0);try{await (0,eq.uploadFileAttendance)(e,R.applicationId),eI.message.success("อัพโหลดหลักฐานสำเร็จ"),I(!1),F(null),P([]),await T()}catch(t){let e=t?.response?.data?.message||"อัพโหลดหลักฐานไม่สำเร็จ";eI.message.error(e)}finally{v(!1)}},M=async e=>{if(e?.activityId){x(e.id);try{await (0,eB.createAttendance)({activityId:e.activityId}),eI.message.success(`ขอลงทะเบียนอีกรอบสำหรับ "${e.name}" สำเร็จ`),await T()}catch(t){let e=t?.response?.data?.message||"ไม่สามารถขอลงทะเบียนอีกรอบได้";eI.message.error(e)}finally{x(null)}}},U=async e=>{let t=e?.evidenceFiles?.[0];if(!t?.id)return void eI.message.warning("ไม่พบไฟล์หลักฐานสำหรับดาวน์โหลด");$(e.id);try{let i=await (0,eq.downloadFile)(t.id),a=window.URL.createObjectURL(i),l=document.createElement("a");l.href=a,l.download=t.fileName||`${e.name||"evidence"}.pdf`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(a)}catch(t){let e=t?.response?.data?.message||"ไม่สามารถดาวน์โหลดไฟล์หลักฐานได้";eI.message.error(e)}finally{$(null)}},H=[{title:"ชื่อกิจกรรม",dataIndex:"name",key:"name",width:300,render:(e,i)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold text-gray-800",children:e}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:i.category})]})},{title:"วันที่และเวลา",key:"datetime",width:260,render:(e,i)=>(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,t.jsx)(eR.Calendar,{size:14,className:"text-gray-500"}),(0,t.jsx)("span",{children:i.date})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eL.Clock,{size:14,className:"text-gray-500"}),(0,t.jsx)("span",{className:"text-gray-600",children:i.time})]})]})},{title:"ชั่วโมง",dataIndex:"hours",key:"hours",width:110,align:"center",render:e=>(0,t.jsxs)(p.Tag,{color:"blue",children:[e," ชม."]})},{title:"สถานะ",dataIndex:"status",key:"status",width:150,render:e=>eK(e)},{title:"หลักฐาน",key:"evidence",width:130,render:(e,i)=>i.hasEvidence?(0,t.jsx)(p.Tag,{color:"blue",children:"อัพโหลดแล้ว"}):(0,t.jsx)(p.Tag,{children:"ยังไม่ได้อัพโหลด"})},{title:"การจัดการ",key:"actions",width:220,align:"center",render:(e,i)=>(0,t.jsxs)(c.Space,{size:"small",children:[(0,t.jsx)(l.Button,{type:"link",icon:(0,t.jsx)(ez.Eye,{size:16}),onClick:()=>{F(i),k(!0)},style:{color:"#0A894C",padding:0},title:"ดูรายละเอียด"}),eV.has(i.status)&&(0,t.jsx)(l.Button,{type:"link",icon:(0,t.jsx)(eU,{size:16}),onClick:()=>{F(i),P([]),I(!0)},style:{color:"#0A894C",padding:0},title:"อัพโหลดหลักฐาน"}),eW.has(i.status)&&(0,t.jsx)(l.Button,{type:"link",icon:(0,t.jsx)(eM,{size:16}),loading:b===i.id,onClick:()=>M(i),style:{color:"#1890ff",padding:0},title:"ขอลงทะเบียนอีกรอบ"}),eG.has(i.status)&&i.hasEvidence&&(0,t.jsx)(l.Button,{type:"link",icon:(0,t.jsx)(eP.Download,{size:16}),loading:w===i.id,onClick:()=>U(i),style:{color:"#0A894C",padding:0},title:"ดาวน์โหลดหลักฐาน"})]})}];return(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Card,{className:"mb-6 shadow-sm",style:{background:"linear-gradient(135deg, #0A894C 0%, #0ea258 100%)",border:"none"},children:(0,t.jsxs)("div",{className:"text-white",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-1",children:"กิจกรรมของฉัน"}),(0,t.jsx)("p",{className:"text-sm opacity-90",children:"ติดตามสถานะการสมัครและการส่งหลักฐาน"})]})}),(0,t.jsx)(r.Card,{className:"mb-4",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(e_,{placeholder:"ค้นหากิจกรรม...",allowClear:!0,value:E,onChange:e=>C(e.target.value)})}),(0,t.jsx)("div",{className:"w-full md:w-52",children:(0,t.jsx)(s.Select,{placeholder:"กรองตามสถานะ",allowClear:!0,value:j,onChange:S,style:{width:"100%"},options:eX})}),(0,t.jsx)(l.Button,{icon:(0,t.jsx)(eM,{size:16}),onClick:T,loading:f,children:"รีเฟรช"})]})}),(0,t.jsx)(r.Card,{children:(0,t.jsx)(u.Table,{rowKey:"id",columns:H,dataSource:O,loading:f,pagination:{pageSize:10,showTotal:e=>`ทั้งหมด ${e} กิจกรรม`},scroll:{x:1e3},locale:{emptyText:f?(0,t.jsx)(d.Spin,{}):"ไม่พบข้อมูลกิจกรรม"}})}),(0,t.jsx)(o.Modal,{title:"รายละเอียดกิจกรรม",open:N,onCancel:()=>{k(!1),F(null)},footer:null,children:R&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:R.name}),(0,t.jsx)(p.Tag,{color:"green",children:R.category}),(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,t.jsx)(eR.Calendar,{size:16,className:"inline mr-2"}),R.date]}),(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,t.jsx)(eL.Clock,{size:16,className:"inline mr-2"}),R.time," (",R.hours," ชั่วโมง)"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,t.jsx)(eT.MapPin,{size:16,className:"inline mr-2"}),R.location]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"สถานะ:"}),eK(R.status)]}),("REVISION_REQUIRED"===R.status||"REJECTED"===R.status)&&R.remark&&(0,t.jsx)(a.Alert,{type:"REJECTED"===R.status?"error":"warning",message:"REJECTED"===R.status?"ไม่อนุมัติ":"ต้องแก้ไขหลักฐาน",description:R.remark}),eW.has(R.status)&&(0,t.jsx)(l.Button,{icon:(0,t.jsx)(eM,{size:16}),onClick:()=>M(R),loading:b===R.id,children:"ขอลงทะเบียนอีกรอบ"})]})}),(0,t.jsx)(o.Modal,{title:"อัพโหลดหลักฐานกิจกรรม",open:D,onOk:A,onCancel:()=>{I(!1),F(null),P([])},okText:"บันทึก",cancelText:"ยกเลิก",confirmLoading:y,okButtonProps:{style:{backgroundColor:"#0A894C",borderColor:"#0A894C"}},children:R&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:R.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:R.category})]}),(0,t.jsxs)(ek.Dragger,{accept:".pdf",fileList:L,maxCount:1,beforeUpload:e=>!("application/pdf"===e.type||/\.pdf$/i.test(e.name||""))&&(eI.message.error("รองรับเฉพาะไฟล์ PDF เท่านั้น"),ek.LIST_IGNORE),onChange:({fileList:e})=>P(e),children:[(0,t.jsx)("p",{className:"ant-upload-drag-icon flex justify-center",children:(0,t.jsx)(eU,{size:44,style:{color:"#0A894C"}})}),(0,t.jsx)("p",{className:"ant-upload-text",children:"คลิกหรือลากไฟล์มาเพื่ออัพโหลด"}),(0,t.jsx)("p",{className:"ant-upload-hint",children:"รองรับเฉพาะไฟล์ PDF เท่านั้น"})]}),R.evidenceFiles?.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"font-medium mb-2",children:"ไฟล์ที่มีอยู่แล้ว"}),(0,t.jsx)("div",{className:"space-y-2",children:R.evidenceFiles.map(e=>(0,t.jsxs)("div",{className:"p-2 rounded border bg-gray-50 text-sm",children:[(0,t.jsx)(eO.FileText,{size:15,className:"inline mr-1"}),e.fileName]},e.id))})]})]})})]})}e.s(["default",()=>eQ],47957)}]);