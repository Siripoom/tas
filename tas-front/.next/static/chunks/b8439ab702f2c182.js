(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return l}});let l=e=>{}},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},75312,e=>{"use strict";let t=()=>{let e=localStorage.getItem("user");if(!e)return null;let t=(e=>{try{return JSON.parse(e)}catch(e){return null}})(e);if(!t||"object"!=typeof t)return null;let r=t.role||null,l=t.faculty||null,a=t.department||null,s=t.facultyId||l?.id||null,n=t.departmentId||a?.id||null;return{...t,role:r,faculty:l,department:a,facultyId:s,departmentId:n,facultyName:l?.name||t.facultyName||"",departmentName:a?.name||t.departmentName||""}};e.s(["getSessionUser",0,t,"getUserScope",0,()=>{let e=t();return e?{id:e.id||null,role:e.role||null,facultyId:e.facultyId||null,departmentId:e.departmentId||null,facultyName:e.facultyName||"",departmentName:e.departmentName||""}:null}])},97432,e=>{"use strict";var t=e.i(43476),r=e.i(71645),l=e.i(92989),a=e.i(72943),s=e.i(9542),n=e.i(47437),i=e.i(26373),c=e.i(93733),o=e.i(92270),u=e.i(84614),d=e.i(94351),m=e.i(75312);let h={TEACHER:"อาจารย์",DEPT_STAFF:"เจ้าหน้าที่ภาควิชา"},p=()=>{let e,a,s=(0,l.useRouter)(),p=(0,l.usePathname)(),[f,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{g((0,m.getSessionUser)())},[]);let x=[{key:"profile",icon:(0,t.jsx)(u.User,{size:16}),label:"โปรไฟล์",onClick:()=>s.push("/teacher/profile")},{type:"divider"},{key:"logout",icon:(0,t.jsx)(o.LogOut,{size:16}),label:"ออกจากระบบ",danger:!0,onClick:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),s.push("/login")}}];return(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40 w-full",children:(0,t.jsx)("div",{className:"px-6 py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-800",children:{"/teacher/home":"หน้าหลัก","/teacher/participation":"เข้าร่วมกิจกรรม","/teacher/event":"กิจกรรม","/teacher/report":"รายงาน","/teacher/profile":"โปรไฟล์","/teacher/settings":"ตั้งค่า"}[p]||"Dashboard"}),(0,t.jsx)(c.Breadcrumb,{items:(e=p.split("/").filter(e=>e),a=[{title:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(d.Home,{size:14}),"Teacher"]})}],e.length>1&&a.push({title:{home:"หน้าหลัก",participation:"เข้าร่วมกิจกรรม",event:"กิจกรรม",report:"รายงาน",profile:"โปรไฟล์",settings:"ตั้งค่า"}[e[1]]||e[1]}),a),separator:"/",className:"text-xs"})]})}),f&&(0,t.jsx)(i.Dropdown,{menu:{items:x},placement:"bottomRight",trigger:["click"],children:(0,t.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 px-3 py-2 rounded-lg transition-colors",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-800",children:f.fullname||f.name||"ครู"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[h[f.role]||"ครู",f.departmentName?` • ${f.departmentName}`:""]})]}),(0,t.jsx)(n.Avatar,{size:40,style:{backgroundColor:"#0A894C",color:"#fff"},children:(f.fullname||f.name||"T").charAt(0)})]})})]})})})},{Content:f}=a.Layout;function g({children:e}){let n=(0,l.useRouter)(),[i,c]=(0,r.useState)(!1),[o,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(()=>{let e=localStorage.getItem("token"),t=(0,m.getSessionUser)();if(!t||!e){n.push("/login"),h(!1);return}if(!["TEACHER","DEPT_STAFF"].includes(t.role)){alert("คุณไม่มีสิทธิ์เข้าถึงหน้านี้"),n.push("/login"),h(!1);return}u(!0),h(!1)})()},[n]),d)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-[#0A894C]"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"กำลังตรวจสอบสิทธิ์..."})]})}):o?(0,t.jsxs)(a.Layout,{style:{minHeight:"100vh"},children:[(0,t.jsx)(s.default,{userRole:"teacher",collapsed:i,onCollapse:c}),(0,t.jsxs)(a.Layout,{style:{marginLeft:i?80:250,transition:"margin-left 0.2s"},children:[(0,t.jsx)(p,{}),(0,t.jsx)(f,{style:{margin:"24px 16px",padding:24,minHeight:"calc(100vh - 112px)",background:"#f5f5f5"},children:e})]})]}):null}e.s(["default",()=>g],97432)}]);