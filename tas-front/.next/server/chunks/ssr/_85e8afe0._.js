module.exports=[87466,a=>{"use strict";let b=(0,a.i(70106).default)("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);a.s(["FileCheck",()=>b],87466)},48545,a=>{"use strict";var b=a.i(87924),c=a.i(83772),d=a.i(27730),e=a.i(25125),f=a.i(70671),g=a.i(49281),h=a.i(87532);let i=(0,a.i(70106).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),{Option:j}=d.Select,k=["คอมพิวเตอร์ศึกษา","ครุศาสตร์โยธา","ครุศาสตร์ไฟฟ้า","ครุศาสตร์เครื่องกล","ครุศาสตร์เทคโนโลยีและสารสนเทศ","บริหารเทคนิคศึกษา"],l=["TCT","CED"],m=["1","2","3","4"];a.s(["default",0,({onSearch:a,onFilterChange:n,onReset:o,hideDepartmentFilter:p=!1,departmentOptions:q=k,majorOptions:r=l,yearOptions:s=m})=>(0,b.jsx)("div",{className:"p-4 rounded-lg mb-4",style:{background:"#ffffff",border:"1px solid #e8f5e9",boxShadow:"0 2px 8px rgba(10, 137, 76, 0.08)"},children:(0,b.jsxs)(e.Row,{gutter:[16,16],children:[(0,b.jsx)(f.Col,{xs:24,md:8,children:(0,b.jsx)(c.Input,{placeholder:"Search by student ID, name, or activity name",prefix:(0,b.jsx)(h.Search,{size:16,style:{color:"#0A894C"}}),onChange:b=>a(b.target.value),size:"large",style:{borderColor:"#0A894C"}})}),!p&&(0,b.jsx)(f.Col,{xs:24,md:5,children:(0,b.jsx)(d.Select,{placeholder:"เลือกภาควิชา",onChange:a=>n("department",a),allowClear:!0,size:"large",style:{width:"100%"},children:q.map(a=>(0,b.jsx)(j,{value:a.id||a,children:a.name||a},a.id||a))})}),(0,b.jsx)(f.Col,{xs:24,md:p?6:4,children:(0,b.jsx)(d.Select,{placeholder:"เลือกสาขาวิชา",onChange:a=>n("major",a),allowClear:!0,size:"large",style:{width:"100%"},children:r.map(a=>(0,b.jsx)(j,{value:a.id||a,children:a.name||a},a.id||a))})}),(0,b.jsx)(f.Col,{xs:24,md:p?6:4,children:(0,b.jsx)(d.Select,{placeholder:"เลือกชั้นปี",onChange:a=>n("year",a),allowClear:!0,size:"large",style:{width:"100%"},children:s.map(a=>(0,b.jsxs)(j,{value:a,children:["ปี ",a]},a))})}),(0,b.jsx)(f.Col,{xs:24,md:p?4:3,children:(0,b.jsx)(g.Button,{icon:(0,b.jsx)(i,{size:16}),onClick:o,size:"large",style:{width:"100%",backgroundColor:"#0A894C",borderColor:"#0A894C",color:"#ffffff"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#086b3d"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="#0A894C"},children:"รีเซ็ต"})})]})})],48545)},7115,a=>{"use strict";var b=a.i(87924),c=a.i(71306),d=a.i(49281),e=a.i(68186),f=a.i(77156);a.s(["default",0,({data:a,onView:g,showParticipationCount:h=!1,showEvidenceCount:i=!1})=>{let j=[{title:"ลำดับ",dataIndex:"index",key:"index",width:80,align:"center",render:(a,b,c)=>c+1},{title:"กิจกรรม",key:"activityName",ellipsis:!0,render:(a,b)=>b.name||b.activityName},{title:"ภาควิชา",key:"department",width:180,render:(a,b)=>b.department?.name||b.department||"-"},{title:"สาขาวิชา",key:"major",width:150,align:"center",render:(a,c)=>c.majorJoins&&c.majorJoins.length>0?(0,b.jsx)("div",{className:"flex flex-wrap gap-1 justify-center",children:c.majorJoins.map((a,c)=>(0,b.jsx)(e.Tag,{color:"#0A894C",style:{borderRadius:8,fontWeight:500},children:a.major?.name},c))}):c.major?(0,b.jsx)(e.Tag,{color:"#0A894C",style:{borderRadius:8,fontWeight:500},children:c.major}):(0,b.jsx)("span",{className:"text-gray-400",children:"ทุกสาขา"})},{title:h?"จำนวนผู้เข้าร่วม":i?"จำนวนส่งหลักฐาน":"จำนวนนักศึกษา",key:"studentCount",width:150,align:"center",render:(a,c)=>{let d,e;h?(d=c.participationCount||0,e=c.maxPeopleCount||c.maxStudents||0):i?(d=c.evidenceCount||0,e=c.maxPeopleCount||c.maxStudents||0):(d=c.studentCount||c.peopleCount||0,e=c.maxStudents||c.maxPeopleCount||0);let f=e>0?d/e*100:0;return(0,b.jsxs)("span",{style:{color:f>=80?"#f5222d":f>=50?"#fa8c16":"#0A894C",fontWeight:"600",fontSize:"14px"},children:[d,"/",e]})}},{title:"การจัดการ",key:"action",width:120,align:"center",render:(a,c)=>(0,b.jsx)("div",{className:"flex gap-2 justify-center",children:(0,b.jsx)(d.Button,{type:"text",icon:(0,b.jsx)(f.Eye,{size:18}),onClick:()=>g(c),style:{color:"#0A894C"},title:"ดูรายละเอียด"})})}];return(0,b.jsx)(c.Table,{columns:j,dataSource:a,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:a=>`ทั้งหมด ${a} รายการ`},scroll:{x:800},style:{backgroundColor:"#ffffff",borderRadius:8}})}])},75160,a=>{"use strict";var b=a.i(87924),c=a.i(31626),d=a.i(27387),e=a.i(77819),f=a.i(71306),g=a.i(49281),h=a.i(68186),i=a.i(40634),j=a.i(83772),k=a.i(16201),l=a.i(62722),m=a.i(41710),n=a.i(46842),o=a.i(72131);let{TextArea:p}=j.Input;a.s(["default",0,({visible:a,onClose:j,activity:q,onApprove:r,onReject:s})=>{let[t,u]=(0,o.useState)([]),[v,w]=(0,o.useState)(!1),[x,y]=(0,o.useState)(""),[z,A]=(0,o.useState)([]),B=(()=>{if(!q?.attendances)return{approved:[],pending:[],rejected:[]};let a=[],b=[],c=[];return q.attendances.forEach(d=>{let e={...d,studentId:d.user?.studentCode||d.user?.studentId||"-",name:d.user?.fullname||`${d.user?.firstName||""} ${d.user?.lastName||""}`.trim()||"Unknown",department:d.user?.department?.name||"-",major:d.user?.major?.name||"-",year:d.user?.level||"-"};"APPROVED"===d.status||"COMPLETED"===d.status?a.push(e):"APPLIED"===d.status?b.push(e):["REVISION_REQUIRED","REJECTED"].includes(d.status)&&c.push(e)}),{approved:a,pending:b,rejected:c}})(),C=(a=null)=>{a?A([a]):A(B.pending.filter(a=>t.includes(a.id))),w(!0)},D=[{title:"ลำดับ",dataIndex:"index",key:"index",width:70,align:"center",render:(a,b,c)=>c+1},{title:"นักศึกษา",dataIndex:"name",key:"name",render:(a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Avatar,{size:32,style:{backgroundColor:"#0A894C"},icon:(0,b.jsx)(n.User,{size:18})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:c.studentId})]})]})},{title:"ภาควิชา",dataIndex:"department",key:"department",width:180},{title:"สาขา",dataIndex:"major",key:"major",width:100,align:"center",render:a=>(0,b.jsx)(h.Tag,{color:"#0A894C",style:{borderRadius:8},children:a})},{title:"ชั้นปี",dataIndex:"year",key:"year",width:80,align:"center",render:a=>`ปี ${a}`}],E=[...D],F=[...D,{title:"การจัดการ",key:"action",width:120,align:"center",render:(a,c)=>(0,b.jsx)("div",{className:"flex gap-2 justify-center",children:(0,b.jsx)(g.Button,{size:"small",danger:!0,icon:(0,b.jsx)(l.XCircle,{size:16}),onClick:()=>C(c),children:"ไม่อนุมัติ"})})}],G=[...D],H=[{key:"approved",label:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.CheckCircle,{size:16}),"อนุมัติแล้ว (",B.approved.length,")"]}),children:(0,b.jsx)(f.Table,{columns:E,dataSource:B.approved,rowKey:"id",pagination:{pageSize:5},scroll:{x:600}})},{key:"pending",label:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Clock,{size:16}),"รออนุมัติ (",B.pending.length,")"]}),children:(0,b.jsxs)("div",{children:[t.length>0&&(0,b.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,b.jsxs)(g.Button,{type:"primary",icon:(0,b.jsx)(k.CheckCircle,{size:16}),onClick:()=>{B.pending.filter(a=>t.includes(a.id)).forEach(a=>r(a)),u([])},style:{backgroundColor:"#0A894C",borderColor:"#0A894C"},children:["อนุมัติที่เลือก (",t.length,")"]}),(0,b.jsxs)(g.Button,{danger:!0,icon:(0,b.jsx)(l.XCircle,{size:16}),onClick:()=>C(),children:["ไม่อนุมัติที่เลือก (",t.length,")"]})]}),(0,b.jsx)(f.Table,{columns:F,dataSource:B.pending,rowKey:"id",rowSelection:{selectedRowKeys:t,onChange:a=>{u(a)}},pagination:{pageSize:5},scroll:{x:600}})]})},{key:"rejected",label:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.XCircle,{size:16}),"ต้องแก้ไข (",B.rejected.length,")"]}),children:(0,b.jsx)(f.Table,{columns:G,dataSource:B.rejected,rowKey:"id",pagination:{pageSize:5},scroll:{x:600}})}];return(0,b.jsxs)(d.Modal,{title:(0,b.jsxs)("div",{className:"jsx-1521a40544afcfbd",children:[(0,b.jsx)("h3",{style:{color:"#0A894C"},className:"jsx-1521a40544afcfbd text-lg font-semibold",children:"รายการนักศึกษา"}),(0,b.jsx)("p",{className:"jsx-1521a40544afcfbd text-sm text-gray-500 mt-1",children:q?.name||q?.activityName||"กิจกรรม"})]}),open:a,onCancel:j,width:900,footer:null,styles:{header:{borderBottom:"2px solid #0A894C",paddingBottom:16}},children:[(0,b.jsx)(e.Tabs,{defaultActiveKey:"approved",items:H,className:"custom-tabs"}),(0,b.jsx)(c.default,{id:"1521a40544afcfbd",children:".custom-tabs .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn{color:#0a894c!important}.custom-tabs .ant-tabs-ink-bar{background:#0a894c!important}.custom-tabs .ant-tabs-tab:hover{color:#0a894c!important}"}),(0,b.jsx)(d.Modal,{title:"เหตุผลในการไม่อนุมัติ",open:v,onCancel:()=>{w(!1),y(""),A([])},onOk:()=>{x.trim()?(z.forEach(a=>{s({...a,rejectReason:x.trim()})}),w(!1),y(""),A([]),u([])):alert("กรุณาระบุเหตุผลในการไม่อนุมัติ")},okText:"ยืนยัน",cancelText:"ยกเลิก",okButtonProps:{style:{backgroundColor:"#f5222d",borderColor:"#f5222d"}},children:(0,b.jsxs)("div",{className:"jsx-1521a40544afcfbd mb-4",children:[(0,b.jsxs)("p",{className:"jsx-1521a40544afcfbd text-gray-600 mb-2",children:["นักศึกษาที่จะไม่อนุมัติ: ",z.map(a=>a.name).join(", ")]}),(0,b.jsx)(p,{rows:4,placeholder:"กรุณาระบุเหตุผลในการไม่อนุมัติ...",value:x,onChange:a=>y(a.target.value)})]})})]})}])},1830,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40634),e=a.i(49281),f=a.i(27387),g=a.i(76130),h=a.i(64831),i=a.i(71306),j=a.i(68186),k=a.i(83772),l=a.i(53547),m=a.i(98621),n=a.i(47850),o=a.i(68438);a.i(18933);var p=a.i(68188),q=a.i(72676),r=a.i(43811);let s=c.createContext(null);function t(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}var u=a.i(85524),v=a.i(10030);let w={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};var x=a.i(56957);function y(a,b,c,d){let e=b+c,f=(c-d)/2;if(c>d){if(b>0)return{[a]:f};if(b<0&&e<d)return{[a]:-f}}else if(b<0||e>d)return{[a]:b<0?f:-f};return{}}function z(a,b,c,d){let{width:e,height:f}=t(),g=null;return a<=e&&b<=f?g={x:0,y:0}:(a>e||b>f)&&(g={...y("x",c,a,e),...y("y",d,b,f)}),g}function A({src:a,isCustomPlaceholder:b,fallback:d}){let[e,f]=(0,c.useState)(b?"loading":"normal"),g=(0,c.useRef)(!1),h="error"===e;(0,c.useEffect)(()=>{let b=!0;return new Promise(b=>{if(!a)return void b(!1);let c=document.createElement("img");c.onerror=()=>b(!1),c.onload=()=>b(!0),c.src=a}).then(a=>{!a&&b&&f("error")}),()=>{b=!1}},[a]),(0,c.useEffect)(()=>{b&&!g.current?f("loading"):h&&f("normal")},[a]);let i=()=>{f("normal")};return[a=>{g.current=!1,"loading"===e&&a?.complete&&(a.naturalWidth||a.naturalHeight)&&(g.current=!0,i())},h&&d?{src:d}:{onLoad:i,src:a},e]}function B(a,b){return Math.hypot(a.x-b.x,a.y-b.y)}function C(a){let{prefixCls:b,icon:d,onClick:e}=a;return c.createElement("button",{className:`${b}-close`,onClick:e},d)}function D(a){let{prefixCls:b,showProgress:d,current:e,count:f,showSwitch:g,classNames:h,styles:i,icons:j,image:k,transform:l,countRender:n,actionsRender:o,scale:p,minScale:q,maxScale:r,onActive:s,onFlipY:t,onFlipX:u,onRotateLeft:v,onRotateRight:w,onZoomOut:x,onZoomIn:y,onClose:z,onReset:A}=a,{left:B,right:C,prev:D,next:E,flipY:F,flipX:G,rotateLeft:H,rotateRight:I,zoomOut:J,zoomIn:K}=j,L=d&&c.createElement("div",{className:`${b}-progress`},n?n(e+1,f):c.createElement("bdi",null,`${e+1} / ${f}`)),M=`${b}-actions-action`,N=({type:a,disabled:b,onClick:d,icon:e})=>c.createElement("div",{key:a,className:(0,m.clsx)(M,`${M}-${a}`,{[`${M}-disabled`]:!!b}),onClick:d},e),O=g?N({icon:D??B,onClick:()=>s(-1),type:"prev",disabled:0===e}):void 0,P=g?N({icon:E??C,onClick:()=>s(1),type:"next",disabled:e===f-1}):void 0,Q=N({icon:F,onClick:t,type:"flipY"}),R=N({icon:G,onClick:u,type:"flipX"}),S=N({icon:H,onClick:v,type:"rotateLeft"}),T=N({icon:I,onClick:w,type:"rotateRight"}),U=N({icon:J,onClick:x,type:"zoomOut",disabled:p<=q}),V=N({icon:K,onClick:y,type:"zoomIn",disabled:p===r}),W=c.createElement("div",{className:(0,m.clsx)(`${b}-actions`,h.actions),style:i.actions},Q,R,S,T,U,V);return c.createElement("div",{className:(0,m.clsx)(`${b}-footer`,h.footer),style:i.footer},L,o?o(W,{icons:{prevIcon:O,nextIcon:P,flipYIcon:Q,flipXIcon:R,rotateLeftIcon:S,rotateRightIcon:T,zoomOutIcon:U,zoomInIcon:V},actions:{onActive:s,onFlipY:t,onFlipX:u,onRotateLeft:v,onRotateRight:w,onZoomOut:x,onZoomIn:y,onReset:A,onClose:z},transform:l,current:e,total:f,image:k}):W)}function E(a){let{prefixCls:b,onActive:d,current:e,count:f,icons:{left:g,right:h,prev:i,next:j}}=a,k=`${b}-switch`;return c.createElement(c.Fragment,null,c.createElement("div",{className:(0,m.clsx)(k,`${k}-prev`,{[`${k}-disabled`]:0===e}),onClick:()=>d(-1)},i??g),c.createElement("div",{className:(0,m.clsx)(k,`${k}-next`,{[`${k}-disabled`]:e===f-1}),onClick:()=>d(1)},j??h))}function F(){return(F=Object.assign.bind()).apply(this,arguments)}let G=({fallback:a,src:b,imgRef:d,...e})=>{let[f,g]=A({src:b,fallback:a});return c.default.createElement("img",F({ref:a=>{d.current=a,f(a)}},e,g))},H=a=>{let{prefixCls:b,rootClassName:d,src:e,alt:f,imageInfo:g,fallback:h,movable:i=!0,onClose:j,open:k,afterOpenChange:l,icons:y={},closeIcon:A,getContainer:H,current:I=0,count:J=1,countRender:K,scaleStep:L=.5,minScale:M=1,maxScale:N=50,motionName:O="fade",imageRender:P,imgCommonProps:Q,actionsRender:R,onTransform:S,onChange:T,classNames:U={},styles:V={},mousePosition:W,zIndex:X}=a,Y=(0,c.useRef)(),Z=(0,c.useContext)(s),$=Z&&J>1,_=Z&&J>=1,[aa,ab]=(0,c.useState)(!0),{transform:ac,resetTransform:ad,updateTransform:ae,dispatchZoomChange:af}=function(a,b,d,e){let f=(0,c.useRef)(null),g=(0,c.useRef)([]),[h,i]=(0,c.useState)(w),j=(a,b)=>{null===f.current&&(g.current=[],f.current=(0,v.default)(()=>{i(a=>{let c=a;return g.current.forEach(a=>{c={...c,...a}}),f.current=null,e?.({transform:c,action:b}),c})})),g.current.push({...h,...a})};return{transform:h,resetTransform:a=>{i(w),(0,u.default)(w,h)||e?.({transform:w,action:a})},updateTransform:j,dispatchZoomChange:(c,e,f,g,i)=>{let{width:k,height:l,offsetWidth:m,offsetHeight:n,offsetLeft:o,offsetTop:p}=a.current,q=c,r=h.scale*c;r>d?(r=d,q=d/h.scale):r<b&&(q=(r=i?r:b)/h.scale);let s=g??innerHeight/2,u=q-1,v=u*((f??innerWidth/2)-h.x-o),w=u*(s-h.y-p),x=h.x-(v-u*k*.5),y=h.y-(w-u*l*.5);if(c<1&&1===r){let a=m*r,b=n*r,{width:c,height:d}=t();a<=c&&b<=d&&(x=0,y=0)}j({x:x,y:y,scale:r},e)}}}(Y,M,N,S),{isMoving:ag,onMouseDown:ah,onWheel:ai}=function(a,b,d,e,f,g,h){let{rotate:i,scale:j,x:k,y:l}=f,[m,n]=(0,c.useState)(!1),o=(0,c.useRef)({diffX:0,diffY:0,transformX:0,transformY:0}),p=a=>{d&&m&&g({x:a.pageX-o.current.diffX,y:a.pageY-o.current.diffY},"move")},q=()=>{if(d&&m){n(!1);let{transformX:b,transformY:c}=o.current;if(k===b||l===c)return;let d=a.current.offsetWidth*j,e=a.current.offsetHeight*j,{left:f,top:h}=a.current.getBoundingClientRect(),m=i%180!=0,p=z(m?e:d,m?d:e,f,h);p&&g({...p},"dragRebound")}};return(0,c.useEffect)(()=>{if(b){window.addEventListener("mouseup",q,!1),window.addEventListener("mousemove",p,!1);try{window.top!==window.self&&(window.top.addEventListener("mouseup",q,!1),window.top.addEventListener("mousemove",p,!1))}catch(a){(0,x.warning)(!1,`[rc-image] ${a}`)}}return()=>{window.removeEventListener("mouseup",q),window.removeEventListener("mousemove",p),window.top?.removeEventListener("mouseup",q),window.top?.removeEventListener("mousemove",p)}},[d,m,k,l,i,b]),{isMoving:m,onMouseDown:a=>{b&&0===a.button&&(a.preventDefault(),a.stopPropagation(),o.current={diffX:a.pageX-k,diffY:a.pageY-l,transformX:k,transformY:l},n(!0))},onMouseMove:p,onMouseUp:q,onWheel:a=>{if(!d||0==a.deltaY)return;let b=1+Math.min(Math.abs(a.deltaY/100),1)*e;a.deltaY>0&&(b=1/b),h(b,"wheel",a.clientX,a.clientY)}}}(Y,i,k,L,ac,ae,af),{isTouching:aj,onTouchStart:ak,onTouchMove:al,onTouchEnd:am}=function(a,b,d,e,f,g,h){let{rotate:i,scale:j,x:k,y:l}=f,[m,n]=(0,c.useState)(!1),o=(0,c.useRef)({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),p=a=>{o.current={...o.current,...a}};return(0,c.useEffect)(()=>{let a=a=>{a.preventDefault()};return d&&b&&window.addEventListener("touchmove",a,{passive:!1}),()=>{window.removeEventListener("touchmove",a)}},[d,b]),{isTouching:m,onTouchStart:a=>{if(!b)return;a.stopPropagation(),n(!0);let{touches:c=[]}=a;c.length>1?p({point1:{x:c[0].clientX,y:c[0].clientY},point2:{x:c[1].clientX,y:c[1].clientY},eventType:"touchZoom"}):p({point1:{x:c[0].clientX-k,y:c[0].clientY-l},eventType:"move"})},onTouchMove:a=>{let{touches:b=[]}=a,{point1:c,point2:d,eventType:e}=o.current;if(b.length>1&&"touchZoom"===e){let a={x:b[0].clientX,y:b[0].clientY},e={x:b[1].clientX,y:b[1].clientY},[f,g]=function(a,b,c,d){let e=B(a,c),f=B(b,d);if(0===e&&0===f)return[a.x,a.y];let g=e/(e+f);return[a.x+g*(b.x-a.x),a.y+g*(b.y-a.y)]}(c,d,a,e);h(B(a,e)/B(c,d),"touchZoom",f,g,!0),p({point1:a,point2:e,eventType:"touchZoom"})}else"move"===e&&(g({x:b[0].clientX-c.x,y:b[0].clientY-c.y},"move"),p({eventType:"move"}))},onTouchEnd:()=>{if(!d)return;if(m&&n(!1),p({eventType:"none"}),e>j)return g({x:0,y:0,scale:e},"touchZoom");let b=a.current.offsetWidth*j,c=a.current.offsetHeight*j,{left:f,top:h}=a.current.getBoundingClientRect(),k=i%180!=0,l=z(k?c:b,k?b:c,f,h);l&&g({...l},"dragRebound")}}}(Y,i,k,M,ac,ae,af),{rotate:an,scale:ao}=ac;(0,c.useEffect)(()=>{aa||ab(!0)},[aa]),(0,c.useEffect)(()=>{k||ad("close")},[k]);let ap=c.default.createElement(G,F({},Q,{width:a.width,height:a.height,imgRef:Y,className:`${b}-img`,alt:f,style:{transform:`translate3d(${ac.x}px, ${ac.y}px, 0) scale3d(${ac.flipX?"-":""}${ao}, ${ac.flipY?"-":""}${ao}, 1) rotate(${an}deg)`,transitionDuration:(!aa||aj)&&"0s"},fallback:h,src:e,onWheel:ai,onMouseDown:ah,onDoubleClick:a=>{k&&(1!==ao?ae({x:0,y:0,scale:1},"doubleClick"):af(1+L,"doubleClick",a.clientX,a.clientY))},onTouchStart:ak,onTouchMove:al,onTouchEnd:am,onTouchCancel:am})),aq={url:e,alt:f,...g},ar=()=>{af(1+L,"zoomIn")},as=()=>{af(1/(1+L),"zoomOut")},at=()=>{ae({rotate:an+90},"rotateRight")},au=()=>{ae({rotate:an-90},"rotateLeft")},av=()=>{ae({flipX:!ac.flipX},"flipX")},aw=()=>{ae({flipY:!ac.flipY},"flipY")},ax=()=>{ad("reset")},ay=a=>{let b=I+a;b>=0&&b<=J-1&&(ab(!1),ad(a<0?"prev":"next"),T?.(b,I))},az=(0,p.useEvent)(a=>{if(k){let{keyCode:b}=a;b===r.default.ESC&&j?.(),$&&(b===r.default.LEFT?ay(-1):b===r.default.RIGHT&&ay(1))}});(0,c.useEffect)(()=>{if(k)return window.addEventListener("keydown",az),()=>{window.removeEventListener("keydown",az)}},[k]);let[aA,aB]=(0,c.useState)(!1);c.default.useEffect(()=>{k&&aB(!0)},[k]);let[aC,aD]=(0,c.useState)(!1);(0,q.default)(()=>{k&&aD(!0)},[k]);let aE={...V.body};return W&&(aE.transformOrigin=`${W.x}px ${W.y}px`),c.default.createElement(o.default,{open:aC,getContainer:H,autoLock:aA},c.default.createElement(n.default,{motionName:O,visible:aC&&k,motionAppear:!0,motionEnter:!0,motionLeave:!0,onVisibleChanged:a=>{a||aB(!1),l?.(a)}},({className:a,style:e})=>{let f={...V.root,...e};return X&&(f.zIndex=X),c.default.createElement("div",{className:(0,m.clsx)(b,d,U.root,a,{[`${b}-moving`]:ag}),style:f},c.default.createElement("div",{className:(0,m.clsx)(`${b}-mask`,U.mask),style:V.mask,onClick:j}),c.default.createElement("div",{className:(0,m.clsx)(`${b}-body`,U.body),style:aE},P?P(ap,{transform:ac,image:aq,...Z?{current:I}:{}}):ap),!1!==A&&null!==A&&c.default.createElement(C,{prefixCls:b,icon:!0===A?y.close:A||y.close,onClick:j}),$&&c.default.createElement(E,{prefixCls:b,current:I,count:J,icons:y,onActive:ay}),c.default.createElement(D,{prefixCls:b,showProgress:_,current:I,count:J,showSwitch:$,classNames:U,styles:V,image:aq,transform:ac,icons:y,countRender:K,actionsRender:R,scale:ao,minScale:M,maxScale:N,onActive:ay,onFlipY:aw,onFlipX:av,onRotateLeft:au,onRotateRight:at,onZoomOut:as,onZoomIn:ar,onClose:j,onReset:ax}))}))};var I=a.i(66220);let J=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function K(){return(K=Object.assign.bind()).apply(this,arguments)}let L=0;function M(){return(M=Object.assign.bind()).apply(this,arguments)}let N=a=>{let{prefixCls:b="rc-image",previewPrefixCls:d=`${b}-preview`,rootClassName:e,className:f,style:g,classNames:h={},styles:i={},width:j,height:k,src:n,alt:o,placeholder:p,fallback:q,preview:r=!0,onClick:t,onError:u,...v}=a,w=(0,c.useContext)(s),x=!!r,{src:y,open:z,onOpenChange:B,cover:C,rootClassName:D,...E}=r&&"object"==typeof r?r:{},F="object"==typeof C&&C.placement&&C.placement||"center",G="object"==typeof C&&C.coverNode?C.coverNode:C,[I,K]=(0,l.default)(!!z,z),[N,O]=(0,c.useState)(null),P=a=>{K(a),B?.(a)},Q=y??n,[R,S,T]=A({src:n,isCustomPlaceholder:p&&!0!==p,fallback:q}),U=(0,c.useMemo)(()=>{let b={};return J.forEach(c=>{void 0!==a[c]&&(b[c]=a[c])}),b},J.map(b=>a[b])),V=function(a,b){let[d]=c.useState(()=>String(L+=1)),e=c.useContext(s),f={data:b,canPreview:a};return c.useEffect(()=>{if(e)return e.register(d,f)},[]),c.useEffect(()=>{e&&e.register(d,f)},[a,b]),d}(x,(0,c.useMemo)(()=>({...U,src:Q}),[Q,U]));return c.createElement(c.Fragment,null,c.createElement("div",M({},v,{className:(0,m.clsx)(b,e,h.root,{[`${b}-error`]:"error"===T}),onClick:x?a=>{let b=a.target.getBoundingClientRect(),c=b.x+b.width/2,d=b.y+b.height/2;w?w.onPreview(V,Q,c,d):(O({x:c,y:d}),P(!0)),t?.(a)}:t,style:{width:j,height:k,...i.root}}),c.createElement("img",M({},U,{className:(0,m.clsx)(`${b}-img`,{[`${b}-img-placeholder`]:!0===p},h.image,f),style:{height:k,...i.image,...g},ref:R},S,{width:j,height:k,onError:u})),"loading"===T&&c.createElement("div",{"aria-hidden":"true",className:`${b}-placeholder`},p),!1!==C&&x&&c.createElement("div",{className:(0,m.clsx)(`${b}-cover`,h.cover,`${b}-cover-${F}`),style:{display:g?.display==="none"?"none":void 0,...i.cover}},G)),!w&&x&&c.createElement(H,M({"aria-hidden":!I,open:I,prefixCls:d,onClose:()=>{P(!1)},mousePosition:N,src:Q,alt:o,imageInfo:{width:j,height:k},fallback:q,imgCommonProps:U},E,{classNames:h?.popup,styles:i?.popup,rootClassName:(0,m.clsx)(D,e)})))};N.PreviewGroup=({previewPrefixCls:a="rc-image-preview",classNames:b,styles:d,children:e,icons:f={},items:g,preview:h,fallback:i})=>{let{open:j,onOpenChange:k,current:m,onChange:n,...o}=h&&"object"==typeof h?h:{},[p,q,r]=function(a){let[b,d]=c.useState({}),e=c.useCallback((a,b)=>(d(c=>({...c,[a]:b})),()=>{d(b=>{let c={...b};return delete c[a],c})}),[]);return[c.useMemo(()=>a?a.map(a=>{if("string"==typeof a)return{data:{src:a}};let b={};return Object.keys(a).forEach(c=>{["src",...J].includes(c)&&(b[c]=a[c])}),{data:b}}):Object.keys(b).reduce((a,c)=>{let{canPreview:d,data:e}=b[c];return d&&a.push({data:e,id:c}),a},[]),[a,b]),e,!!a]}(g),[t,u]=(0,l.default)(0,m),[v,w]=(0,c.useState)(!1),{src:x,...y}=p[t]?.data||{},[z,A]=(0,l.default)(!!j,j),B=(0,I.default)(a=>{A(a),a!==z&&k?.(a,{current:t})}),[C,D]=(0,c.useState)(null),E=c.useCallback((a,b,c,d)=>{let e=r?p.findIndex(a=>a.data.src===b):p.findIndex(b=>b.id===a);u(e<0?0:e),B(!0),D({x:c,y:d}),w(!0)},[p,r]);c.useEffect(()=>{z?v||u(0):w(!1)},[z]);let F=c.useMemo(()=>({register:q,onPreview:E}),[q,E]);return c.createElement(s.Provider,{value:F},e,c.createElement(H,K({"aria-hidden":!z,open:z,prefixCls:a,onClose:()=>{B(!1),D(null)},mousePosition:C,imgCommonProps:y,src:x,fallback:i,icons:f,current:t,count:p.length,onChange:(a,b)=>{u(a),n?.(a,b)}},o,{classNames:b?.popup,styles:d?.popup})))};var O=a.i(88152),P=a.i(13835),Q=a.i(56038),R=a.i(24605),S=a.i(97152),T=a.i(43095);let U=(a,b,d,e,f,g,h)=>{let[i]=(0,S.useZIndex)("ImagePreview",a?.zIndex),[j,k]=(0,R.useMergedMask)(a?.mask,b?.mask,`${d}-preview`);return c.default.useMemo(()=>{if(!a)return a;let{cover:c,getContainer:l,closeIcon:n,rootClassName:o}=a,{closeIcon:p}=b??{};return{motionName:(0,T.getTransitionName)(`${d}-preview`,"fade"),...a,...h?{cover:c??h}:{},icons:g,getContainer:l??f,zIndex:i,closeIcon:n??p,rootClassName:(0,m.clsx)(e,o),mask:j,blurClassName:k.mask}},[a,b,d,e,f,h,g,i,j,k])};function V(a){let b=(0,c.useMemo)(()=>"boolean"==typeof a?a?{}:null:a&&"object"==typeof a?a:{},[a]);return(0,c.useMemo)(()=>{let a;if(!b)return[b,"",""];let{open:d,onOpenChange:e,cover:f,actionsRender:g,visible:h,onVisibleChange:i,rootClassName:j,maskClassName:k,mask:l,forceRender:m,destroyOnClose:n,toolbarRender:o,...p}=b;e?a=e:i&&(a=(a,b)=>{let{current:c}=b||{};void 0!==c?i(a,!a,c):i(a,!a)});let[q,r]=(0,c.isValidElement)(l)?[l,void 0]:"boolean"==typeof l||l&&"object"==typeof l?[void 0,l]:[void 0,void 0];return[{...p,open:d??h,onOpenChange:a,cover:f??q,mask:r,actionsRender:g??o},j,k]},[b])}var W=a.i(55779),X=a.i(40053),Y=a.i(26051),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},$=a.i(24958);function _(){return(_=Object.assign.bind()).apply(this,arguments)}let aa=c.forwardRef((a,b)=>c.createElement($.default,_({},a,{ref:b,icon:Z})));var ab={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};function ac(){return(ac=Object.assign.bind()).apply(this,arguments)}let ad=c.forwardRef((a,b)=>c.createElement($.default,ac({},a,{ref:b,icon:ab}))),ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"};function af(){return(af=Object.assign.bind()).apply(this,arguments)}let ag=c.forwardRef((a,b)=>c.createElement($.default,af({},a,{ref:b,icon:ae}))),ah={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};function ai(){return(ai=Object.assign.bind()).apply(this,arguments)}let aj=c.forwardRef((a,b)=>c.createElement($.default,ai({},a,{ref:b,icon:ah}))),ak={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};function al(){return(al=Object.assign.bind()).apply(this,arguments)}let am=c.forwardRef((a,b)=>c.createElement($.default,al({},a,{ref:b,icon:ak})));a.i(38539);var an=a.i(93610);a.i(83582);var ao=a.i(42939),ap=a.i(79382),aq=a.i(68042);let ar=a=>({position:a||"absolute",inset:0}),as=(0,ap.genStyleHooks)("Image",a=>{let b=`${a.componentCls}-preview`,c=(0,aq.mergeToken)(a,{previewCls:b,imagePreviewSwitchSize:a.controlHeightLG});return[(a=>{let{componentCls:b}=a;return{[b]:{position:"relative",display:"inline-block",[`${b}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${b}-img-placeholder`]:{backgroundColor:a.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${b}-placeholder`]:{...ar()}}}})(c),(a=>{let{componentCls:b,motionDurationSlow:c,colorTextLightSolid:d}=a;return{[b]:{[`${b}-cover`]:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:d,background:new ao.FastColor("#000").setA(.3).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${c}`},"&:hover":{[`${b}-cover`]:{opacity:1}},[`${b}-cover-top`]:{inset:"0 0 auto 0",justifyContent:"center"},[`${b}-cover-bottom`]:{inset:"auto 0 0 0",justifyContent:"center"}}}})(c),(a=>{let{motionEaseOut:b,previewCls:c,motionDurationSlow:d,componentCls:e,colorBgMask:f,marginXL:g,marginSM:h,margin:i,colorTextLightSolid:j,paddingSM:k,paddingLG:l,previewOperationHoverColor:m,previewOperationColorDisabled:n,previewOperationSize:o,zIndexPopup:p}=a,q=new ao.FastColor(f).setA(.1),r=q.clone().setA(.2),s={position:"absolute",color:j,backgroundColor:q.toRgbString(),borderRadius:"50%",padding:k,outline:0,border:0,cursor:"pointer",transition:`all ${d}`,display:"flex",fontSize:o,"&:hover":{backgroundColor:r.toRgbString()},"&:active":{backgroundColor:q.toRgbString()}};return{[`${e}-preview`]:{textAlign:"center",inset:0,position:"fixed",userSelect:"none",zIndex:p,[`${c}-mask`]:{inset:0,position:"absolute",background:f,[`&${e}-preview-mask-blur`]:{backdropFilter:"blur(4px)"},[`&${e}-preview-mask-hidden`]:{display:"none"}},[`${c}-body`]:{...ar(),"pointer-events":"none",display:"flex",alignItems:"center",justifyContent:"center","> *":{pointerEvents:"auto"}},[`${c}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${d} ${b} 0s`},[`&-moving ${c}-img`]:{cursor:"grabbing"},[`${c}-close`]:{...s,top:h,insetInlineEnd:h},[`${c}-switch`]:{...s,top:"50%",transform:"translateY(-50%)","&-disabled":{"&, &:hover, &:active":{color:n,background:"transparent",cursor:"not-allowed"}},"&-prev":{insetInlineStart:h},"&-next":{insetInlineEnd:h}},[`${c}-footer`]:{position:"absolute",bottom:g,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:a.previewOperationColor,transform:"translateX(-50%)",gap:i},[`${c}-actions`]:{display:"flex",gap:k,padding:`0 ${(0,an.unit)(l)}`,backgroundColor:q.toRgbString(),borderRadius:100,fontSize:o,"&-action":{padding:k,cursor:"pointer",transition:`all ${d}`,display:"flex",[`&:not(${c}-actions-action-disabled):hover`]:{color:m},"&-disabled":{color:n,cursor:"not-allowed"}}}}}})(c),(a=>{let{previewCls:b,motionDurationSlow:c}=a;return{[b]:{"&-fade":{transition:`opacity ${c}`,"&-enter, &-appear":{opacity:0,[`${b}-body`]:{transform:"scale(0)"},"&-active":{opacity:1,[`${b}-body`]:{transform:"scale(1)",transition:`transform ${c}`}}},"&-leave":{opacity:1,"&-active":{opacity:0,[`${b}-body`]:{transform:"scale(0)",transition:`transform ${c}`}}}}}}})(c)]},a=>({zIndexPopup:a.zIndexPopupBase+80,previewOperationColor:new ao.FastColor(a.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new ao.FastColor(a.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new ao.FastColor(a.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:1.5*a.fontSizeIcon})),at={rotateLeft:c.createElement(aa,null),rotateRight:c.createElement(ad,null),zoomIn:c.createElement(aj,null),zoomOut:c.createElement(am,null),close:c.createElement(W.default,null),left:c.createElement(X.default,null),right:c.createElement(Y.default,null),flipX:c.createElement(ag,null),flipY:c.createElement(ag,{rotate:90})},au=a=>{let{prefixCls:b,preview:d,className:e,rootClassName:f,style:g,styles:h,classNames:i,wrapperStyle:j,fallback:k,...l}=a,{getPrefixCls:n,getPopupContainer:o,className:p,style:q,preview:r,styles:s,classNames:t,fallback:u}=(0,P.useComponentConfig)("image"),v=n("image",b),w=(0,Q.default)(v),[x,y]=as(v,w),z=(0,m.clsx)(f,x,y,w),A=(0,m.clsx)(e,x,p),[B,C,D]=V(d),[E,F,G]=V(r),H=U(B,E,v,z,o,at,!0),I={...a,preview:H},J=c.useMemo(()=>({cover:(0,m.clsx)(G,D),popup:{root:(0,m.clsx)(F,C)}}),[C,D,F,G]),{mask:K,blurClassName:L}=H??{},M=c.useMemo(()=>({mask:(0,m.clsx)({[`${v}-preview-mask-hidden`]:!K},L)}),[K,v,L]),R=c.useMemo(()=>[t,i,J,{popup:M}],[t,i,J,M]),[S,T]=(0,O.useMergeSemantic)(R,[s,{root:j},h],{props:I},{popup:{_default:"root"}}),W={...q,...g};return c.createElement(N,{prefixCls:v,preview:H||!1,rootClassName:z,className:A,style:W,fallback:k??u,...l,classNames:S,styles:T})};au.PreviewGroup=({previewPrefixCls:a,preview:b,classNames:d,styles:e,...f})=>{let{getPrefixCls:g,getPopupContainer:h,direction:i,preview:j,classNames:k,styles:l}=(0,P.useComponentConfig)("image"),n=g("image",a),o=`${n}-preview`,p=(0,Q.default)(n),[q,r]=as(n,p),s=(0,m.clsx)(q,r,p),[t,u,v]=V(b),[w,x,y]=V(j),z=c.useMemo(()=>({...at,left:"rtl"===i?c.createElement(Y.default,null):c.createElement(X.default,null),right:"rtl"===i?c.createElement(X.default,null):c.createElement(Y.default,null)}),[i]),A=U(t,w,n,s,h,at),{mask:B,blurClassName:C}=A??{},D={...f,classNames:d,styles:e},[E,F]=(0,O.useMergeSemantic)([k,d,{cover:(0,m.clsx)(y,v),popup:{root:(0,m.clsx)(x,u),mask:(0,m.clsx)({[`${n}-preview-mask-hidden`]:!B},C)}}],[l,e],{props:D},{popup:{_default:"root"}});return c.createElement(N.PreviewGroup,{preview:A,previewPrefixCls:o,icons:z,...f,classNames:E,styles:F})};var av=a.i(16201),aw=a.i(77156),ax=a.i(4720),ay=a.i(46842),az=a.i(62722),aA=a.i(79478);let{TextArea:aB}=k.Input,aC=["image/jpeg","image/png","image/webp","image/gif"],aD={APPLIED:{color:"#fa8c16",text:"รอตรวจ"},REVISION_REQUIRED:{color:"#f5222d",text:"ต้องแก้ไข"},APPROVED:{color:"#0A894C",text:"อนุมัติแล้ว"},COMPLETED:{color:"#0A894C",text:"เสร็จสิ้น"}},aE=a=>["APPLIED","REVISION_REQUIRED"].includes(a);a.s(["default",0,({visible:a,onClose:k,activity:l,onApprove:m,onReject:n,filesByAttendanceId:o={},loading:p=!1})=>{let[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(null);(0,c.useEffect)(()=>()=>{A&&window.URL.revokeObjectURL(A)},[A]);let G=(0,c.useMemo)(()=>(Array.isArray(l?.attendances)?l.attendances:[]).map(a=>{let b=o[a.id]||[];return{...a,studentId:a.user?.studentCode||a.user?.studentId||"-",name:a.user?.fullname||`${a.user?.firstName||""} ${a.user?.lastName||""}`.trim()||"Unknown",department:a.user?.department?.name||"-",major:a.user?.major?.name||"-",year:a.user?.classYear||a.user?.level||"-",uploadDate:a.updatedAt?.split("T")[0]||"-",files:b}}),[l?.attendances,o]),H=async a=>{F(a.id);try{let b=await (0,aA.downloadFile)(a.id),c=window.URL.createObjectURL(b);aC.includes(a.mimeType)?(A&&window.URL.revokeObjectURL(A),B(c),D(a.fileName||"Evidence"),z(!0)):(window.open(c,"_blank","noopener,noreferrer"),setTimeout(()=>{window.URL.revokeObjectURL(c)},3e4))}catch(a){console.error("Error opening evidence file:",a)}finally{F(null)}},I=(a=null)=>{a?x([a]):x(G.filter(a=>q.includes(a.id))),t(!0)},J=[{title:"ลำดับ",width:70,align:"center",render:(a,b,c)=>c+1},{title:"นักศึกษา",dataIndex:"name",render:(a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Avatar,{size:32,style:{backgroundColor:"#0A894C"},icon:(0,b.jsx)(ay.User,{size:18})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:c.studentId})]})]})},{title:"ภาควิชา",dataIndex:"department",width:160},{title:"สาขา",dataIndex:"major",width:120,align:"center",render:a=>(0,b.jsx)(j.Tag,{color:"#0A894C",children:a})},{title:"ชั้นปี",dataIndex:"year",width:90,align:"center",render:a=>"-"===a?"-":`ปี ${a}`},{title:"ไฟล์หลักฐาน",width:320,render:(a,c)=>c.files.length?(0,b.jsx)(g.Space,{wrap:!0,children:c.files.map(a=>(0,b.jsx)(e.Button,{size:"small",icon:(0,b.jsx)(aw.Eye,{size:14}),loading:E===a.id,onClick:()=>H(a),children:"PDF"===a.fileType||"application/pdf"===a.mimeType?"PDF":"รูปภาพ"},a.id))}):(0,b.jsx)("span",{className:"text-gray-400",children:"ยังไม่มีไฟล์หลักฐาน"})},{title:"สถานะ",dataIndex:"status",width:120,align:"center",render:a=>{let c=aD[a]||{color:"default",text:a};return(0,b.jsx)(j.Tag,{color:c.color,children:c.text})}},{title:"การจัดการ",width:170,align:"center",render:(a,c)=>aE(c.status)?(0,b.jsxs)(g.Space,{size:4,children:[(0,b.jsx)(e.Button,{size:"small",type:"primary",icon:(0,b.jsx)(av.CheckCircle,{size:14}),onClick:()=>m(c),style:{backgroundColor:"#0A894C",borderColor:"#0A894C"},children:"อนุมัติ"}),(0,b.jsx)(e.Button,{size:"small",danger:!0,icon:(0,b.jsx)(az.XCircle,{size:14}),onClick:()=>I(c),children:"ส่งกลับ"})]}):(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"ไม่มีรายการที่ต้องจัดการ"})}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Modal,{title:(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold",style:{color:"#0A894C"},children:[(0,b.jsx)(ax.FileText,{size:20,className:"inline mr-2"}),"หลักฐานการเข้าร่วมกิจกรรม"]}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:l?.name||l?.activityName||"กิจกรรม"})]}),open:a,onCancel:k,width:1200,footer:null,children:(0,b.jsxs)(h.Spin,{spinning:p,children:[q.length>0&&(0,b.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,b.jsxs)(e.Button,{type:"primary",icon:(0,b.jsx)(av.CheckCircle,{size:16}),onClick:()=>{G.filter(a=>q.includes(a.id)).forEach(a=>m(a)),r([])},style:{backgroundColor:"#0A894C",borderColor:"#0A894C"},children:["อนุมัติที่เลือก (",q.length,")"]}),(0,b.jsxs)(e.Button,{danger:!0,icon:(0,b.jsx)(az.XCircle,{size:16}),onClick:()=>I(),children:["ส่งกลับแก้ไข (",q.length,")"]})]}),(0,b.jsx)(i.Table,{columns:J,dataSource:G,rowKey:"id",rowSelection:{selectedRowKeys:q,onChange:a=>r(a),getCheckboxProps:a=>({disabled:!aE(a.status)})},pagination:{pageSize:6},scroll:{x:1100}})]})}),(0,b.jsx)(f.Modal,{open:y,title:C,footer:null,onCancel:()=>z(!1),width:700,children:(0,b.jsx)(au,{src:A,alt:C,style:{width:"100%"},preview:!1})}),(0,b.jsx)(f.Modal,{title:"เหตุผลการส่งกลับแก้ไข",open:s,onCancel:()=>{t(!1),v(""),x([])},onOk:()=>{u.trim()?(w.forEach(a=>{n({...a,rejectReason:u.trim()})}),t(!1),v(""),x([]),r([])):alert("กรุณาระบุเหตุผลในการส่งกลับแก้ไข")},okText:"ยืนยัน",cancelText:"ยกเลิก",okButtonProps:{style:{backgroundColor:"#f5222d",borderColor:"#f5222d"}},children:(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("p",{className:"text-gray-600 mb-2",children:["นักศึกษาที่ส่งกลับ: ",w.map(a=>a.name).join(", ")]}),(0,b.jsx)(aB,{rows:4,placeholder:"กรุณาระบุเหตุผล...",value:u,onChange:a=>v(a.target.value)})]})})]})}],1830)}];

//# sourceMappingURL=_85e8afe0._.js.map