module.exports=[25125,a=>{"use strict";let b=a.i(67749).Row;a.s(["Row",0,b],25125)},70671,a=>{"use strict";var b=a.i(14698),b=b;let c=b.default;a.s(["Col",0,c],70671)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},84022,a=>{"use strict";var b=a.i(52114);a.s(["Progress",()=>b.default])},90669,24669,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);a.s(["Activity",()=>c],90669);let d=(0,b.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>d],24669)},4363,a=>{"use strict";var b=a.i(48908),c=a.i(71141);a.i(8193);let d=a=>Object.fromEntries(Object.entries(a).filter(([,a])=>void 0!==a)),e=async(a={})=>{let d=await b.default.get("/users",{params:a});return(Array.isArray(d.data)?d.data:[]).map(a=>{let b=(0,c.normalizeUser)(a);return{...b,userType:(0,c.roleToUserType)(a.role),department:b.department,major:b.major,departmentId:b.departmentId,majorId:b.majorId,level:b.level,studentId:b.studentId,role:a.role,studentProfile:a.studentProfile||null,teacherProfile:a.teacherProfile||null,staffProfile:a.staffProfile||null}})},f=async a=>{let d=((a={})=>{let b=a.role||"STUDENT",c={username:a.username||a.email||a.studentProfile?.studentCode||`user_${Date.now()}`,email:a.email||void 0,password:a.password||"ChangeMe123!",firstName:a.firstName,lastName:a.lastName||"",phone:a.phone||void 0,role:b,status:a.status||"ACTIVE"},d=a.facultyId;if("STUDENT"===b&&(c.studentProfile={studentCode:a.studentProfile?.studentCode||a.studentCode,facultyId:a.studentProfile?.facultyId||a.facultyId||d,departmentId:a.studentProfile?.departmentId||a.departmentId,majorId:a.studentProfile?.majorId||a.majorId,classYear:Number(a.studentProfile?.classYear||a.classYear||a.level)||1,academicYear:Number(a.studentProfile?.academicYear||a.academicYear)||2568,registrarVerified:!!(a.studentProfile?.registrarVerified??!0)}),"TEACHER"===b&&(c.teacherProfile={employeeCode:a.teacherProfile?.employeeCode||a.employeeCode||void 0,facultyId:a.teacherProfile?.facultyId||a.facultyId||d,departmentId:a.teacherProfile?.departmentId||a.departmentId}),"DEPT_STAFF"===b||"FACULTY_ADMIN"===b){let e="FACULTY_ADMIN"===b?"FACULTY_ADMIN":"DEPT_STAFF";c.staffProfile={staffType:e,facultyId:a.staffProfile?.facultyId||a.facultyId||d,departmentId:"FACULTY_ADMIN"===e?null:a.staffProfile?.departmentId||a.departmentId}}return c})(a),e=await b.default.post("/users",d);return(0,c.normalizeUser)(e.data)},g=async(a,e)=>{let f=d(((a={})=>{let b=a.role,c={username:a.username,email:a.email,password:a.password||void 0,firstName:a.firstName,lastName:a.lastName,phone:a.phone,status:a.status};if("STUDENT"===b&&(c.studentProfile=a.studentProfile||{studentCode:a.studentCode,facultyId:a.facultyId,departmentId:a.departmentId,majorId:a.majorId,classYear:a.classYear||a.level,academicYear:a.academicYear,registrarVerified:a.registrarVerified}),"TEACHER"===b&&(c.teacherProfile=a.teacherProfile||{employeeCode:a.employeeCode,facultyId:a.facultyId,departmentId:a.departmentId}),"DEPT_STAFF"===b||"FACULTY_ADMIN"===b){let d="FACULTY_ADMIN"===b?"FACULTY_ADMIN":"DEPT_STAFF";c.staffProfile=a.staffProfile||{staffType:d,facultyId:a.facultyId,departmentId:"FACULTY_ADMIN"===d?null:a.departmentId}}return c})(e));f.studentProfile&&(f.studentProfile=d(f.studentProfile)),f.teacherProfile&&(f.teacherProfile=d(f.teacherProfile)),f.staffProfile&&(f.staffProfile=d(f.staffProfile));let g=await b.default.patch(`/users/${a}`,f);return(0,c.normalizeUser)(g.data)},h=async a=>(await b.default.delete(`/users/${a}`)).data;a.s(["createUser",0,f,"deleteUser",0,h,"getAllUsers",0,e,"updateUser",0,g])},20206,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(55565),e=a.i(25125),f=a.i(70671),g=a.i(27730),h=a.i(84022),i=a.i(68186),j=a.i(64831),k=a.i(60246),l=a.i(41675),m=a.i(4720),n=a.i(90669),o=a.i(41710),p=a.i(16201),q=a.i(24669),r=a.i(4363),s=a.i(8193);let{Option:t}=g.Select,u=[{color:"#0A894C",icon:(0,b.jsx)(m.FileText,{size:20})},{color:"#1890ff",icon:(0,b.jsx)(n.Activity,{size:20})},{color:"#fa8c16",icon:(0,b.jsx)(l.Calendar,{size:20})},{color:"#52c41a",icon:(0,b.jsx)(k.Users,{size:20})},{color:"#eb2f96",icon:(0,b.jsx)(q.TrendingUp,{size:20})},{color:"#722ed1",icon:(0,b.jsx)(p.CheckCircle,{size:20})}];function v(){let a,v,w,x,y="#0A894C",[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)([]);(0,c.useEffect)(()=>{L()},[]);let L=async()=>{C(!0);try{let[a,b]=await Promise.all([(0,r.getAllUsers)(),(0,s.getAllActivities)()]);E(a),G(b);let c=new Map;b.forEach(a=>{(Array.isArray(a.departments)&&a.departments.length>0?a.departments:a.department?.id?[a.department]:[]).forEach(a=>{a?.id&&c.set(a.id,a)})});let d=Array.from(c.values()).sort((a,b)=>String(a.name||"").localeCompare(String(b.name||""),"th"));K(d),d.length>0&&!z&&A(d[0].id)}catch(a){console.error("Error fetching data:",a)}finally{C(!1)}};(0,c.useEffect)(()=>{let a=async()=>{if(!z)return void I([]);try{C(!0);let a=await (0,s.getActivitiesWithQuery)({departmentId:z});I(a.activities||[])}catch(a){console.error("Error fetching category activities:",a),I([])}finally{C(!1)}};J.length>0&&a()},[z,J]);let M=()=>{let a=new Map;return H.forEach(b=>{let c=b.typeActivity?.id||b.typeActivityId||"unknown",d=b.typeActivity?.name||"ยังไม่กำหนดประเภท",e=u[((a="")=>Array.from(String(a)).reduce((a,b)=>a+b.charCodeAt(0),0))(c)%u.length];a.has(c)||a.set(c,{id:c,name:d,nameEn:d,eventsCount:0,currentHours:0,targetHours:60,color:e.color,icon:e.icon});let f=a.get(c);f.eventsCount+=1,f.currentHours+=b.hour||0}),Array.from(a.values())},N=J.find(a=>a.id===z)?.name||"-";return(0,b.jsx)(j.Spin,{spinning:B,children:(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Row,{gutter:[16,16],children:(a=D.length,v=F.length,w=F.filter(a=>"IN_PROGRESS"===a.status).length,x=F.filter(a=>"OPEN_REGISTRATION"===a.status).length,[{title:"Total Users",value:a,icon:(0,b.jsx)(k.Users,{size:24,style:{color:y}}),color:y},{title:"Total Events",value:v,icon:(0,b.jsx)(l.Calendar,{size:24,style:{color:"#0db359"}}),color:"#0db359"},{title:"Pending Reports",value:x,icon:(0,b.jsx)(m.FileText,{size:24,style:{color:"#086b3d"}}),color:"#086b3d"},{title:"Active Events",value:w,icon:(0,b.jsx)(n.Activity,{size:24,style:{color:"#05c168"}}),color:"#05c168"}]).map((a,c)=>(0,b.jsx)(f.Col,{xs:24,sm:12,lg:6,children:(0,b.jsx)(d.Card,{hoverable:!0,className:"shadow-sm",styles:{body:{padding:"24px"}},children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-sm mb-1",children:a.title}),(0,b.jsx)("p",{className:"text-2xl font-bold",style:{color:a.color},children:a.value})]}),(0,b.jsx)("div",{className:"p-3 rounded-full",style:{backgroundColor:`${a.color}15`},children:a.icon})]})})},c))}),(0,b.jsx)("br",{}),(0,b.jsxs)(d.Card,{className:"mt-6 shadow-sm",styles:{header:{backgroundColor:"#e8f5e9",borderBottom:"2px solid #0A894C",color:"#086b3d",fontWeight:"600"}},title:(0,b.jsxs)("div",{className:"flex items-center gap-2 ",children:[(0,b.jsx)(o.Clock,{size:20,style:{color:"#0A894C"}}),(0,b.jsx)("span",{children:"จำนวนชั่วโมงกิจกรรมตามประเภท"})]}),children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ภาควิชา (Department)"}),(0,b.jsx)(g.Select,{value:z,onChange:A,style:{width:"100%"},size:"large",children:J.map(a=>(0,b.jsx)(t,{value:a.id,children:a.name},a.id))})]})}),(0,b.jsx)(e.Row,{gutter:[16,16],children:M().map(a=>{let c=Math.round(a.currentHours/a.targetHours*100),e=a.targetHours-a.currentHours,g=a.currentHours>=a.targetHours;return(0,b.jsx)(f.Col,{xs:24,md:12,lg:8,children:(0,b.jsx)(d.Card,{hoverable:!0,className:"h-full",style:{borderLeft:`4px solid ${a.color}`,backgroundColor:"#fafafa"},children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${a.color}15`,color:a.color},children:a.icon}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-sm mb-1",style:{color:a.color},children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.nameEn})]})]}),g&&(0,b.jsx)("div",{className:"p-1 rounded-full",style:{backgroundColor:"#52c41a15"},children:(0,b.jsx)(p.CheckCircle,{size:16,style:{color:"#52c41a"}})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 pt-2 border-t",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"กิจกรรม"}),(0,b.jsx)("p",{className:"text-lg font-bold text-gray-800",children:a.eventsCount})]}),(0,b.jsxs)("div",{className:"text-center border-l border-r",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"ชั่วโมง"}),(0,b.jsx)("p",{className:"text-lg font-bold",style:{color:g?"#52c41a":a.color},children:a.currentHours})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:e>0?"ขาด":"เกิน"}),(0,b.jsx)("p",{className:"text-lg font-bold",style:{color:e>0?"#fa8c16":e<0?"#52c41a":"#0A894C"},children:Math.abs(e)})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"ความคืบหน้า"}),(0,b.jsxs)("span",{className:"font-semibold",style:{color:g?"#52c41a":a.color},children:[a.currentHours,"/",a.targetHours," ชม."]})]}),(0,b.jsx)(h.Progress,{percent:c,strokeColor:g?"#52c41a":c>=80?a.color:c>=50?"#fa8c16":"#f5222d",showInfo:!1,size:"small"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,b.jsx)("span",{children:"0%"}),(0,b.jsxs)("span",{className:"font-medium",children:[c,"%"]}),(0,b.jsx)("span",{children:"100%"})]})]}),(0,b.jsx)("div",{className:"pt-2 border-t",children:g?(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 py-1 px-3 rounded-full bg-green-50",children:[(0,b.jsx)(p.CheckCircle,{size:14,style:{color:"#52c41a"}}),(0,b.jsx)("span",{className:"text-xs font-medium text-green-700",children:"ครบชั่วโมงแล้ว"})]}):e<=10?(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 py-1 px-3 rounded-full bg-orange-50",children:[(0,b.jsx)(q.TrendingUp,{size:14,style:{color:"#fa8c16"}}),(0,b.jsx)("span",{className:"text-xs font-medium text-orange-700",children:"ใกล้ครบชั่วโมง"})]}):(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 py-1 px-3 rounded-full bg-gray-100",children:[(0,b.jsx)(o.Clock,{size:14,style:{color:"#666"}}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"ดำเนินการต่อ"})]})})]})})},a.id)})}),M().length>0&&(0,b.jsx)("div",{className:"mt-6 p-4 rounded-lg bg-green-50 border border-green-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-full",style:{backgroundColor:"#0A894C"},children:(0,b.jsx)(q.TrendingUp,{size:20,style:{color:"white"}})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-800",children:["สรุปภาพรวม ",N]}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:["จำนวนกิจกรรมทั้งหมด:"," ",M().reduce((a,b)=>a+b.eventsCount,0)," ","กิจกรรม | ชั่วโมงรวม:"," ",M().reduce((a,b)=>a+b.currentHours,0),"/",M().reduce((a,b)=>a+b.targetHours,0)," ","ชั่วโมง"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600",children:"ความคืบหน้ารวม:"}),(0,b.jsxs)("span",{className:"text-lg font-bold",style:{color:"#0A894C"},children:[Math.round(M().reduce((a,b)=>a+b.currentHours,0)/M().reduce((a,b)=>a+b.targetHours,0)*100),"%"]})]})]})})]}),(0,b.jsx)(e.Row,{gutter:[16,16],className:"mt-6",children:(0,b.jsx)(f.Col,{xs:24,lg:16,children:(0,b.jsx)(d.Card,{title:"Recent Activities",className:"shadow-sm",styles:{header:{backgroundColor:"#e8f5e9",borderBottom:"2px solid #0A894C",color:"#086b3d",fontWeight:"600"}},children:(0,b.jsx)("div",{className:"space-y-3",children:F.sort((a,b)=>new Date(b.updatedAt||b.createdAt)-new Date(a.updatedAt||a.createdAt)).slice(0,4).map((a,c)=>{let d=a.updatedAt?new Date(a.updatedAt).toLocaleDateString("th-TH"):new Date(a.createdAt).toLocaleDateString("th-TH");return(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg transition-colors",style:{backgroundColor:"#f1f8f4",borderLeft:"3px solid #0A894C"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#e8f5e9"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="#f1f8f4"},children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#0A894C"}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-800",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.department?.name," • ",d]})]})]}),(0,b.jsx)(i.Tag,{color:"CLOSED"===a.status?"green":"IN_PROGRESS"===a.status?"blue":"CANCELLED"===a.status?"red":"orange",children:a.status})]},a.id)})})})})})]})})}a.s(["default",()=>v])}];

//# sourceMappingURL=_90465880._.js.map